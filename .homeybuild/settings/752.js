(self.webpackChunk=self.webpackChunk||[]).push([[752],{5352:(e,t,n)=>{"use strict";var a=n(1600),r=n(4590);t.Z=void 0;var s=r(n(2784)),l=(0,a(n(175)).default)(s.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");t.Z=l},8695:(e,t,n)=>{"use strict";var a;n.d(t,{L6:()=>r,zq:()=>s}),function(e){e.TargetTemperature="target_temperature",e.MeasureTemperature="measure_temperature",e.ThermostatOverride="thermostat_override"}(a||(a={}));const r=4,s=35},4746:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(5163);function r(e,t,n=null){return(0,a.mG)(this,void 0,void 0,(function*(){return yield new Promise(((a,r)=>{Homey.api(e,t,n,((e,t)=>{e?r(e):a(t)}))}))}))}},8681:(e,t,n)=>{"use strict";n.d(t,{M:()=>o,X:()=>i});var a=n(5163),r=n(6635),s=n(4746);const l=e=>(0,a.mG)(void 0,void 0,void 0,(function*(){const t=Object.assign({},e);return t.zones&&0!==t.zones.length||(t.zones=void 0),t.devices&&0!==t.devices.length||(t.devices=void 0),yield(0,s.Z)("PUT",`/plans/${e.id}`,t)})),o={fetchPlans:()=>(0,a.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,s.Z)("GET","/plans");return(0,r.sortBy)((0,r.map)(e,(e=>(e.zones=e.zones||[],e.devices=e.devices||[],e))),(e=>e.name))})),fetchPlanById:e=>(0,a.mG)(void 0,void 0,void 0,(function*(){const t=yield(0,s.Z)("GET",`/plans/${e}`);if(null==t)throw new Error(`Plan ${e} not found.`);return t.zones=t.zones||[],t.devices=t.devices||[],t})),fetchSchedule:()=>(0,a.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,s.Z)("GET","/schedule");return e.temperatures=(0,r.sortBy)(e.temperatures,[e=>e.device.name]),e})),updatePlan:l,removePlan:e=>(0,a.mG)(void 0,void 0,void 0,(function*(){return yield(0,s.Z)("DELETE",`/plans/${e}`)})),togglePlanState:e=>(0,a.mG)(void 0,void 0,void 0,(function*(){return e.enabled=!e.enabled,yield l(e),!0}))},i={fetchMode:()=>(0,a.mG)(void 0,void 0,void 0,(function*(){return(yield(0,s.Z)("GET","/mode")).mode})),setMode:e=>(0,a.mG)(void 0,void 0,void 0,(function*(){return yield(0,s.Z)("PUT","/mode",{mode:e})}))}},5030:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(331),r=n(2511),s=n(5223),l=n(436),o=n(2784);const i=(0,r.Z)((e=>({appBar:{},grow:{flexGrow:1},buttons:{display:"flex"},toolbar:{alignItems:"center",justifyContent:"space-between"}})))((e=>{const{classes:t}=e,{button:n,title:r,actions:i,subBar:c}=e.children||{button:null,title:null,actions:null,subBar:null};return o.createElement(o.Fragment,null,o.createElement(a.Z,{position:"absolute",color:"primary",className:t.appBar},o.createElement(s.Z,{className:t.toolbar},e.button||n,o.createElement(l.Z,{variant:"h6",color:"inherit",noWrap:!0},e.title||r),o.createElement("div",{className:t.grow}),null!=i&&o.createElement("div",{className:t.buttons},i)),null!=c&&c))}))},7606:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(5163),r=n(2511),s=n(436),l=n(2784);const o=(0,r.Z)((e=>({text:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}})))((e=>{const{classes:t,text:n}=e,r=(0,a._T)(e,["classes","text"]);return l.createElement(s.Z,Object.assign({className:t.text,color:"textSecondary"},r),n)}))},3547:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(5163),r=n(7869),s=n(2784),l=n(9503);const o=e=>{var{classes:t}=e,n=(0,a._T)(e,["classes"]);return s.createElement(l.Z,null,s.createElement(r.Z,Object.assign({fullWidth:!0,margin:"normal"},n)))}},9503:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(2511),r=n(2784);const s=(0,a.Z)((e=>({inputContainer:{width:"100%",paddingLeft:e.spacing(2),paddingRight:e.spacing(3)}})))((e=>r.createElement("div",{className:e.classes.inputContainer},e.children)))},7546:(e,t,n)=>{"use strict";n.d(t,{T2:()=>Z,j2:()=>k});var a=n(5163),r=n(436),s=n(5256),l=n(1776),o=n(9378),i=n(1837),c=n(2511),d=n(4190),u=n(4882),m=n(2784),p=n(7267),v=n(1810),g=n(8402),y=n(7933);function f(e){var{innerRef:t}=e,n=(0,a._T)(e,["innerRef"]);return n.to.toString().match(/https/)?m.createElement("a",Object.assign({onClick:()=>Homey.openURL(n.to.toString())},n),n.children):m.createElement(y.rU,Object.assign({},n))}const h=e=>m.createElement(g.Z,Object.assign({},e,{component:f}),e.children),b=e=>({text:{padding:e.spacing(2),paddingBottom:0},version:{padding:e.spacing(2),paddingTop:0},normal:{},selected:{color:e.palette.primary.main},otherButton:{},firstButton:{marginLeft:-12}}),Z=e=>{const[t,n]=m.useState(!1);return m.createElement(m.Fragment,null,m.createElement(E,{open:t,onClose:()=>{n(!1)}}),m.createElement(k,{first:!0,onClick:()=>{n(!0)},icon:m.createElement(u.Z,null)}))},E=(0,p.EN)((0,c.Z)(b)((e=>{const{classes:t}=e,n=[{type:"entry",to:"/",text:(0,v.Z)("menu.plans")},{to:"/temperatures",text:(0,v.Z)("menu.temperatures")},{to:"/schedules",text:(0,v.Z)("menu.schedules")},{to:"/settings",text:(0,v.Z)("menu.settings")},{to:"https://homey-heating.mskg.app",text:(0,v.Z)("menu.help")}];return m.createElement(d.ZP,{open:e.open,onClose:e.onClose},m.createElement(r.Z,{className:t.text,variant:"h5",gutterBottom:!0},(0,v.Z)("menu.title")),m.createElement(r.Z,{className:t.version,variant:"body2",color:"textSecondary",gutterBottom:!0},"Version ","2.0.0-rc14"," (","v2.0.0-rc14",")"),m.createElement(s.Z,null),m.createElement(l.Z,null,n.map((n=>"Divider"===n.type?m.createElement(s.Z,null):m.createElement(h,{key:n.to,to:n.to,disabled:e.match.url===n.to,button:!0},m.createElement(o.Z,{primary:n.text,classes:{primary:e.match.url!==n.to?t.normal:t.selected}}))))))}))),k=(0,c.Z)(b)((e=>{const{classes:t,first:n,icon:r}=e,s=(0,a._T)(e,["classes","first","icon"]);return m.createElement(i.Z,Object.assign({className:n?t.firstButton:t.otherButton,color:"inherit"},s),r)}))},638:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(5163),r=n(2511),s=n(436),l=n(2784);const o=(0,r.Z)((e=>({headline:{marginTop:e.spacing(4),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}})))((e=>{const{classes:t,text:n}=e,r=(0,a._T)(e,["classes","text"]);return l.createElement(s.Z,Object.assign({className:t.headline,variant:"h5",color:"textSecondary",gutterBottom:!0},r),n)}))},3589:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(2511),r=n(2784);const s=(0,a.Z)((e=>({root:{webkitOverflowScrolling:"touch",display:"flex",flexFlow:"column",height:"100vh",width:"100vw",backgroundColor:"#fff"},body:{flex:"1 0 100%",margin:0,maxWidth:"100%",overflowY:"scroll"}})))((e=>{const{classes:t}=e,{header:n,body:a,paddingTop:s,paddingBottom:l}=e.children,o=l||"auto";return r.createElement(r.Fragment,null,r.createElement("div",{className:t.root},n,r.createElement("div",{className:t.body,style:{paddingTop:s,paddingBottom:o}},a)))}))},2752:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var a=n(7277),r=n(2511),s=n(5352),l=n(9166),o=n(2784),i=n(7267),c=n(3314),d=n(5030),u=n(7606),m=n(7546),p=n(5806),v=n(2938),g=n(8695),y=n(1810),f=n(3547);const h=(0,r.Z)((e=>({planOverride:{marginBottom:e.spacing(2)}})))((e=>o.createElement(o.Fragment,null,o.createElement("div",{className:e.classes.planOverride},o.createElement(p.Z,{style:{marginLeft:0},control:o.createElement(v.Z,{checked:e.enabled,onChange:(t,n)=>{e.setOverride(e.mode,n?0===e.targetTemperature?16:e.targetTemperature:0)}}),label:e.text,labelPlacement:"end"}),o.createElement(f.Z,{label:(0,y.Z)("plan.target.label"),placeholder:(0,y.Z)("plan.target.placeholder"),disabled:!e.enabled,hidden:!e.enabled,type:"number",InputProps:{inputProps:{min:g.L6,max:g.zq,step:.5}},value:e.targetTemperature,onChange:t=>{e.setOverride(e.mode,parseFloat(t.target.value))}})))));var b=n(638),Z=n(3589),E=n(1105);const k=(0,i.EN)((0,r.Z)((e=>({resetPadding:{paddingBottom:100,paddingLeft:0,paddingRight:0}})))((e=>{const{history:t,classes:n}=e,{plan:r}=(0,E.g0)(e.match.params.id),{isDirty:i,updateOverride:p}=(0,E._b)(),{undo:v,commit:g}=(0,E.k6)(),f=e=>{const t=null!=r.overrides?r.overrides[c.pl[e]]||r.overrides[e]:null;return{mode:e,enabled:null!=t&&0!==t.targetTemperature,targetTemperature:null!=t?t.targetTemperature:0}};return o.createElement(Z.Z,null,{header:o.createElement(d.Z,null,{title:(0,y.Z)("overrides.title"),button:o.createElement(m.j2,{first:!0,onClick:function(){v(),t.replace({pathname:`/plans/${r.id}`,state:!0})},icon:i?o.createElement(l.Z,null):o.createElement(s.Z,null)}),actions:o.createElement(o.Fragment,null,i&&o.createElement(a.Z,{color:"inherit",onClick:function(){g(),t.replace({pathname:`/plans/${r.id}`,state:!0})}},(0,y.Z)("schedule.save")))}),paddingTop:50,body:o.createElement("div",{className:n.resetPadding},o.createElement(b.Z,{text:(0,y.Z)("overrides.section")}),o.createElement(u.Z,{text:(0,y.Z)("overrides.text")}),o.createElement(h,Object.assign({text:(0,y.Z)("overrides.athome"),setOverride:p},f(c.pl.DayAtHome))),o.createElement(h,Object.assign({text:(0,y.Z)("overrides.away"),setOverride:p},f(c.pl.DayAway))),o.createElement(h,Object.assign({text:(0,y.Z)("overrides.sleeping"),setOverride:p},f(c.pl.Sleep))),o.createElement(h,Object.assign({text:(0,y.Z)("overrides.holiday"),setOverride:p},f(c.pl.Holiday))),o.createElement(h,Object.assign({text:(0,y.Z)("overrides.outofseason"),setOverride:p},f(c.pl.OutOfSeason))))})})))},1105:(e,t,n)=>{"use strict";n.d(t,{P5:()=>i,Zk:()=>d,_b:()=>c,g0:()=>m,k6:()=>o});var a=n(2784),r=n(4481),s=n(8681),l=n(2958);const o=()=>{const e=(0,l.dr)(),t=(0,l.QG)("loaded"),n=(0,a.useCallback)((()=>e({type:"savePoint"})),[e]),r=(0,a.useCallback)((()=>e({type:"undo"})),[e]),s=(0,a.useCallback)((()=>e({type:"commit"})),[e]);return(0,a.useEffect)((()=>{n()}),[t]),{savePoint:n,undo:r,commit:s}},i=()=>{const e=(0,l.dr)();return{setName:(0,a.useCallback)((t=>e({type:"setName",name:t.target.value})),[e]),setDescription:(0,a.useCallback)((t=>e({type:"setDescription",description:t.target.value})),[e]),toggleState:(0,a.useCallback)((()=>e({type:"toggleEnabled"})),[e]),toggleZone:(0,a.useCallback)((t=>e({type:"toggleZone",zone:t})),[e]),toggleDevice:(0,a.useCallback)((t=>e({type:"toggleDevice",device:t})),[e])}},c=()=>{const e=(0,l.dr)(),[t,n]=(0,a.useState)(!1),r=(0,a.useCallback)(((t,a)=>{e({type:"setOverride",mode:t,temperature:a}),n(!0)}),[e]),s=(0,a.useCallback)((t=>{e({type:"clearOverride",mode:t}),n(!0)}),[e]),o=(0,a.useCallback)(((e,t)=>{0===t?s(e):r(e,t)}),[e]);return(0,a.useEffect)((()=>{n(!1)}),[]),{isDirty:t,setOverride:r,clearOverride:s,updateOverride:o}},d=()=>{const[e,t]=(0,a.useState)(!1),n=(0,l.dr)(),r=(0,a.useCallback)((e=>{n({type:"selectDay",day:e})}),[n]),s=(0,l.QG)("selectedDay"),o=(0,l.QG)("setPoint"),i=(0,a.useCallback)(((e,a)=>{null!=a&&a.length>0&&(t(!0),n({type:"copyDays",source:e,targets:a}))}),[n]),c=(0,a.useCallback)((e=>{t(!0),n({type:"removeSetPoint",index:e})}),[n]),d=(0,a.useCallback)((e=>{n({type:"loadSetPoint",setPoint:e})}),[n]),u=(0,a.useCallback)((e=>{n({type:"newSetPoint",day:e})}),[n]),m=(0,a.useCallback)((e=>{-1===e.index?n({type:"addSetPoint",setPoint:e}):n({type:"updateSetPoint",setPoint:e})}),[n]),p=(0,a.useCallback)((e=>n({type:"setStart",start:e})),[n]),v=(0,a.useCallback)((e=>n({type:"setTargetTemperature",temperature:parseFloat(e.target.value)})),[n]);return(0,a.useEffect)((()=>{t(!1)}),[]),{setDirty:t,isDirty:e,selectedDay:s,setPoint:o,copyDays:i,removeSetPoint:c,loadSetPoint:d,newSetPoint:u,selectDay:r,saveSetPoint:m,setStart:p,setTargetTemperature:v}};let u=!1;const m=(e,t=!0)=>{const n=(0,l.dr)(),o=(0,l.QG)("plan"),i=(0,l.QG)("loaded"),c=(0,l.QG)("dirty");if(!i||!t)if(null!=e&&"new"!==e||u){if(!u)throw s.M.fetchPlanById(e).then((e=>{u=!0,n({type:"loadPlan",plan:e})}))}else u=!0,n({type:"loadPlan",plan:{id:r(),enabled:!1,name:"",zones:[],devices:[],schedule:[],overrides:void 0}});return(0,a.useEffect)((()=>()=>{u=!1}),[e,t]),{plan:o,isDirty:c,loaded:i}}},8725:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var a=n||0,r=t;return[r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]]].join("")}},9157:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},4481:(e,t,n)=>{var a,r,s=n(9157),l=n(8725),o=0,i=0;e.exports=function(e,t,n){var c=t&&n||0,d=t||[],u=(e=e||{}).node||a,m=void 0!==e.clockseq?e.clockseq:r;if(null==u||null==m){var p=s();null==u&&(u=a=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==m&&(m=r=16383&(p[6]<<8|p[7]))}var v=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:i+1,y=v-o+(g-i)/1e4;if(y<0&&void 0===e.clockseq&&(m=m+1&16383),(y<0||v>o)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=v,i=g,r=m;var f=(1e4*(268435455&(v+=122192928e5))+g)%4294967296;d[c++]=f>>>24&255,d[c++]=f>>>16&255,d[c++]=f>>>8&255,d[c++]=255&f;var h=v/4294967296*1e4&268435455;d[c++]=h>>>8&255,d[c++]=255&h,d[c++]=h>>>24&15|16,d[c++]=h>>>16&255,d[c++]=m>>>8|128,d[c++]=255&m;for(var b=0;b<6;++b)d[c+b]=u[b];return t||l(d)}}}]);
//# sourceMappingURL=https://raw.githubusercontent.com/mskg/homey-heating/release/v2.0.0-rc14/settings/752.js.map