/*! For license information please see pages_temperatures_tsx.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([["pages_temperatures_tsx"],{"../../assets/icon_black.svg":(e,t,a)=>{e.exports=a.p+"icon_black.svg?5136879a03a13f9fb18f241b081f38cb"},"./api/devices/index.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{deviceAPI:()=>o});var s=a("../../node_modules/tslib/tslib.es6.js"),l=a("../../node_modules/lodash/lodash.js"),n=a("./api/callAPI.tsx");const o={fetchHeatingDevices:()=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){const e=yield(0,n.default)("GET","/devices"),t=(0,l.sortBy)(e,"name").reduce(((e,t,a)=>(e[a]=t,e[t.id]=t,e)),{});return t.length=e.length,t}))}},"./api/hooks.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{useDevices:()=>u,useMode:()=>p,usePlans:()=>i,useScheduleInformation:()=>c,useSettings:()=>m,useZones:()=>d});var s=a("./api/devices/index.tsx"),l=a("./api/heating/index.tsx"),n=a("./api/settings/index.tsx"),o=a("./api/suspendableState.tsx"),r=a("./api/zones/index.tsx");const i=(0,o.useSuspendableState)("plans",l.planAPI.fetchPlans),u=(0,o.useSuspendableState)("devices",s.deviceAPI.fetchHeatingDevices),d=(0,o.useSuspendableState)("zones",r.zoneAPI.fetchHeatingZones),c=(0,o.useSuspendableState)("scheduleInformation",l.planAPI.fetchSchedule),m=(0,o.useSuspendableState)("settings",n.settingsAPI.fetchSettings),p=(0,o.useSuspendableState)("mode",l.modeAPI.fetchMode)},"./api/settings/index.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{settingsAPI:()=>n});var s=a("../../node_modules/tslib/tslib.es6.js"),l=a("./api/callAPI.tsx");const n={fetchSettings:()=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){return yield(0,l.default)("GET","/settings")})),updateSettings:e=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){return yield(0,l.default)("PUT","/settings",e)}))}},"./api/suspendableState.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{useSuspendableState:()=>r});var s=a("../../node_modules/tslib/tslib.es6.js"),l=a("../../node_modules/react/index.js");const n=new Map,o="Loading...";function r(e,t){return(a=!1,r=!1)=>{const i=n.get(e);let[u,d]=[null,null];a&&([u,d]=l.useState(i!==o?i:null));const[c,m]=l.useState(!1);function p(a=!1){if(null==n.get(e)||a)throw n.set(e,o),function(e,t){return(0,s.__awaiter)(this,void 0,void 0,(function*(){try{t(yield e())}catch(e){t((()=>{throw e}))}}))}(t,(t=>{"function"==typeof t?n.set(e,t(n.get(e))):n.set(e,t)})).catch((e=>{m(!!r||(()=>{throw e}))}))}return p(),(0,l.useEffect)((()=>()=>{n.delete(e)}),[]),{[e]:a?u:i,[`set${e.charAt(0).toUpperCase()+e.slice(1)}`]:a?d:function(){throw new Error(`You must use hooks to save the value ${e}`)},[`load${e.charAt(0).toUpperCase()+e.slice(1)}`]:p,[`load${e.charAt(0).toUpperCase()+e.slice(1)}Failed`]:c}}}},"./api/zones/index.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{zoneAPI:()=>o});var s=a("../../node_modules/tslib/tslib.es6.js"),l=a("../../node_modules/lodash/lodash.js"),n=a("./api/callAPI.tsx");const o={fetchHeatingZones:()=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){const e=yield(0,n.default)("GET","/zones"),t=(0,l.sortBy)(e,"name").reduce(((e,t,a)=>(e[a]=t,e[t.id]=t,e)),{});return t.length=e.length,t}))}},"./components/FormTextField.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a("../../node_modules/tslib/tslib.es6.js"),l=a("../../node_modules/@material-ui/core/esm/TextField/TextField.js"),n=a("../../node_modules/react/index.js"),o=a("./components/InputContainer.tsx");const r=e=>{var{classes:t}=e,a=(0,s.__rest)(e,["classes"]);return n.createElement(o.default,null,n.createElement(l.default,Object.assign({fullWidth:!0,margin:"normal"},a)))}},"./components/InputContainer.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a("../../node_modules/@material-ui/core/esm/styles/withStyles.js"),l=a("../../node_modules/react/index.js");const n=(0,s.default)((e=>({inputContainer:{width:"100%",paddingLeft:e.spacing(2),paddingRight:e.spacing(3)}})))((e=>l.createElement("div",{className:e.classes.inputContainer},e.children)))},"./components/TemperatureAvatar.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{FilledTemperatureAvatar:()=>h,TemperatureAvatar:()=>g,normalize:()=>f});var s=a("../../node_modules/@material-ui/core/esm/Typography/Typography.js"),l=a("../../node_modules/@material-ui/core/esm/styles/withStyles.js"),n=a("../../node_modules/@material-ui/core/esm/Avatar/Avatar.js"),o=a("../../node_modules/@material-ui/core/colors/deepOrange.js"),r=a("../../node_modules/@material-ui/core/colors/lightBlue.js"),i=a("../../node_modules/react/index.js"),u=a("./components/temperatureToColor.tsx");const d=a("../../assets/icon_black.svg"),c=35,m=e=>({root:{fontSize:"1em",float:"left",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",width:45},avatar:{width:c,height:c,lineHeight:c,position:"relative",overflow:"hidden"},img:{width:c,height:c,zIndex:2,position:"absolute",left:0,bottom:0},fill:{display:"block",width:c,height:33,zIndex:1,position:"absolute",left:0,bottom:1}});function p(e,t){return(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)}function f(e,t,a){return(a-e)/(t-e)}const h=(0,l.default)(m)((e=>{const{value:t,classes:a,fill:l}=e;let{digits:n}=e;const u=(100===l?r.default:o.default)[500];return null==n&&(n=2),i.createElement("div",{className:a.root},i.createElement("div",{className:a.avatar},i.createElement("object",{className:a.img,data:d,type:"image/svg+xml"}),i.createElement("span",{style:{height:`calc(${l}% - 5px)`,background:u},className:a.fill})),i.createElement(s.default,{variant:"body1",color:"textSecondary",component:"div"},p(t,n),"Â°"))})),g=(0,l.default)(m)((e=>{const{value:t}=e;return i.createElement(n.default,{style:{padding:"25px",background:(0,u.temperatureToColor)(t),fontSize:"1em"}},p(t,1),"Â°")}))},"./components/temperatureToColor.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{slotTemperature:()=>r,temperatureToColor:()=>i});var s=a("../../node_modules/@material-ui/core/colors/amber.js"),l=a("../../node_modules/@material-ui/core/colors/blue.js"),n=a("../../node_modules/@material-ui/core/colors/deepOrange.js"),o=a("../../node_modules/@material-ui/core/colors/green.js");function r(e,t,a,s,l){return Math.floor((l-s)*(e-t)/(a-t)+s)}const i=e=>{const t=Math.round(100*r(Math.min(Math.max(16,e),24),16,24,1,8)+100);return e<=16?l.default[t]:e<=18.5?o.default[t]:e<=20.5?s.default[t]:n.default[t]}},"./pages/temperatures.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var s=a("../../node_modules/@material-ui/core/esm/FormControl/FormControl.js"),l=a("../../node_modules/@material-ui/core/esm/InputLabel/InputLabel.js"),n=a("../../node_modules/@material-ui/core/esm/Select/Select.js"),o=a("../../node_modules/@material-ui/core/esm/MenuItem/MenuItem.js"),r=a("../../node_modules/@material-ui/core/esm/ListItemAvatar/ListItemAvatar.js"),i=a("../../node_modules/@material-ui/core/esm/Divider/Divider.js"),u=a("../../node_modules/@material-ui/core/esm/List/List.js"),d=a("../../node_modules/@material-ui/core/esm/ListItem/ListItem.js"),c=a("../../node_modules/@material-ui/core/esm/ListItemSecondaryAction/ListItemSecondaryAction.js"),m=a("../../node_modules/@material-ui/core/esm/ListItemText/ListItemText.js"),p=a("../../node_modules/@material-ui/core/esm/styles/withStyles.js"),f=a("../../node_modules/react/index.js"),h=a("../app/model/heating.ts"),g=a("./api/hooks.tsx"),v=a("./components/AppHeader.tsx"),x=a("./components/BodyText.tsx"),_=a("./components/FormTextField.tsx"),b=a("./components/InputContainer.tsx"),y=a("./components/Menu.tsx"),E=a("./components/SubHeader.tsx"),j=a("./components/TemperatureAvatar.tsx"),S=a("./i18n/Translation.tsx"),I=a("./layouts/Page.tsx");const T=(0,p.default)((e=>({list:{marginTop:0,marginBottom:e.spacing(2)}})))((e=>{const{classes:t}=e,{scheduleInformation:a}=(0,g.useScheduleInformation)();function p(e){if(e.thermostatMode!==h.NormalOperationMode.Automatic)return(0,S.default)(`ThermostatMode.${e.thermostatMode}`);if(e.conflictingPlans.length>1){const t=e.conflictingPlans.filter((t=>e.plan.id!==t.id)).map((e=>e.name)).join(", ");return`${e.plan.name} (${t})`}return e.plan.name}return f.createElement(I.default,null,{header:f.createElement(v.default,null,{title:(0,S.default)("temperatures.title"),button:f.createElement(y.AppMenuButton,null)}),paddingTop:50,body:f.createElement(f.Fragment,null,f.createElement(E.default,{text:(0,S.default)("temperatures.schedule")}),f.createElement(b.default,null,f.createElement(s.default,{className:t.formControl,fullWidth:!0},f.createElement(l.default,null,(0,S.default)("temperatures.mode")),f.createElement(n.default,{fullWidth:!0,disabled:!0,value:a.mode},[0,1,2,3,4,5].map((e=>f.createElement(o.default,{key:e,value:e},(0,S.default)(`Modes.${e}`))))))),a.nextDate&&f.createElement(_.default,{label:(0,S.default)("temperatures.next"),type:"datetime-local",value:(e=>{if(null==e)return"";const t=new Date(e),a=e=>(e<10?"0":"")+e;return t.getFullYear()+"-"+a(t.getMonth()+1)+"-"+a(t.getDate())+"T"+a(t.getHours())+":"+a(t.getMinutes())+":"+a(t.getSeconds())})(a.nextDate),disabled:!0}),f.createElement(E.default,{text:(0,S.default)("temperatures.list.title")}),f.createElement(x.default,{text:(0,S.default)("temperatures.list.text")}),0===a.temperatures.length?f.createElement(x.default,{style:{paddingTop:16},text:(0,S.default)("temperatures.list.empty")}):f.createElement(u.default,{className:t.list},a.temperatures.length>0&&f.createElement(i.default,null),a.temperatures.map((e=>{return f.createElement(f.Fragment,{key:e.device.id+e.plan.id},f.createElement(d.default,null,f.createElement(r.default,null,f.createElement(j.TemperatureAvatar,{value:e.targetTemperature})),f.createElement(m.default,{primary:e.device.name,secondary:p(e)}),f.createElement(c.default,{style:{paddingRight:16}},f.createElement(j.FilledTemperatureAvatar,{value:e.temperature||e.targetTemperature,fill:(t=e.temperature||e.targetTemperature,a=e.targetTemperature,t>a?100:Math.round(t/a*100))}))),f.createElement(i.default,null));var t,a}))))})}))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZXNfdGVtcGVyYXR1cmVzX3RzeC5qcyIsIm1hcHBpbmdzIjoiO29IQUFBQSxFQUFPQyxRQUFVLElBQTBCLHlQQ1UzQyxNQWFhQyxFQUFZLENBQ3ZCQyxvQkFkMEIsS0FBK0IsaURBQ3pELE1BQU1DLFFBQWdCLGFBQWUsTUFBTyxZQUV0Q0MsR0FBUyxJQUFBQyxRQUFPRixFQUFTLFFBQVFHLFFBQU8sQ0FBQ0MsRUFBS0MsRUFBS0MsS0FDdkRGLEVBQUlFLEdBQU9ELEVBQ1hELEVBQUlDLEVBQUlFLElBQU1GLEVBQ1BELElBQ04sQ0FBQyxHQUdKLE9BRkFILEVBQU9PLE9BQVNSLEVBQVFRLE9BRWpCUCxDQUNULDRVQ3NCTyxNQUFNUSxHQUFXLElBQUFDLHFCQUErQixRQUFTLEVBQUFDLFFBQUEsWUFDbkRDLEdBQWEsSUFBQUYscUJBQWlDLFVBQVcsRUFBQVosVUFBQSxxQkFDekRlLEdBQVcsSUFBQUgscUJBQStCLFFBQVMsRUFBQUksUUFBQSxtQkFDbkRDLEdBQXlCLElBQUFMLHFCQUE2QyxzQkFBdUIsRUFBQUMsUUFBQSxlQUM3RkssR0FBYyxJQUFBTixxQkFBa0MsV0FBWSxFQUFBTyxZQUFBLGVBQzVEQyxHQUFVLElBQUFSLHFCQUE4QixPQUFRLEVBQUFTLFFBQUEsMEtDekM3RCxNQVFhRixFQUFjLENBQ3pCRyxjQVRvQixLQUFzQyxpREFDMUQsYUFBYSxhQUF5QixNQUFPLFlBQy9DLElBUUVDLGVBTjRCQyxJQUFnQyxpREFDNUQsYUFBYSxhQUFhLE1BQU8sWUFBYUEsRUFDaEQsOExDWUEsTUFBTUMsRUFBUSxJQUFJQyxJQUNaQyxFQUFlLGFBUWQsU0FBU2YsRUFBdUNnQixFQUFjQyxHQUNqRSxNQUFPLENBQUNDLEdBQWUsRUFBT0MsR0FBZ0IsS0FFMUMsTUFBTUMsRUFBTVAsRUFBTVEsSUFBSUwsR0FDdEIsSUFBS00sRUFBT0MsR0FBWSxDQUFDLEtBQU0sTUFDM0JMLEtBR0NJLEVBQU9DLEdBQVksV0FBb0JILElBQVFMLEVBQVVLLEVBQU0sT0FHcEUsTUFBT0ksRUFBUUMsR0FBYSxZQUFlLEdBRTNDLFNBQVNDLEVBQVVDLEdBQWlCLEdBQ2hDLEdBQXVCLE1BQW5CZCxFQUFNUSxJQUFJTCxJQUFpQlcsRUFJM0IsTUFIQWQsRUFBTWUsSUFBSVosRUFBTUQsR0FqQ2hDLFNBQTRCYyxFQUE2QkMseURBQ3JELElBQ0lBLFFBQXFCRCxLQUN2QixNQUFPRSxHQUVMRCxHQUFlLEtBQVEsTUFBTUMsQ0FBQyxJQUV0QyxJQTZCc0JDLENBQVVmLEdBQVNnQixJQUNKLG1CQUFOQSxFQUNQcEIsRUFBTWUsSUFBSVosRUFBT2lCLEVBQVVwQixFQUFNUSxJQUFJTCxLQUVyQ0gsRUFBTWUsSUFBSVosRUFBTWlCLE1BRXJCQyxPQUFPSCxJQU1GTixJQUxDTixHQUdTLE1BQVEsTUFBTVksQ0FBQyxNQU16QyxDQWdCQSxPQWRBTCxLQUVBLElBQUFTLFlBQVUsSUFFQyxLQUFRdEIsRUFBTXVCLE9BQU9wQixFQUFLLEdBQ2xDLElBU0ksQ0FDSCxDQUFDQSxHQUFPRSxFQUFlSSxFQUFRRixFQUMvQixDQUFDLE1BQU1KLEVBQUtxQixPQUFPLEdBQUdDLGNBQWdCdEIsRUFBS3VCLE1BQU0sTUFBT3JCLEVBQWVLLEVBUjNFLFdBRVEsTUFBTSxJQUFJaUIsTUFBTSx3Q0FBd0N4QixJQUVoRSxFQUtJLENBQUMsT0FBT0EsRUFBS3FCLE9BQU8sR0FBR0MsY0FBZ0J0QixFQUFLdUIsTUFBTSxNQUFPYixFQUN6RCxDQUFDLE9BQU9WLEVBQUtxQixPQUFPLEdBQUdDLGNBQWdCdEIsRUFBS3VCLE1BQU0sWUFBYWYsRUFDN0QsQ0FFZCxxTUNuRkEsTUFhYXBCLEVBQVUsQ0FDckJxQyxrQkFkd0IsS0FBK0IsaURBQ3ZELE1BQU1DLFFBQWMsYUFBZSxNQUFPLFVBRXBDbkQsR0FBUyxJQUFBQyxRQUFPa0QsRUFBTyxRQUFRakQsUUFBTyxDQUFDQyxFQUFLQyxFQUFLQyxLQUNyREYsRUFBSUUsR0FBT0QsRUFDWEQsRUFBSUMsRUFBSUUsSUFBTUYsRUFDUEQsSUFDTixDQUFDLEdBR0osT0FEQUgsRUFBT08sT0FBUzRDLEVBQU01QyxPQUNmUCxDQUNULG9TQ2ZBLE1BWUEsRUFadUIsZ0JBQUVvRCxHQUFPLEVBQUtDLEdBQVUsY0FBeEIsYUFDbkIsT0FDSSxnQkFBQyxVQUFjLEtBQ1gsZ0JBQUMsVUFBUyxlQUNOQyxXQUFXLEVBQ1hDLE9BQU8sVUFDSEYsSUFHZiw0TUNWTCxNQWdCQSxHQUFlLGNBaEIrQkcsSUFBVSxDQUNwREMsZUFBZ0IsQ0FDWkMsTUFBTyxPQUNQQyxZQUFhSCxFQUFNSSxRQUFRLEdBQzNCQyxhQUFjTCxFQUFNSSxRQUFRLE9BWXBDLEVBSndERSxHQUM1Qyx1QkFBS0MsVUFBV0QsRUFBTVYsUUFBUUssZ0JBQWlCSyxFQUFNRSx1a0JDUmpFLE1BQU1DLEVBQU8sRUFBUSwrQkFFZkMsRUFBbUIsR0FDbkJDLEVBQXdDQyxJQUFXLENBQ3JEQyxLQUFNLENBQ0ZDLFNBQVUsTUFDVkMsTUFBTyxPQUNQQyxVQUFXLFNBRVhDLFFBQVMsT0FDVEMsY0FBZSxTQUNmQyxXQUFZLFNBRVpqQixNQUFPUSxJQUtYVSxPQUFRLENBQ0psQixNQUFPUSxFQUNQVyxPQUFRWCxFQUNSWSxXQUFZWixFQUVaYSxTQUFVLFdBQ1ZDLFNBQVUsVUFHZEMsSUFBSyxDQUNEdkIsTUFBT1EsRUFDUFcsT0FBUVgsRUFFUmdCLE9BQVEsRUFDUkgsU0FBVSxXQUNWSSxLQUFNLEVBQ05DLE9BQVEsR0FHWkMsS0FBTSxDQUNGWixRQUFTLFFBRVRmLE1BQU9RLEVBQ1BXLE9BQVFYLEdBRVJnQixPQUFRLEVBRVJILFNBQVUsV0FDVkksS0FBTSxFQUNOQyxPQUFRLEtBd0NoQixTQUFTRSxFQUFZQyxFQUFlQyxHQUNoQyxPQUFRQyxLQUFLQyxNQUFNSCxFQUFRRSxLQUFLRSxJQUFJLEdBQUlILElBQVdDLEtBQUtFLElBQUksR0FBSUgsSUFBU0ksUUFBUUosRUFDckYsQ0FpQ08sU0FBU0ssRUFBVUMsRUFBYUMsRUFBYUMsR0FDaEQsT0FBUUEsRUFBSUYsSUFBUUMsRUFBTUQsRUFDOUIsQ0FFTyxNQUFNRyxHQUEwQixhQUFXOUIsRUFBWCxFQW5Db0NMLElBQ3ZFLE1BQU0sTUFBRXlCLEVBQUssUUFBRW5DLEVBQU8sS0FBRWlDLEdBQVN2QixFQUNqQyxJQUFJLE9BQUUwQixHQUFXMUIsRUFFakIsTUFBTW9DLEdBQWtCLE1BQVRiLEVBQWUsVUFBTyxXQUFZLEtBR2pELE9BRmMsTUFBVkcsSUFBa0JBLEVBQVMsR0FHM0IsdUJBQUt6QixVQUFXWCxFQUFRaUIsTUFDcEIsdUJBQUtOLFVBQVdYLEVBQVF3QixRQUNwQiwwQkFBUWIsVUFBV1gsRUFBUTZCLElBQUtrQixLQUFNbEMsRUFBTW1DLEtBQUssa0JBQ2pELHdCQUFNQyxNQUFPLENBQUV4QixPQUFRLFFBQVFRLFlBQWdCaUIsV0FBWUosR0FBU25DLFVBQVdYLEVBQVFpQyxRQUczRixnQkFBQyxVQUFVLENBQUNrQixRQUFRLFFBQVFMLE1BQU0sZ0JBQWdCTSxVQUFVLE9BQU9sQixFQUFZQyxFQUFPQyxRQUU3RixJQW9CUWlCLEdBQW9CLGFBQVd0QyxFQUFYLEVBYjhCTCxJQUMzRCxNQUFNLE1BQUV5QixHQUFVekIsRUFFbEIsT0FDSSxnQkFBQyxVQUFNLENBQUN1QyxNQUFPLENBQUVLLFFBQVMsT0FBUUosWUFBWSxJQUFBSyxvQkFBbUJwQixHQUFRakIsU0FBVSxRQUFVZ0IsRUFBWUMsRUFBTyxPQUNuSCx5WEMxSEUsU0FBU3FCLEVBQWdCL0UsRUFBYWlFLEVBQWFDLEVBQWFjLEVBQVdDLEdBSzlFLE9BQU9yQixLQUFLc0IsT0FDTEQsRUFBSUQsSUFBTWhGLEVBQU1pRSxJQUNsQkMsRUFBTUQsR0FDTGUsRUFFVixDQUVPLE1BQU1GLEVBQXNCSyxJQUUvQixNQUFNQyxFQUFReEIsS0FBS0MsTUFHUCxJQUhha0IsRUFDckJuQixLQUFLSyxJQUFJTCxLQUFLTSxJQUFJLEdBQUlpQixHQUFJLElBQzFCLEdBQUksR0FDSixFQUFHLEdBQVcsS0FFbEIsT0FBSUEsR0FBSyxHQUNFLFVBQUtDLEdBR1pELEdBQUssS0FDRSxVQUFNQyxHQUdiRCxHQUFLLEtBQ0UsVUFBTUMsR0FHVixVQUFXQSxFQUFNLDR3Q0NENUIsTUFrSEEsR0FBZSxjQWpJK0J6RCxJQUFVLENBQ3BEMEQsS0FBTSxDQUNGQyxVQUFXLEVBQ1hDLGFBQWM1RCxFQUFNSSxRQUFRLE9BOEhwQyxFQWxIMERFLElBQ3RELE1BQU0sUUFBRVYsR0FBWVUsR0FDZCxvQkFBRXVELElBQXdCLElBQUF2RywwQkFxQmhDLFNBQVN3RyxFQUFlQyxHQUNwQixHQUFJQSxFQUFTQyxpQkFBbUIsRUFBQUMsb0JBQUEsVUFDNUIsT0FBTyxhQUFVLGtCQUFrQkYsRUFBU0Msa0JBR2hELEdBQUlELEVBQVNHLGlCQUFpQm5ILE9BQVMsRUFBRyxDQUN0QyxNQUFNb0gsRUFBYUosRUFBU0csaUJBQ3ZCRSxRQUFRQyxHQUFNTixFQUFTTyxLQUFLeEgsS0FBT3VILEVBQUV2SCxLQUNyQ0gsS0FBSzBILEdBQU1BLEVBQUVwRyxPQUFNc0csS0FBSyxNQUU3QixNQUFPLEdBQUdSLEVBQVNPLEtBQUtyRyxTQUFTa0csS0FHckMsT0FBT0osRUFBU08sS0FBS3JHLElBQ3pCLENBRUEsT0FDSSxnQkFBQyxVQUFJLEtBQ0EsQ0FDR3VHLE9BQ0ksZ0JBQUMsVUFBUyxLQUNULENBQ0dDLE9BQU8sYUFBVSxzQkFDakJDLE9BQ0ksZ0JBQUMsRUFBQUMsY0FBYSxRQUsxQkMsV0FBWSxHQUNaQyxLQUNJLGdCQUFDLFdBQWMsS0FDWCxnQkFBQyxVQUFTLENBQUNDLE1BQU0sYUFBVSwyQkFFM0IsZ0JBQUMsVUFBYyxLQUNYLGdCQUFDLFVBQVcsQ0FBQ3ZFLFVBQVdYLEVBQVFtRixZQUFhakYsV0FBVyxHQUNwRCxnQkFBQyxVQUFVLE1BQUUsYUFBVSxzQkFFdkIsZ0JBQUMsVUFBTSxDQUNIQSxXQUFXLEVBQ1hrRixVQUFVLEVBQ1ZqRCxNQUFPOEIsRUFBb0JvQixNQUczQixDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUFHdEksS0FBS3VJLEdBQ25CLGdCQUFDLFVBQVEsQ0FBQ0MsSUFBS0QsRUFBR25ELE1BQU9tRCxJQUFJLGFBQVUsU0FBU0EsV0FPaEVyQixFQUFvQnVCLFVBQ2pCLGdCQUFDLFVBQWEsQ0FDVkMsT0FBTyxhQUFVLHFCQUNqQnpDLEtBQUssaUJBQ0xiLE1BM0VKLENBQUN1RCxJQUNyQixHQUFTLE1BQUxBLEVBQWEsTUFBTyxHQUV4QixNQUFNQyxFQUFPLElBQUlDLEtBQUtGLEdBQ2hCRyxFQUFPQyxJQUNEQSxFQUFJLEdBQUssSUFBTSxJQUFNQSxFQVVqQyxPQVBhSCxFQUFLSSxjQU9KLElBTkhGLEVBQUlGLEVBQUtLLFdBQWEsR0FNUixJQUxkSCxFQUFJRixFQUFLTSxXQUtnQixJQUp6QkosRUFBSUYsRUFBS08sWUFLWCxJQUpFTCxFQUFJRixFQUFLUSxjQUlBLElBSFROLEVBQUlGLEVBQUtTLGFBR1EsRUEyREdDLENBQWdCcEMsRUFBb0J1QixVQUMzQ0osVUFBVSxJQUlsQixnQkFBQyxVQUFTLENBQUNGLE1BQU0sYUFBVSw2QkFDM0IsZ0JBQUMsVUFBUSxDQUFDQSxNQUFNLGFBQVUsNEJBRW1CLElBQTVDakIsRUFBb0JxQyxhQUFhbkosT0FDNUIsZ0JBQUMsVUFBUSxDQUFDOEYsTUFBTyxDQUFDK0IsV0FBWSxJQUFLRSxNQUFNLGFBQVUsNkJBQ25ELGdCQUFDLFVBQUksQ0FBQ3ZFLFVBQVdYLEVBQVE4RCxNQUN0QkcsRUFBb0JxQyxhQUFhbkosT0FBUyxHQUFLLGdCQUFDLFVBQU8sTUFDdkQ4RyxFQUFvQnFDLGFBQWF2SixLQUFLb0gsSUFBYSxPQUNoRCxnQkFBQyxXQUFjLENBQUNvQixJQUFLcEIsRUFBU29DLE9BQU9ySixHQUFLaUgsRUFBU08sS0FBS3hILElBQ3BELGdCQUFDLFVBQVEsS0FDTCxnQkFBQyxVQUFjLEtBQ1gsZ0JBQUMsRUFBQW1HLGtCQUFpQixDQUFDbEIsTUFBT2dDLEVBQVNxQyxxQkFFdkMsZ0JBQUMsVUFBWSxDQUFDQyxRQUFTdEMsRUFBU29DLE9BQU9sSSxLQUFNcUksVUFBV3hDLEVBQWVDLEtBQ3ZFLGdCQUFDLFVBQXVCLENBQUNsQixNQUFPLENBQUV4QyxhQUFjLEtBQzVDLGdCQUFDLEVBQUFvQyx3QkFBdUIsQ0FBQ1YsTUFBT2dDLEVBQVN3QyxhQUFleEMsRUFBU3FDLGtCQUFtQnZFLE1BekduSHdCLEVBeUdpSVUsRUFBU3dDLGFBQWV4QyxFQUFTcUMsa0JBekd2SjlDLEVBeUcyS1MsRUFBU3FDLGtCQXhHeE0vQyxFQUFJQyxFQUFZLElBRWJyQixLQUFLQyxNQUFNbUIsRUFBSUMsRUFBSSxVQXlHVSxnQkFBQyxVQUFPLE9BNUdoRCxJQUFpQkQsRUFBV0MsQ0E4R0ssT0FPNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vYXNzZXRzL2ljb25fYmxhY2suc3ZnIiwid2VicGFjazovLy8uL2FwaS9kZXZpY2VzL2luZGV4LnRzeCIsIndlYnBhY2s6Ly8vLi9hcGkvaG9va3MudHN4Iiwid2VicGFjazovLy8uL2FwaS9zZXR0aW5ncy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vLy4vYXBpL3N1c3BlbmRhYmxlU3RhdGUudHN4Iiwid2VicGFjazovLy8uL2FwaS96b25lcy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9Gb3JtVGV4dEZpZWxkLnRzeCIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL0lucHV0Q29udGFpbmVyLnRzeCIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL1RlbXBlcmF0dXJlQXZhdGFyLnRzeCIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL3RlbXBlcmF0dXJlVG9Db2xvci50c3giLCJ3ZWJwYWNrOi8vLy4vcGFnZXMvdGVtcGVyYXR1cmVzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpY29uX2JsYWNrLnN2Zz81MTM2ODc5YTAzYTEzZjlmYjE4ZjI0MWIwODFmMzhjYlwiOyIsIlxuaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHsgSUhlYXRpbmdEZXZpY2UgfSBmcm9tIFwiLi4vLi4vLi4vYXBwL21vZGVsXCI7XG5pbXBvcnQgY2FsbEFQSSBmcm9tIFwiLi4vY2FsbEFQSVwiO1xuXG5leHBvcnQgdHlwZSBIYXNoVHlwZSA9IHtcbiAgW2tleTogc3RyaW5nXTogSUhlYXRpbmdEZXZpY2U7XG59ICYgQXJyYXlMaWtlPElIZWF0aW5nRGV2aWNlPjtcblxuLy8gSG9tZXkuYXBpKCBTdHJpbmcgbWV0aG9kLCBTdHJpbmcgcGF0aCwgTWl4ZWQgYm9keSwgRnVuY3Rpb24gY2FsbGJhY2sgKVxuY29uc3QgZmV0Y2hIZWF0aW5nRGV2aWNlcyA9IGFzeW5jICgpOiBQcm9taXNlPEhhc2hUeXBlPiA9PiB7XG4gIGNvbnN0IGRldmljZXMgPSBhd2FpdCBjYWxsQVBJPGFueVtdPihcIkdFVFwiLCBcIi9kZXZpY2VzXCIpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IHNvcnRCeShkZXZpY2VzLCBcIm5hbWVcIikucmVkdWNlKChtYXAsIG9iaiwgaWR4KSA9PiB7XG4gICAgbWFwW2lkeF0gPSBvYmo7XG4gICAgbWFwW29iai5pZF0gPSBvYmo7XG4gICAgcmV0dXJuIG1hcDtcbiAgfSwge30pO1xuICByZXN1bHQubGVuZ3RoID0gZGV2aWNlcy5sZW5ndGg7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBkZXZpY2VBUEkgPSB7XG4gIGZldGNoSGVhdGluZ0RldmljZXMsXG59O1xuIiwiaW1wb3J0IHsgSUhlYXRpbmdEZXZpY2UsIElIZWF0aW5nUGxhbiwgSUhlYXRpbmdab25lLCBJU2NoZWR1bGVJbmZvcm1hdGlvbiwgT3BlcmF0aW9uTW9kZSB9IGZyb20gXCIuLi8uLi9hcHAvbW9kZWxcIjtcbmltcG9ydCB7IGRldmljZUFQSSB9IGZyb20gXCIuL2RldmljZXNcIjtcbmltcG9ydCB7IG1vZGVBUEksIHBsYW5BUEkgfSBmcm9tIFwiLi9oZWF0aW5nXCI7XG5pbXBvcnQgeyBzZXR0aW5nc0FQSSwgU2V0dGluZ3NIYXNoTWFwIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IEhvb2tSZXR1cm5UeXBlLCBIb29rU2V0VHlwZSwgdXNlU3VzcGVuZGFibGVTdGF0ZSB9IGZyb20gXCIuL3N1c3BlbmRhYmxlU3RhdGVcIjtcbmltcG9ydCB7IHpvbmVBUEkgfSBmcm9tIFwiLi96b25lc1wiO1xuXG50eXBlIFBsYW5zVHlwZSA9IHtcbiAgICBwbGFuczogSUhlYXRpbmdQbGFuW10sXG4gICAgc2V0UGxhbnM6IEhvb2tTZXRUeXBlPElIZWF0aW5nUGxhbltdPixcbiAgICBsb2FkUGxhbnMoZm9yY2U/OiBib29sZWFuKTogSG9va1JldHVyblR5cGUsXG59O1xuXG50eXBlIERldmljZXNUeXBlID0ge1xuICAgIGRldmljZXM6IElIZWF0aW5nRGV2aWNlW10sXG4gICAgc2V0RGV2aWNlczogSG9va1NldFR5cGU8SUhlYXRpbmdEZXZpY2VbXT4sXG4gICAgbG9hZERldmljZXM6IEhvb2tSZXR1cm5UeXBlLFxufTtcblxudHlwZSBab25lc1R5cGUgPSB7XG4gICAgem9uZXM6IElIZWF0aW5nWm9uZVtdLFxuICAgIHNldFpvbmVzOiBIb29rU2V0VHlwZTxJSGVhdGluZ1pvbmVbXT4sXG4gICAgbG9hZFpvbmVzOiBIb29rUmV0dXJuVHlwZSxcbn07XG5cbnR5cGUgU2NoZWR1bGVJbmZvcm1hdGlvblR5cGUgPSB7XG4gICAgc2NoZWR1bGVJbmZvcm1hdGlvbjogSVNjaGVkdWxlSW5mb3JtYXRpb24sXG4gICAgc2V0U2NoZWR1bGVJbmZvcm1hdGlvbjogSG9va1NldFR5cGU8SVNjaGVkdWxlSW5mb3JtYXRpb24+LFxuICAgIGxvYWRTY2hlZHVsZUluZm9ybWF0aW9uOiBIb29rUmV0dXJuVHlwZSxcbn07XG5cbnR5cGUgU2V0dGluZ3NUeXBlID0ge1xuICAgIHNldHRpbmdzOiBTZXR0aW5nc0hhc2hNYXAsXG4gICAgc2V0U2V0dGluZ3M6IEhvb2tTZXRUeXBlPFNldHRpbmdzSGFzaE1hcD4sXG4gICAgbG9hZFNldHRpbmdzOiBIb29rUmV0dXJuVHlwZSxcbn07XG5cbnR5cGUgTW9kZVR5cGUgPSB7XG4gICAgbW9kZTogT3BlcmF0aW9uTW9kZSxcbiAgICBzZXRNb2RlOiBIb29rU2V0VHlwZTxPcGVyYXRpb25Nb2RlPixcbiAgICBsb2FkTW9kZTogSG9va1JldHVyblR5cGUsXG59O1xuXG5leHBvcnQgY29uc3QgdXNlUGxhbnMgPSB1c2VTdXNwZW5kYWJsZVN0YXRlPFBsYW5zVHlwZT4oXCJwbGFuc1wiLCBwbGFuQVBJLmZldGNoUGxhbnMpO1xuZXhwb3J0IGNvbnN0IHVzZURldmljZXMgPSB1c2VTdXNwZW5kYWJsZVN0YXRlPERldmljZXNUeXBlPihcImRldmljZXNcIiwgZGV2aWNlQVBJLmZldGNoSGVhdGluZ0RldmljZXMpO1xuZXhwb3J0IGNvbnN0IHVzZVpvbmVzID0gdXNlU3VzcGVuZGFibGVTdGF0ZTxab25lc1R5cGU+KFwiem9uZXNcIiwgem9uZUFQSS5mZXRjaEhlYXRpbmdab25lcyk7XG5leHBvcnQgY29uc3QgdXNlU2NoZWR1bGVJbmZvcm1hdGlvbiA9IHVzZVN1c3BlbmRhYmxlU3RhdGU8U2NoZWR1bGVJbmZvcm1hdGlvblR5cGU+KFwic2NoZWR1bGVJbmZvcm1hdGlvblwiLCBwbGFuQVBJLmZldGNoU2NoZWR1bGUpO1xuZXhwb3J0IGNvbnN0IHVzZVNldHRpbmdzID0gdXNlU3VzcGVuZGFibGVTdGF0ZTxTZXR0aW5nc1R5cGU+KFwic2V0dGluZ3NcIiwgc2V0dGluZ3NBUEkuZmV0Y2hTZXR0aW5ncyk7XG5leHBvcnQgY29uc3QgdXNlTW9kZSA9IHVzZVN1c3BlbmRhYmxlU3RhdGU8TW9kZVR5cGU+KFwibW9kZVwiLCBtb2RlQVBJLmZldGNoTW9kZSk7XG4iLCJpbXBvcnQgeyBTZXR0aW5ncyB9IGZyb20gXCIuLi8uLi8uLi9hcHAvc2VydmljZXMvc2V0dGluZ3MtbWFuYWdlci90eXBlc1wiO1xuaW1wb3J0IGNhbGxBUEkgZnJvbSBcIi4uL2NhbGxBUElcIjtcblxuZXhwb3J0IHR5cGUgU2V0dGluZ3NIYXNoTWFwID0ge1xuICBba2V5IGluIGtleW9mIHR5cGVvZiBTZXR0aW5nc10/OiBzdHJpbmcgfCBib29sZWFuO1xufTtcblxuY29uc3QgZmV0Y2hTZXR0aW5ncyA9IGFzeW5jICgpOiBQcm9taXNlPFNldHRpbmdzSGFzaE1hcD4gPT4ge1xuICByZXR1cm4gYXdhaXQgY2FsbEFQSTxTZXR0aW5nc0hhc2hNYXA+KFwiR0VUXCIsIFwiL3NldHRpbmdzXCIpO1xufTtcblxuY29uc3QgdXBkYXRlU2V0dGluZ3MgPSBhc3luYyAoc2V0dGluZ3M6IHt9KTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIHJldHVybiBhd2FpdCBjYWxsQVBJPGFueT4oXCJQVVRcIiwgYC9zZXR0aW5nc2AsIHNldHRpbmdzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXR0aW5nc0FQSSA9IHtcbiAgZmV0Y2hTZXR0aW5ncyxcbiAgdXBkYXRlU2V0dGluZ3MsXG59O1xuIiwiaW1wb3J0IFJlYWN0LCB7IERpc3BhdGNoLCBTZXRTdGF0ZUFjdGlvbiwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCB0eXBlIE1hcFR5cGUgPSB7W2tleTogc3RyaW5nXTogYW55fTtcblxuZXhwb3J0IHR5cGUgSG9va1NldFR5cGU8VD4gPSBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxUPj47XG5leHBvcnQgdHlwZSBIb29rUmV0dXJuVHlwZSA9ICgpID0+IHZvaWQ7XG5leHBvcnQgdHlwZSBQcm92aWRlU3RhdGU8VCBleHRlbmRzIE1hcFR5cGU+ID0gKHByb3ZpZGVTdGF0ZT86IGJvb2xlYW4sIHByb3ZpZGVGYWlsZWQ/OiBib29sZWFuKSA9PiBUO1xuXG50eXBlIEFzeW5jPFQ+ID0gKCkgPT4gUHJvbWlzZTxUPjtcblxuLyoqKlxuICogQ2FsbCB0aGUgYXBpTWV0aG9kIGFzeW5jaHJvbm91c2x5LlxuICpcbiAqIElmIHRoZSBtZXRob2QgZmFpbHMsIHRocm93IHRoZSBleGNlcHRpb24gaW5zaWRlIHNldCBTZXRTdGF0ZUFjdGlvbiBvZiB0aGUgaG9vay5cbiAqIFRoaXMgYWxsb3dzIHRvIGNhdGNoIHRoZSBlcnJvciBcImluIHRoZSBFcnJvckJvdW5kYXJ5LlwiXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHRyeU1ldGhvZDxUPihhcGlNZXRob2Q6ICgpID0+IFByb21pc2U8VD4sIHNldFN0YXRlQWN0aW9uOiBEaXNwYXRjaDxTZXRTdGF0ZUFjdGlvbjxUPj4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgICBzZXRTdGF0ZUFjdGlvbihhd2FpdCBhcGlNZXRob2QoKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyByZXF1aXJlZCBmb3IgdGhlIGVycm9yIHRvIHBvcHVwIHRoZSBoaWVyYXJjaHlcbiAgICAgICAgc2V0U3RhdGVBY3Rpb24oKCkgPT4geyB0aHJvdyBlOyB9KTtcbiAgICB9XG59XG5cbmNvbnN0IGNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKTtcbmNvbnN0IExPQURJTkc6IGFueSA9IFwiTG9hZGluZy4uLlwiO1xuXG4vKipcbiAqIENyZWF0ZSBhIFwiaG9va1wiIHRoYXQgaXMgYWJsZSB0byBzdXNwZW5kLlxuICpcbiAqIEBwYXJhbSBuYW1lIE11c3QgYmUgdW5pcXVlXG4gKiBAcGFyYW0gbWV0aG9kIFRoZSBhc3luYyBtZXRob2QgdG8gd2FpdCBmb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVN1c3BlbmRhYmxlU3RhdGU8VCBleHRlbmRzIE1hcFR5cGU+KG5hbWU6IHN0cmluZywgbWV0aG9kOiBBc3luYzxhbnk+KTogUHJvdmlkZVN0YXRlPFQ+IHtcbiAgICByZXR1cm4gKHByb3ZpZGVTdGF0ZSA9IGZhbHNlLCBwcm92aWRlRmFpbGVkID0gZmFsc2UpID0+IHtcbiAgICAgICAgLy8gdGhpcyBpcyBpbXBvcmFudCBhcyBpdCBzZXRzIHRoZSBzdGF0ZSBhZnRlciB0aGUgcHJvbWlzZSByZXNvbHZlc1xuICAgICAgICBjb25zdCB2YWwgPSBjYWNoZS5nZXQobmFtZSk7XG4gICAgICAgIGxldCBbc3RhdGUsIHNldFN0YXRlXSA9IFtudWxsLCBudWxsXTtcbiAgICAgICAgaWYgKHByb3ZpZGVTdGF0ZSkge1xuICAgICAgICAgICAgLy8gd2UgdXNlIGluc3RhbmNlIGNvbXBhcmUgb24gTE9BRElORyB0byBkZXRlcm1pbmUgbm9uIGV4aXN0aW5nIHZhbHVlXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBbc3RhdGUsIHNldFN0YXRlXSA9IFJlYWN0LnVzZVN0YXRlPGFueT4odmFsICE9PSBMT0FESU5HID8gdmFsIDogbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBbZmFpbGVkLCBzZXRGYWlsZWRdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRWYWx1ZShmb3JjZTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAoY2FjaGUuZ2V0KG5hbWUpID09IG51bGwgfHwgZm9yY2UpIHtcbiAgICAgICAgICAgICAgICBjYWNoZS5zZXQobmFtZSwgTE9BRElORyk7XG5cbiAgICAgICAgICAgICAgICAvLyB0aGlzIHVubG9hZHMgdGhlIGNvbXBvbmVudCBhbmQgd2FpdHMgZm9yIHRoZSBwcm9taXNlIHRvIHJlc29sdmVcbiAgICAgICAgICAgICAgICB0aHJvdyB0cnlNZXRob2QobWV0aG9kLCAocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUuc2V0KG5hbWUsIChyIGFzIGFueSkoY2FjaGUuZ2V0KG5hbWUpKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5zZXQobmFtZSwgcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByb3ZpZGVGYWlsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBtZSAtIHRoaXMgZG9lc24ndCB3b3JrXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRGYWlsZWQoKCkgPT4geyB0aHJvdyBlOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZhaWxlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbG9hZFZhbHVlKCk7XG5cbiAgICAgICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwia2lsbGVkIHZhbHVlXCIpO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHsgY2FjaGUuZGVsZXRlKG5hbWUpOyB9O1xuICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgLy8gd2UgdGVsbCB0aGUgREVWIHRoYXQgdGhpcyBpcyBub3QgdGhlIHdheSB0byBnb1xuICAgICAgICBmdW5jdGlvbiBmYWlsT25Ob1N0YXRlKCkge1xuICAgICAgICAgICAgaWYgKCFfX1BST0RVQ1RJT05fXykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91IG11c3QgdXNlIGhvb2tzIHRvIHNhdmUgdGhlIHZhbHVlICR7bmFtZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBbbmFtZV06IHByb3ZpZGVTdGF0ZSA/IHN0YXRlIDogdmFsLFxuICAgICAgICAgICAgW2BzZXQke25hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpfWBdOiBwcm92aWRlU3RhdGUgPyBzZXRTdGF0ZSA6IGZhaWxPbk5vU3RhdGUsXG4gICAgICAgICAgICBbYGxvYWQke25hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpfWBdOiBsb2FkVmFsdWUsXG4gICAgICAgICAgICBbYGxvYWQke25hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpfUZhaWxlZGBdOiBmYWlsZWQsXG4gICAgICAgIH0gYXMgVDtcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHsgSUhlYXRpbmdab25lIH0gZnJvbSBcIi4uLy4uLy4uL2FwcC9tb2RlbFwiO1xuaW1wb3J0IGNhbGxBUEkgZnJvbSBcIi4uL2NhbGxBUElcIjtcblxuZXhwb3J0IHR5cGUgSGFzaFR5cGUgPSB7XG4gIFtrZXk6IHN0cmluZ106IElIZWF0aW5nWm9uZTtcbn0gJiBBcnJheUxpa2U8SUhlYXRpbmdab25lPjtcblxuY29uc3QgZmV0Y2hIZWF0aW5nWm9uZXMgPSBhc3luYyAoKTogUHJvbWlzZTxIYXNoVHlwZT4gPT4ge1xuICBjb25zdCB6b25lcyA9IGF3YWl0IGNhbGxBUEk8YW55W10+KFwiR0VUXCIsIFwiL3pvbmVzXCIpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IHNvcnRCeSh6b25lcywgXCJuYW1lXCIpLnJlZHVjZSgobWFwLCBvYmosIGlkeCkgPT4ge1xuICAgIG1hcFtpZHhdID0gb2JqO1xuICAgIG1hcFtvYmouaWRdID0gb2JqO1xuICAgIHJldHVybiBtYXA7XG4gIH0sIHt9KTtcblxuICByZXN1bHQubGVuZ3RoID0gem9uZXMubGVuZ3RoO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IHpvbmVBUEkgPSB7XG4gIGZldGNoSGVhdGluZ1pvbmVzLFxufTtcbiIsImltcG9ydCBUZXh0RmllbGQsIHsgVGV4dEZpZWxkUHJvcHMgfSBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvVGV4dEZpZWxkXCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgSW5wdXRDb250YWluZXIgZnJvbSBcIi4vSW5wdXRDb250YWluZXJcIjtcblxuY29uc3QgRm9ybVRleHRGaWVsZCA9ICh7IGNsYXNzZXMsIC4uLm90aGVyUHJvcHMgfTogVGV4dEZpZWxkUHJvcHMpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8SW5wdXRDb250YWluZXI+XG4gICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgZnVsbFdpZHRoPXt0cnVlfVxuICAgICAgICAgICAgICAgIG1hcmdpbj1cIm5vcm1hbFwiXG4gICAgICAgICAgICAgICAgey4uLm90aGVyUHJvcHN9XG4gICAgICAgICAgICAvPlxuICAgICAgICA8L0lucHV0Q29udGFpbmVyPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBGb3JtVGV4dEZpZWxkO1xuIiwiaW1wb3J0IHsgU3R5bGVSdWxlc0NhbGxiYWNrLCB3aXRoU3R5bGVzLCBXaXRoU3R5bGVzIH0gZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlL3N0eWxlc1wiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5jb25zdCBzdHlsZXM6IFN0eWxlUnVsZXNDYWxsYmFjazxhbnksIGFueT4gPSAodGhlbWUpID0+ICh7XG4gICAgaW5wdXRDb250YWluZXI6IHtcbiAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgICAgICBwYWRkaW5nTGVmdDogdGhlbWUuc3BhY2luZygyKSxcbiAgICAgICAgcGFkZGluZ1JpZ2h0OiB0aGVtZS5zcGFjaW5nKDMpLFxuICAgIH0sXG59KTtcblxudHlwZSBQcm9wcyA9IHtcbiAgICBjaGlsZHJlbjogUmVhY3QuUmVhY3RFbGVtZW50PGFueT4sXG59ICYgV2l0aFN0eWxlczx0eXBlb2Ygc3R5bGVzPjtcblxuY29uc3QgSW5wdXRDb250YWluZXI6IFJlYWN0LkZ1bmN0aW9uQ29tcG9uZW50PFByb3BzPiA9IChwcm9wcykgPT4ge1xuICAgIHJldHVybiAoPGRpdiBjbGFzc05hbWU9e3Byb3BzLmNsYXNzZXMuaW5wdXRDb250YWluZXJ9Pntwcm9wcy5jaGlsZHJlbn08L2Rpdj4pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFN0eWxlcyhzdHlsZXMpKElucHV0Q29udGFpbmVyKTtcbiIsImltcG9ydCB7IFN0eWxlUnVsZXNDYWxsYmFjaywgVHlwb2dyYXBoeSwgV2l0aFN0eWxlcywgd2l0aFN0eWxlcyB9IGZyb20gXCJAbWF0ZXJpYWwtdWkvY29yZVwiO1xuaW1wb3J0IEF2YXRhciBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvQXZhdGFyXCI7XG5pbXBvcnQgZGVlcE9yYW5nZSBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvY29sb3JzL2RlZXBPcmFuZ2VcIjtcbmltcG9ydCBibHVlIGZyb20gXCJAbWF0ZXJpYWwtdWkvY29yZS9jb2xvcnMvbGlnaHRCbHVlXCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB0ZW1wZXJhdHVyZVRvQ29sb3IgfSBmcm9tIFwiLi90ZW1wZXJhdHVyZVRvQ29sb3JcIjtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby12YXItcmVxdWlyZXNcbmNvbnN0IEljb24gPSByZXF1aXJlKFwiLi4vLi4vLi4vYXNzZXRzL2ljb25fYmxhY2suc3ZnXCIpO1xuXG5jb25zdCBBVkFUQVJfRElNRU5TSU9OID0gMzU7XG5jb25zdCBzdHlsZXM6IFN0eWxlUnVsZXNDYWxsYmFjazxhbnksIGFueT4gPSAoX3RoZW1lKSA9PiAoe1xuICAgIHJvb3Q6IHtcbiAgICAgICAgZm9udFNpemU6IFwiMWVtXCIsXG4gICAgICAgIGZsb2F0OiBcImxlZnRcIixcbiAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiLFxuXG4gICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuXG4gICAgICAgIHdpZHRoOiBBVkFUQVJfRElNRU5TSU9OICsgMTAsXG4gICAgICAgIC8vIGhlaWdodDogQVZBVEFSX0RJTUVOU0lPTixcbiAgICAgICAgLy8gb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgfSxcblxuICAgIGF2YXRhcjoge1xuICAgICAgICB3aWR0aDogQVZBVEFSX0RJTUVOU0lPTixcbiAgICAgICAgaGVpZ2h0OiBBVkFUQVJfRElNRU5TSU9OLFxuICAgICAgICBsaW5lSGVpZ2h0OiBBVkFUQVJfRElNRU5TSU9OLFxuXG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgIH0sXG5cbiAgICBpbWc6IHtcbiAgICAgICAgd2lkdGg6IEFWQVRBUl9ESU1FTlNJT04sXG4gICAgICAgIGhlaWdodDogQVZBVEFSX0RJTUVOU0lPTixcblxuICAgICAgICB6SW5kZXg6IDIsXG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIGJvdHRvbTogMCxcbiAgICB9LFxuXG4gICAgZmlsbDoge1xuICAgICAgICBkaXNwbGF5OiBcImJsb2NrXCIsXG5cbiAgICAgICAgd2lkdGg6IEFWQVRBUl9ESU1FTlNJT04sXG4gICAgICAgIGhlaWdodDogQVZBVEFSX0RJTUVOU0lPTiAtIDIsXG5cbiAgICAgICAgekluZGV4OiAxLFxuXG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIGJvdHRvbTogMSxcbiAgICB9LFxuXG4gICAgLy8gcm9vdDoge1xuICAgIC8vICAgICBmb250U2l6ZTogXCIxZW1cIixcblxuICAgIC8vICAgICB3aWR0aDogaGVpZ2h0LFxuICAgIC8vICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAvLyAgICAgbGluZUhlaWdodDogaGVpZ2h0LFxuXG4gICAgLy8gICAgIHpJbmRleDogMixcblxuICAgIC8vICAgICBmbG9hdDogXCJsZWZ0XCIsXG4gICAgLy8gICAgIHRleHRBbGlnbjogXCJjZW50ZXJcIixcbiAgICAvLyAgICAgYm9yZGVyOiBcIjFweCBzb2xpZFwiLFxuICAgIC8vICAgICBib3JkZXJSYWRpdXM6IFwiMTAwJVwiLFxuICAgIC8vICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuXG4gICAgLy8gICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgIC8vIH0sXG5cbiAgICAvLyBmaWxsOiB7XG4gICAgLy8gICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcblxuICAgIC8vICAgICB3aWR0aDogaGVpZ2h0LFxuICAgIC8vICAgICBoZWlnaHQ6IGhlaWdodCxcblxuICAgIC8vICAgICB6SW5kZXg6IDEsXG4gICAgLy8gICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgLy8gICAgIGxlZnQ6IDAsXG4gICAgLy8gICAgIGJvdHRvbTogMCxcbiAgICAvLyB9XG59KTtcblxudHlwZSBGaWxsZWRQcm9wcyA9IHtcbiAgICBkaWdpdHM/OiBudW1iZXI7XG4gICAgdmFsdWU6IG51bWJlcjtcbiAgICBmaWxsOiBudW1iZXI7XG59ICYgV2l0aFN0eWxlczx0eXBlb2Ygc3R5bGVzPjtcblxuZnVuY3Rpb24gRml4ZWREaWdpdHModmFsdWU6IG51bWJlciwgZGlnaXRzOiBudW1iZXIpIHtcbiAgICByZXR1cm4gKE1hdGgucm91bmQodmFsdWUgKiBNYXRoLnBvdygxMCwgZGlnaXRzKSkgLyBNYXRoLnBvdygxMCwgZGlnaXRzKSkudG9GaXhlZChkaWdpdHMpO1xufVxuXG5jb25zdCBCYXNlRmlsbGVkVGVtcGVyYXR1cmVBdmF0YXI6IFJlYWN0LkZ1bmN0aW9uQ29tcG9uZW50PEZpbGxlZFByb3BzPiA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgdmFsdWUsIGNsYXNzZXMsIGZpbGwgfSA9IHByb3BzO1xuICAgIGxldCB7IGRpZ2l0cyB9ID0gcHJvcHM7XG5cbiAgICBjb25zdCBjb2xvciA9IChmaWxsID09PSAxMDAgPyBibHVlIDogZGVlcE9yYW5nZSlbNTAwXTtcbiAgICBpZiAoZGlnaXRzID09IG51bGwpIHsgZGlnaXRzID0gMjsgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMucm9vdH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5hdmF0YXJ9ID5cbiAgICAgICAgICAgICAgICA8b2JqZWN0IGNsYXNzTmFtZT17Y2xhc3Nlcy5pbWd9IGRhdGE9e0ljb259IHR5cGU9XCJpbWFnZS9zdmcreG1sXCIgLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBoZWlnaHQ6IGBjYWxjKCR7ZmlsbH0lIC0gNXB4KWAsIGJhY2tncm91bmQ6IGNvbG9yIH19IGNsYXNzTmFtZT17Y2xhc3Nlcy5maWxsfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxUeXBvZ3JhcGh5IHZhcmlhbnQ9XCJib2R5MVwiIGNvbG9yPVwidGV4dFNlY29uZGFyeVwiIGNvbXBvbmVudD1cImRpdlwiPntGaXhlZERpZ2l0cyh2YWx1ZSwgZGlnaXRzKX3CsDwvVHlwb2dyYXBoeT5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbnR5cGUgUHJvcHMgPSB7XG4gICAgdmFsdWU6IG51bWJlcjtcbn07XG5cbmNvbnN0IEJhc2VUZW1wZXJhdHVyZUF2YXRhcjogUmVhY3QuRnVuY3Rpb25Db21wb25lbnQ8UHJvcHM+ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyB2YWx1ZSB9ID0gcHJvcHM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8QXZhdGFyIHN0eWxlPXt7IHBhZGRpbmc6IFwiMjVweFwiLCBiYWNrZ3JvdW5kOiB0ZW1wZXJhdHVyZVRvQ29sb3IodmFsdWUpLCBmb250U2l6ZTogXCIxZW1cIiB9fT57Rml4ZWREaWdpdHModmFsdWUsIDEpfcKwPC9BdmF0YXI+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUobWluOiBudW1iZXIsIG1heDogbnVtYmVyLCB4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gKHggLSBtaW4pIC8gKG1heCAtIG1pbik7XG59XG5cbmV4cG9ydCBjb25zdCBGaWxsZWRUZW1wZXJhdHVyZUF2YXRhciA9IHdpdGhTdHlsZXMoc3R5bGVzKShCYXNlRmlsbGVkVGVtcGVyYXR1cmVBdmF0YXIpO1xuZXhwb3J0IGNvbnN0IFRlbXBlcmF0dXJlQXZhdGFyID0gd2l0aFN0eWxlcyhzdHlsZXMpKEJhc2VUZW1wZXJhdHVyZUF2YXRhcik7XG4iLCJpbXBvcnQgYW1iZXIgZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlL2NvbG9ycy9hbWJlclwiO1xuaW1wb3J0IGJsdWUgZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlL2NvbG9ycy9ibHVlXCI7XG5pbXBvcnQgZGVlcE9yYW5nZSBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvY29sb3JzL2RlZXBPcmFuZ2VcIjtcbmltcG9ydCBncmVlbiBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvY29sb3JzL2dyZWVuXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBzbG90VGVtcGVyYXR1cmUodmFsOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgYTogbnVtYmVyLCBiOiBudW1iZXIpIHtcbiAgICAvLyAgICAgICAgKGItYSkoeCAtIG1pbilcbiAgICAvLyBmKHgpID0gLS0tLS0tLS0tLS0tLS0gKyAgYVxuICAgIC8vICAgICAgICBtYXggLSBtaW5cbiAgICAvL1xuICAgIHJldHVybiBNYXRoLmZsb29yKFxuICAgICAgICAoKChiIC0gYSkgKiAodmFsIC0gbWluKSkgL1xuICAgICAgICAobWF4IC0gbWluKSlcbiAgICAgICAgKyBhLFxuICAgICk7XG59XG5cbmV4cG9ydCBjb25zdCB0ZW1wZXJhdHVyZVRvQ29sb3IgPSAobjogbnVtYmVyKSA9PiB7XG4gICAgLy8gcHJvamVjdCAxNiAuLi4gMjQgdG8gMjAwIC4uLiA5MDBcbiAgICBjb25zdCBzaGFkZSA9IE1hdGgucm91bmQoc2xvdFRlbXBlcmF0dXJlKFxuICAgICAgICBNYXRoLm1pbihNYXRoLm1heCgxNiwgbiksIDI0KSxcbiAgICAgICAgMTYsIDI0LFxuICAgICAgICAxLCA4KSAqIDEwMCArIDEwMCk7XG5cbiAgICBpZiAobiA8PSAxNikge1xuICAgICAgICByZXR1cm4gYmx1ZVtzaGFkZV07XG4gICAgfVxuXG4gICAgaWYgKG4gPD0gMTguNSkge1xuICAgICAgICByZXR1cm4gZ3JlZW5bc2hhZGVdO1xuICAgIH1cblxuICAgIGlmIChuIDw9IDIwLjUpIHtcbiAgICAgICAgcmV0dXJuIGFtYmVyW3NoYWRlXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVlcE9yYW5nZVtzaGFkZV07XG59O1xuIiwiaW1wb3J0IHsgRm9ybUNvbnRyb2wsIElucHV0TGFiZWwsIExpc3RJdGVtQXZhdGFyLCBNZW51SXRlbSwgU2VsZWN0IH0gZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlXCI7XG5pbXBvcnQgRGl2aWRlciBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvRGl2aWRlclwiO1xuaW1wb3J0IExpc3QgZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlL0xpc3RcIjtcbmltcG9ydCBMaXN0SXRlbSBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvTGlzdEl0ZW1cIjtcbmltcG9ydCBMaXN0SXRlbVNlY29uZGFyeUFjdGlvbiBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvTGlzdEl0ZW1TZWNvbmRhcnlBY3Rpb25cIjtcbmltcG9ydCBMaXN0SXRlbVRleHQgZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlL0xpc3RJdGVtVGV4dFwiO1xuaW1wb3J0IHsgU3R5bGVSdWxlc0NhbGxiYWNrLCB3aXRoU3R5bGVzLCBXaXRoU3R5bGVzIH0gZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlL3N0eWxlc1wiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgSUdyb3VwZWRDYWxjdWxhdGVkVGVtcGVyYXR1cmUsIE5vcm1hbE9wZXJhdGlvbk1vZGUgfSBmcm9tIFwiLi4vLi4vYXBwL21vZGVsL2hlYXRpbmdcIjtcbmltcG9ydCB7IHVzZVNjaGVkdWxlSW5mb3JtYXRpb24gfSBmcm9tIFwiLi4vYXBpL2hvb2tzXCI7XG5pbXBvcnQgQXBwSGVhZGVyIGZyb20gXCIuLi9jb21wb25lbnRzL0FwcEhlYWRlclwiO1xuaW1wb3J0IEJvZHlUZXh0IGZyb20gXCIuLi9jb21wb25lbnRzL0JvZHlUZXh0XCI7XG5pbXBvcnQgRm9ybVRleHRGaWVsZCBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVGV4dEZpZWxkXCI7XG5pbXBvcnQgSW5wdXRDb250YWluZXIgZnJvbSBcIi4uL2NvbXBvbmVudHMvSW5wdXRDb250YWluZXJcIjtcbmltcG9ydCB7IEFwcE1lbnVCdXR0b24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9NZW51XCI7XG5pbXBvcnQgU3ViSGVhZGVyIGZyb20gXCIuLi9jb21wb25lbnRzL1N1YkhlYWRlclwiO1xuaW1wb3J0IHsgRmlsbGVkVGVtcGVyYXR1cmVBdmF0YXIsIFRlbXBlcmF0dXJlQXZhdGFyIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVGVtcGVyYXR1cmVBdmF0YXJcIjtcbmltcG9ydCB0cmFuc2xhdGUgZnJvbSBcIi4uL2kxOG4vVHJhbnNsYXRpb25cIjtcbmltcG9ydCBQYWdlIGZyb20gXCIuLi9sYXlvdXRzL1BhZ2VcIjtcblxuY29uc3Qgc3R5bGVzOiBTdHlsZVJ1bGVzQ2FsbGJhY2s8YW55LCBhbnk+ID0gKHRoZW1lKSA9PiAoe1xuICAgIGxpc3Q6IHtcbiAgICAgICAgbWFyZ2luVG9wOiAwLFxuICAgICAgICBtYXJnaW5Cb3R0b206IHRoZW1lLnNwYWNpbmcoMiksXG4gICAgfSxcbn0pO1xuXG50eXBlIFByb3BzID0gV2l0aFN0eWxlczx0eXBlb2Ygc3R5bGVzPjtcblxuZnVuY3Rpb24gcGVyY2VudChhOiBudW1iZXIsIGI6IG51bWJlcikge1xuICAgIGlmIChhID4gYikgeyByZXR1cm4gMTAwOyB9XG5cbiAgICByZXR1cm4gTWF0aC5yb3VuZChhIC8gYiAqIDEwMCk7XG59XG5cbmNvbnN0IFRlbXBlcmF0dXJlc1BhZ2U6IFJlYWN0LkZ1bmN0aW9uQ29tcG9uZW50PFByb3BzPiA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NlcyB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBzY2hlZHVsZUluZm9ybWF0aW9uIH0gPSB1c2VTY2hlZHVsZUluZm9ybWF0aW9uKCk7XG5cbiAgICBjb25zdCB0b0RhdGV0aW1lTG9jYWwgPSAoZDogRGF0ZSkgPT4ge1xuICAgICAgICBpZiAoZCA9PSBudWxsKSB7IHJldHVybiBcIlwiOyB9XG5cbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGQpO1xuICAgICAgICBjb25zdCB0ZW4gPSAoaTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKGkgPCAxMCA/IFwiMFwiIDogXCJcIikgKyBpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IFlZWVkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGNvbnN0IE1NID0gdGVuKGRhdGUuZ2V0TW9udGgoKSArIDEpO1xuICAgICAgICBjb25zdCBERCA9IHRlbihkYXRlLmdldERhdGUoKSk7XG4gICAgICAgIGNvbnN0IEhIID0gdGVuKGRhdGUuZ2V0SG91cnMoKSk7XG4gICAgICAgIGNvbnN0IElJID0gdGVuKGRhdGUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgY29uc3QgU1MgPSB0ZW4oZGF0ZS5nZXRTZWNvbmRzKCkpO1xuXG4gICAgICAgIHJldHVybiBZWVlZICsgXCItXCIgKyBNTSArIFwiLVwiICsgREQgKyBcIlRcIiArXG4gICAgICAgICAgICBISCArIFwiOlwiICsgSUkgKyBcIjpcIiArIFNTO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXREaXNwbGF5TmFtZShzY2hlZHVsZTogSUdyb3VwZWRDYWxjdWxhdGVkVGVtcGVyYXR1cmUpIHtcbiAgICAgICAgaWYgKHNjaGVkdWxlLnRoZXJtb3N0YXRNb2RlICE9PSBOb3JtYWxPcGVyYXRpb25Nb2RlLkF1dG9tYXRpYykge1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZShgVGhlcm1vc3RhdE1vZGUuJHtzY2hlZHVsZS50aGVybW9zdGF0TW9kZX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzY2hlZHVsZS5jb25mbGljdGluZ1BsYW5zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyUGxhbnMgPSBzY2hlZHVsZS5jb25mbGljdGluZ1BsYW5zXG4gICAgICAgICAgICAgICAgLmZpbHRlcigocCkgPT4gc2NoZWR1bGUucGxhbi5pZCAhPT0gcC5pZClcbiAgICAgICAgICAgICAgICAubWFwKChwKSA9PiBwLm5hbWUpLmpvaW4oXCIsIFwiKTtcblxuICAgICAgICAgICAgcmV0dXJuIGAke3NjaGVkdWxlLnBsYW4ubmFtZX0gKCR7b3RoZXJQbGFuc30pYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzY2hlZHVsZS5wbGFuLm5hbWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPFBhZ2U+XG4gICAgICAgICAgICB7e1xuICAgICAgICAgICAgICAgIGhlYWRlcjogKFxuICAgICAgICAgICAgICAgICAgICA8QXBwSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICB7e1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRyYW5zbGF0ZShcInRlbXBlcmF0dXJlcy50aXRsZVwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbjogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBcHBNZW51QnV0dG9uIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIDwvQXBwSGVhZGVyPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgcGFkZGluZ1RvcDogNTAsXG4gICAgICAgICAgICAgICAgYm9keTogKFxuICAgICAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8U3ViSGVhZGVyIHRleHQ9e3RyYW5zbGF0ZShcInRlbXBlcmF0dXJlcy5zY2hlZHVsZVwiKX0gLz5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0Q29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbCBjbGFzc05hbWU9e2NsYXNzZXMuZm9ybUNvbnRyb2x9IGZ1bGxXaWR0aD17dHJ1ZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dExhYmVsPnt0cmFuc2xhdGUoXCJ0ZW1wZXJhdHVyZXMubW9kZVwiKX08L0lucHV0TGFiZWw+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbFdpZHRoPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2NoZWR1bGVJbmZvcm1hdGlvbi5tb2RlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFswLCAxLCAyLCAzLCA0LCA1XS5tYXAoKG0pID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxNZW51SXRlbSBrZXk9e219IHZhbHVlPXttfT57dHJhbnNsYXRlKGBNb2Rlcy4ke219YCl9PC9NZW51SXRlbT4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0lucHV0Q29udGFpbmVyPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB7c2NoZWR1bGVJbmZvcm1hdGlvbi5uZXh0RGF0ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtVGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0cmFuc2xhdGUoXCJ0ZW1wZXJhdHVyZXMubmV4dFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImRhdGV0aW1lLWxvY2FsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RvRGF0ZXRpbWVMb2NhbChzY2hlZHVsZUluZm9ybWF0aW9uLm5leHREYXRlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgPFN1YkhlYWRlciB0ZXh0PXt0cmFuc2xhdGUoXCJ0ZW1wZXJhdHVyZXMubGlzdC50aXRsZVwiKX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb2R5VGV4dCB0ZXh0PXt0cmFuc2xhdGUoXCJ0ZW1wZXJhdHVyZXMubGlzdC50ZXh0XCIpfSAvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB7c2NoZWR1bGVJbmZvcm1hdGlvbi50ZW1wZXJhdHVyZXMubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyA8Qm9keVRleHQgc3R5bGU9e3twYWRkaW5nVG9wOiAxNn19IHRleHQ9e3RyYW5zbGF0ZShcInRlbXBlcmF0dXJlcy5saXN0LmVtcHR5XCIpfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogPExpc3QgY2xhc3NOYW1lPXtjbGFzc2VzLmxpc3R9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2NoZWR1bGVJbmZvcm1hdGlvbi50ZW1wZXJhdHVyZXMubGVuZ3RoID4gMCAmJiA8RGl2aWRlciAvPn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NjaGVkdWxlSW5mb3JtYXRpb24udGVtcGVyYXR1cmVzLm1hcCgoc2NoZWR1bGUpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e3NjaGVkdWxlLmRldmljZS5pZCArIHNjaGVkdWxlLnBsYW4uaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaXN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpc3RJdGVtQXZhdGFyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRlbXBlcmF0dXJlQXZhdGFyIHZhbHVlPXtzY2hlZHVsZS50YXJnZXRUZW1wZXJhdHVyZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaXN0SXRlbUF2YXRhcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpc3RJdGVtVGV4dCBwcmltYXJ5PXtzY2hlZHVsZS5kZXZpY2UubmFtZX0gc2Vjb25kYXJ5PXtnZXREaXNwbGF5TmFtZShzY2hlZHVsZSl9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaXN0SXRlbVNlY29uZGFyeUFjdGlvbiBzdHlsZT17eyBwYWRkaW5nUmlnaHQ6IDE2IH19ID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGaWxsZWRUZW1wZXJhdHVyZUF2YXRhciB2YWx1ZT17c2NoZWR1bGUudGVtcGVyYXR1cmUgfHwgc2NoZWR1bGUudGFyZ2V0VGVtcGVyYXR1cmV9IGZpbGw9e3BlcmNlbnQoc2NoZWR1bGUudGVtcGVyYXR1cmUgfHwgc2NoZWR1bGUudGFyZ2V0VGVtcGVyYXR1cmUgLCBzY2hlZHVsZS50YXJnZXRUZW1wZXJhdHVyZSl9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGlzdEl0ZW1TZWNvbmRhcnlBY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaXN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGl2aWRlciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaXN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9fVxuICAgICAgICA8L1BhZ2U+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhTdHlsZXMoc3R5bGVzKShUZW1wZXJhdHVyZXNQYWdlKTtcbiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiZGV2aWNlQVBJIiwiZmV0Y2hIZWF0aW5nRGV2aWNlcyIsImRldmljZXMiLCJyZXN1bHQiLCJzb3J0QnkiLCJyZWR1Y2UiLCJtYXAiLCJvYmoiLCJpZHgiLCJpZCIsImxlbmd0aCIsInVzZVBsYW5zIiwidXNlU3VzcGVuZGFibGVTdGF0ZSIsInBsYW5BUEkiLCJ1c2VEZXZpY2VzIiwidXNlWm9uZXMiLCJ6b25lQVBJIiwidXNlU2NoZWR1bGVJbmZvcm1hdGlvbiIsInVzZVNldHRpbmdzIiwic2V0dGluZ3NBUEkiLCJ1c2VNb2RlIiwibW9kZUFQSSIsImZldGNoU2V0dGluZ3MiLCJ1cGRhdGVTZXR0aW5ncyIsInNldHRpbmdzIiwiY2FjaGUiLCJNYXAiLCJMT0FESU5HIiwibmFtZSIsIm1ldGhvZCIsInByb3ZpZGVTdGF0ZSIsInByb3ZpZGVGYWlsZWQiLCJ2YWwiLCJnZXQiLCJzdGF0ZSIsInNldFN0YXRlIiwiZmFpbGVkIiwic2V0RmFpbGVkIiwibG9hZFZhbHVlIiwiZm9yY2UiLCJzZXQiLCJhcGlNZXRob2QiLCJzZXRTdGF0ZUFjdGlvbiIsImUiLCJ0cnlNZXRob2QiLCJyIiwiY2F0Y2giLCJ1c2VFZmZlY3QiLCJkZWxldGUiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiRXJyb3IiLCJmZXRjaEhlYXRpbmdab25lcyIsInpvbmVzIiwiY2xhc3NlcyIsIm90aGVyUHJvcHMiLCJmdWxsV2lkdGgiLCJtYXJnaW4iLCJ0aGVtZSIsImlucHV0Q29udGFpbmVyIiwid2lkdGgiLCJwYWRkaW5nTGVmdCIsInNwYWNpbmciLCJwYWRkaW5nUmlnaHQiLCJwcm9wcyIsImNsYXNzTmFtZSIsImNoaWxkcmVuIiwiSWNvbiIsIkFWQVRBUl9ESU1FTlNJT04iLCJzdHlsZXMiLCJfdGhlbWUiLCJyb290IiwiZm9udFNpemUiLCJmbG9hdCIsInRleHRBbGlnbiIsImRpc3BsYXkiLCJmbGV4RGlyZWN0aW9uIiwiYWxpZ25JdGVtcyIsImF2YXRhciIsImhlaWdodCIsImxpbmVIZWlnaHQiLCJwb3NpdGlvbiIsIm92ZXJmbG93IiwiaW1nIiwiekluZGV4IiwibGVmdCIsImJvdHRvbSIsImZpbGwiLCJGaXhlZERpZ2l0cyIsInZhbHVlIiwiZGlnaXRzIiwiTWF0aCIsInJvdW5kIiwicG93IiwidG9GaXhlZCIsIm5vcm1hbGl6ZSIsIm1pbiIsIm1heCIsIngiLCJGaWxsZWRUZW1wZXJhdHVyZUF2YXRhciIsImNvbG9yIiwiZGF0YSIsInR5cGUiLCJzdHlsZSIsImJhY2tncm91bmQiLCJ2YXJpYW50IiwiY29tcG9uZW50IiwiVGVtcGVyYXR1cmVBdmF0YXIiLCJwYWRkaW5nIiwidGVtcGVyYXR1cmVUb0NvbG9yIiwic2xvdFRlbXBlcmF0dXJlIiwiYSIsImIiLCJmbG9vciIsIm4iLCJzaGFkZSIsImxpc3QiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJzY2hlZHVsZUluZm9ybWF0aW9uIiwiZ2V0RGlzcGxheU5hbWUiLCJzY2hlZHVsZSIsInRoZXJtb3N0YXRNb2RlIiwiTm9ybWFsT3BlcmF0aW9uTW9kZSIsImNvbmZsaWN0aW5nUGxhbnMiLCJvdGhlclBsYW5zIiwiZmlsdGVyIiwicCIsInBsYW4iLCJqb2luIiwiaGVhZGVyIiwidGl0bGUiLCJidXR0b24iLCJBcHBNZW51QnV0dG9uIiwicGFkZGluZ1RvcCIsImJvZHkiLCJ0ZXh0IiwiZm9ybUNvbnRyb2wiLCJkaXNhYmxlZCIsIm1vZGUiLCJtIiwia2V5IiwibmV4dERhdGUiLCJsYWJlbCIsImQiLCJkYXRlIiwiRGF0ZSIsInRlbiIsImkiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJ0b0RhdGV0aW1lTG9jYWwiLCJ0ZW1wZXJhdHVyZXMiLCJkZXZpY2UiLCJ0YXJnZXRUZW1wZXJhdHVyZSIsInByaW1hcnkiLCJzZWNvbmRhcnkiLCJ0ZW1wZXJhdHVyZSJdLCJzb3VyY2VSb290IjoiIn0=