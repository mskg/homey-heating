(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{102:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(101);function r(e,t,a=null){return Object(n.b)(this,void 0,void 0,(function*(){return yield new Promise((n,r)=>{Homey.api(e,t,a,(e,t)=>{e?r(e):n(t)})})}))}},105:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));var n=a(101),r=a(9),c=a(102);const o=e=>Object(n.b)(void 0,void 0,void 0,(function*(){const t=Object.assign({},e);return t.zones&&0!==t.zones.length||(t.zones=void 0),t.devices&&0!==t.devices.length||(t.devices=void 0),yield Object(c.a)("PUT","/plans/"+e.id,t)})),i={fetchPlans:()=>Object(n.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/plans");return Object(r.sortBy)(Object(r.map)(e,e=>(e.zones=e.zones||[],e.devices=e.devices||[],e)),e=>e.name)})),fetchPlanById:e=>Object(n.b)(void 0,void 0,void 0,(function*(){const t=yield Object(c.a)("GET","/plans/"+e);if(null==t)throw new Error(`Plan ${e} not found.`);return t.zones=t.zones||[],t.devices=t.devices||[],t})),fetchSchedule:()=>Object(n.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/schedule");return e.temperatures=Object(r.sortBy)(e.temperatures,[e=>e.device.name]),e})),updatePlan:o,removePlan:e=>Object(n.b)(void 0,void 0,void 0,(function*(){return yield Object(c.a)("DELETE","/plans/"+e)})),togglePlanState:e=>Object(n.b)(void 0,void 0,void 0,(function*(){return e.enabled=!e.enabled,yield o(e),!0}))},s={fetchMode:()=>Object(n.b)(void 0,void 0,void 0,(function*(){return(yield Object(c.a)("GET","/mode")).mode})),setMode:e=>Object(n.b)(void 0,void 0,void 0,(function*(){return yield Object(c.a)("PUT","/mode",{mode:e})}))}},106:function(e,t,a){"use strict";var n=a(252),r=a(14),c=a(254),o=a(255),i=a(0),s=a.n(i);t.a=Object(r.a)(e=>({appBar:{},grow:{flexGrow:1},buttons:{display:"flex"},toolbar:{alignItems:"center",justifyContent:"space-between"}}))(e=>{const{classes:t}=e,{button:a,title:r,actions:l,subBar:u}=e.children||{button:null,title:null,actions:null,subBar:null};return s.a.createElement(i.Fragment,null,s.a.createElement(n.a,{position:"absolute",color:"primary",className:t.appBar},s.a.createElement(c.a,{className:t.toolbar},e.button||a,s.a.createElement(o.a,{variant:"h6",color:"inherit",noWrap:!0},e.title||r),s.a.createElement("div",{className:t.grow}),null!=l&&s.a.createElement("div",{className:t.buttons},l)),null!=u&&u))})},107:function(e,t,a){"use strict";var n=a(14),r=a(0),c=a.n(r);t.a=Object(n.a)(e=>({inputContainer:{width:"100%",paddingLeft:e.spacing(2),paddingRight:e.spacing(3)}}))(e=>c.a.createElement("div",{className:e.classes.inputContainer},e.children))},108:function(e,t,a){"use strict";a.d(t,"a",(function(){return E})),a.d(t,"b",(function(){return w}));var n=a(101),r=a(255),c=a(264),o=a(261),i=a(265),s=a(266),l=a(14),u=a(263),d=a(122),m=a.n(d),f=a(0),b=a.n(f),p=a(3),g=a(41),v=a(262),h=a(42);function j(e){var{innerRef:t}=e,a=Object(n.d)(e,["innerRef"]);return a.to.toString().match(/https/)?b.a.createElement("a",Object.assign({onClick:()=>Homey.openURL(a.to.toString())},a),a.children):b.a.createElement(h.b,Object.assign({},a))}var O=e=>b.a.createElement(v.a,Object.assign({},e,{component:j}),e.children);const y=e=>({text:{padding:e.spacing(2),paddingBottom:0},version:{padding:e.spacing(2),paddingTop:0},normal:{},selected:{color:e.palette.primary.main},otherButton:{},firstButton:{marginLeft:-12}}),E=e=>{const[t,a]=b.a.useState(!1);return b.a.createElement(b.a.Fragment,null,b.a.createElement(x,{open:t,onClose:()=>{a(!1)}}),b.a.createElement(w,{first:!0,onClick:()=>{a(!0)},icon:b.a.createElement(m.a,null)}))},x=Object(p.f)(Object(l.a)(y)(e=>{const{classes:t}=e,a=[{type:"entry",to:"/",text:Object(g.a)("menu.plans")},{to:"/temperatures",text:Object(g.a)("menu.temperatures")},{to:"/schedules",text:Object(g.a)("menu.schedules")},{to:"/settings",text:Object(g.a)("menu.settings")},{to:"https://homey-heating.mskg.app",text:Object(g.a)("menu.help")}];return b.a.createElement(u.a,{open:e.open,onClose:e.onClose},b.a.createElement(r.a,{className:t.text,variant:"h5",gutterBottom:!0},Object(g.a)("menu.title")),b.a.createElement(r.a,{className:t.version,variant:"body2",color:"textSecondary",gutterBottom:!0},"Version ","2.0.0-rc6"," (",void 0,")"),b.a.createElement(c.a,null),b.a.createElement(o.a,null,a.map(a=>"Divider"===a.type?b.a.createElement(c.a,null):b.a.createElement(O,{key:a.to,to:a.to,disabled:e.match.url===a.to,button:!0},b.a.createElement(i.a,{primary:a.text,classes:{primary:e.match.url!==a.to?t.normal:t.selected}})))))})),w=Object(l.a)(y)(e=>{const{classes:t,first:a,icon:r}=e,c=Object(n.d)(e,["classes","first","icon"]);return b.a.createElement(s.a,Object.assign({className:a?t.firstButton:t.otherButton,color:"inherit"},c),r)})},112:function(e,t,a){"use strict";var n=a(14),r=a(0),c=a.n(r);t.a=Object(n.a)(e=>({root:{webkitOverflowScrolling:"touch",display:"flex",flexFlow:"column",height:"100vh",width:"100vw",backgroundColor:"#fff"},body:{flex:"1 0 100%",margin:0,maxWidth:"100%",overflowY:"scroll"}}))(e=>{const{classes:t}=e,{header:a,body:n,paddingTop:r,paddingBottom:o}=e.children,i=o||"auto";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:t.root},a,c.a.createElement("div",{className:t.body,style:{paddingTop:r,paddingBottom:i}},n)))})},113:function(e,t,a){"use strict";var n=a(101),r=a(14),c=a(255),o=a(0),i=a.n(o);t.a=Object(r.a)(e=>({text:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}))(e=>{const{classes:t,text:a}=e,r=Object(n.d)(e,["classes","text"]);return i.a.createElement(c.a,Object.assign({className:t.text,color:"textSecondary"},r),a)})},114:function(e,t,a){"use strict";var n=a(101),r=a(14),c=a(255),o=a(0),i=a.n(o);t.a=Object(r.a)(e=>({headline:{marginTop:e.spacing(4),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}))(e=>{const{classes:t,text:a}=e,r=Object(n.d)(e,["classes","text"]);return i.a.createElement(c.a,Object.assign({className:t.headline,variant:"h5",color:"textSecondary",gutterBottom:!0},r),a)})},116:function(e,t,a){"use strict";var n=a(101),r=a(279),c=a(0),o=a.n(c),i=a(107);t.a=e=>{var{classes:t}=e,a=Object(n.d)(e,["classes"]);return o.a.createElement(i.a,null,o.a.createElement(r.a,Object.assign({fullWidth:!0,margin:"normal"},a)))}},118:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(101),r=a(9),c=a(102);const o={fetchHeatingDevices:()=>Object(n.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/devices"),t=Object(r.sortBy)(e,"name").reduce((e,t,a)=>(e[a]=t,e[t.id]=t,e),{});return t.length=e.length,t}))}},119:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(101),r=a(9),c=a(102);const o={fetchHeatingZones:()=>Object(n.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/zones"),t=Object(r.sortBy)(e,"name").reduce((e,t,a)=>(e[a]=t,e[t.id]=t,e),{});return t.length=e.length,t}))}},120:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(101),r=a(102);const c={fetchSettings:()=>Object(n.b)(void 0,void 0,void 0,(function*(){return yield Object(r.a)("GET","/settings")})),updateSettings:e=>Object(n.b)(void 0,void 0,void 0,(function*(){return yield Object(r.a)("PUT","/settings",e)}))}},123:function(e,t,a){"use strict";a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return f})),a.d(t,"f",(function(){return b})),a.d(t,"d",(function(){return p})),a.d(t,"e",(function(){return g})),a.d(t,"b",(function(){return v}));var n=a(118),r=a(105),c=a(120),o=a(101),i=a(0),s=a.n(i);const l=new Map;function u(e,t){return(a=!1,n=!1)=>{const r=l.get(e);let[c,u]=[null,null];a&&([c,u]=s.a.useState("Loading..."!==r?r:null));const[d,m]=s.a.useState(!1);function f(a=!1){if(null==l.get(e)||a)throw l.set(e,"Loading..."),function(e,t){return Object(o.b)(this,void 0,void 0,(function*(){try{t(yield e())}catch(e){t(()=>{throw e})}}))}(t,t=>{"function"==typeof t?l.set(e,t(l.get(e))):l.set(e,t)}).catch(e=>{m(!!n||(()=>{throw e}))})}return f(),Object(i.useEffect)(()=>()=>{l.delete(e)},[]),{[e]:a?c:r,["set"+(e.charAt(0).toUpperCase()+e.slice(1))]:a?u:function(){0},["load"+(e.charAt(0).toUpperCase()+e.slice(1))]:f,[`load${e.charAt(0).toUpperCase()+e.slice(1)}Failed`]:d}}}var d=a(119);const m=u("plans",r.b.fetchPlans),f=u("devices",n.a.fetchHeatingDevices),b=u("zones",d.a.fetchHeatingZones),p=u("scheduleInformation",r.b.fetchSchedule),g=u("settings",c.a.fetchSettings),v=u("mode",r.a.fetchMode)},146:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(148),r=a.n(n),c=a(49),o=a.n(c),i=a(47),s=a.n(i),l=a(147),u=a.n(l);const d=e=>{const t=Math.round(100*(a=Math.min(Math.max(16,e),24),n=16,c=24,i=1,l=8,Math.floor((l-i)*(a-n)/(c-n)+i))+100);var a,n,c,i,l;return e<=16?o.a[t]:e<=18.5?u.a[t]:e<=20.5?r.a[t]:s.a[t]}},147:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};t.default=n},148:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"};t.default=n},175:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),o=a(8),i=a(14),s=c.forwardRef((function(e,t){var a=e.classes,i=e.className,s=Object(r.a)(e,["classes","className"]);return c.createElement("div",Object(n.a)({className:Object(o.a)(a.root,i),ref:t},s))}));s.muiName="ListItemSecondaryAction",t.a=Object(i.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(s)},179:function(e,t,a){"use strict";a.d(t,"a",(function(){return g})),a.d(t,"b",(function(){return v}));var n=a(255),r=a(14),c=a(202),o=a(47),i=a.n(o),s=a(181),l=a.n(s),u=a(0),d=a.n(u),m=a(146);const f=a(180),b=e=>({root:{fontSize:"1em",float:"left",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",width:45},avatar:{width:35,height:35,lineHeight:35,position:"relative",overflow:"hidden"},img:{width:35,height:35,zIndex:2,position:"absolute",left:0,bottom:0},fill:{display:"block",width:35,height:33,zIndex:1,position:"absolute",left:0,bottom:1}});function p(e,t){return(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)}const g=Object(r.a)(b)(e=>{const{value:t,classes:a,fill:r}=e;let{digits:c}=e;const o=(100===r?l.a:i.a)[500];return null==c&&(c=2),d.a.createElement("div",{className:a.root},d.a.createElement("div",{className:a.avatar},d.a.createElement("object",{className:a.img,data:f,type:"image/svg+xml"}),d.a.createElement("span",{style:{height:`calc(${r}% - 5px)`,background:o},className:a.fill})),d.a.createElement(n.a,{variant:"body1",color:"textSecondary",component:"div"},p(t,c),"°"))}),v=Object(r.a)(b)(e=>{const{value:t}=e;return d.a.createElement(c.a,{style:{padding:"25px",background:Object(m.a)(t),fontSize:"1em"}},p(t,1),"°")})},180:function(e,t,a){e.exports=a.p+"icon_black.svg?5136879a03a13f9fb18f241b081f38cb"},181:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};t.default=n},201:function(e,t,a){"use strict";var n=a(2),r=a(23),c=a(1),o=a(0),i=a(8),s=a(14),l=a(262),u=o.forwardRef((function(e,t){var a,r=e.classes,s=e.className,u=e.component,d=void 0===u?"li":u,m=e.disableGutters,f=void 0!==m&&m,b=e.ListItemClasses,p=e.role,g=void 0===p?"menuitem":p,v=e.selected,h=e.tabIndex,j=Object(n.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(a=void 0!==h?h:-1),o.createElement(l.a,Object(c.a)({button:!0,role:g,tabIndex:a,component:d,selected:v,disableGutters:f,classes:Object(c.a)({dense:r.dense},b),className:Object(i.a)(r.root,s,v&&r.selected,!f&&r.gutters),ref:t},j))}));t.a=Object(s.a)((function(e){return{root:Object(c.a)({},e.typography.body1,Object(r.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(c.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(u)},202:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),o=a(8),i=a(14),s=a(104),l=Object(s.a)(c.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var u=c.forwardRef((function(e,t){var a=e.alt,i=e.children,s=e.classes,u=e.className,d=e.component,m=void 0===d?"div":d,f=e.imgProps,b=e.sizes,p=e.src,g=e.srcSet,v=e.variant,h=void 0===v?"circular":v,j=Object(r.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),O=null,y=function(e){var t=e.src,a=e.srcSet,n=c.useState(!1),r=n[0],o=n[1];return c.useEffect((function(){if(t||a){o(!1);var e=!0,n=new Image;return n.src=t,n.srcSet=a,n.onload=function(){e&&o("loaded")},n.onerror=function(){e&&o("error")},function(){e=!1}}}),[t,a]),r}({src:p,srcSet:g}),E=p||g,x=E&&"error"!==y;return O=x?c.createElement("img",Object(n.a)({alt:a,src:p,srcSet:g,sizes:b,className:s.img},f)):null!=i?i:E&&a?a[0]:c.createElement(l,{className:s.fallback}),c.createElement(m,Object(n.a)({className:Object(o.a)(s.root,s.system,s[h],u,!x&&s.colorDefault),ref:t},j),O)}));t.a=Object(i.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(u)},227:function(e,t,a){"use strict";var n=a(1),r=a(2),c=a(0),o=a(8),i=a(14),s=a(142),l=c.forwardRef((function(e,t){var a=e.classes,i=e.className,l=Object(r.a)(e,["classes","className"]),u=c.useContext(s.a);return c.createElement("div",Object(n.a)({className:Object(o.a)(a.root,i,"flex-start"===u.alignItems&&a.alignItemsFlexStart),ref:t},l))}));t.a=Object(i.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(l)},272:function(e,t,a){"use strict";a.r(t);var n=a(260),r=a(282),c=a(275),o=a(201),i=a(227),s=a(264),l=a(261),u=a(262),d=a(175),m=a(265),f=a(14),b=a(0),p=a.n(b),g=a(50),v=a(123),h=a(106),j=a(113),O=a(116),y=a(107),E=a(108),x=a(114),w=a(179),S=a(41),N=a(112);t.default=Object(f.a)(e=>({list:{marginTop:0,marginBottom:e.spacing(2)}}))(e=>{const{classes:t}=e,{scheduleInformation:a}=Object(v.d)();function f(e){if(e.thermostatMode!==g.b.Automatic)return Object(S.a)("ThermostatMode."+e.thermostatMode);if(e.conflictingPlans.length>1){const t=e.conflictingPlans.filter(t=>e.plan.id!==t.id).map(e=>e.name).join(", ");return`${e.plan.name} (${t})`}return e.plan.name}return p.a.createElement(N.a,null,{header:p.a.createElement(h.a,null,{title:Object(S.a)("temperatures.title"),button:p.a.createElement(E.a,null)}),paddingTop:50,body:p.a.createElement(p.a.Fragment,null,p.a.createElement(x.a,{text:Object(S.a)("temperatures.schedule")}),p.a.createElement(y.a,null,p.a.createElement(n.a,{className:t.formControl,fullWidth:!0},p.a.createElement(r.a,null,Object(S.a)("temperatures.mode")),p.a.createElement(c.a,{fullWidth:!0,disabled:!0,value:a.mode},[0,1,2,3,4,5].map(e=>p.a.createElement(o.a,{key:e,value:e},Object(S.a)("Modes."+e)))))),a.nextDate&&p.a.createElement(O.a,{label:Object(S.a)("temperatures.next"),type:"datetime-local",value:(e=>{if(null==e)return"";const t=new Date(e),a=e=>(e<10?"0":"")+e;return t.getFullYear()+"-"+a(t.getMonth()+1)+"-"+a(t.getDate())+"T"+a(t.getHours())+":"+a(t.getMinutes())+":"+a(t.getSeconds())})(a.nextDate),disabled:!0}),p.a.createElement(x.a,{text:Object(S.a)("temperatures.list.title")}),p.a.createElement(j.a,{text:Object(S.a)("temperatures.list.text")}),0===a.temperatures.length?p.a.createElement(j.a,{style:{paddingTop:16},text:Object(S.a)("temperatures.list.empty")}):p.a.createElement(l.a,{className:t.list},a.temperatures.length>0&&p.a.createElement(s.a,null),a.temperatures.map(e=>{return p.a.createElement(p.a.Fragment,{key:e.device.id+e.plan.id},p.a.createElement(u.a,null,p.a.createElement(i.a,null,p.a.createElement(w.b,{value:e.targetTemperature})),p.a.createElement(m.a,{primary:e.device.name,secondary:f(e)}),p.a.createElement(d.a,{style:{paddingRight:16}},p.a.createElement(w.a,{value:e.temperature||e.targetTemperature,fill:(t=e.temperature||e.targetTemperature,a=e.targetTemperature,t>a?100:Math.round(t/a*100))}))),p.a.createElement(s.a,null));var t,a})))})})}}]);
//# sourceMappingURL=https://raw.githubusercontent.com/mskg/homey-heating/release/v2.0.0-rc6/settings/10.js.map