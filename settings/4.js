(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{402:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a(404),s=a.n(i),r=a(103),h=a.n(r),n=a(96),c=a.n(n),d=a(403),u=a.n(d);const l=t=>{const e=Math.round(100*function(t,e,a,i,s){return Math.floor((s-i)*(t-e)/(a-e)+i)}(Math.min(Math.max(16,t),24),16,24,1,8)+100);return t<=16?h.a[e]:t<=18.5?u.a[e]:t<=20.5?s.a[e]:c.a[e]}},457:function(t,e,a){"use strict";a.r(e);var i=a(17),s=a(19),r=a(0),h=a.n(r),n=a(64),c=a(29),d=a(91),u=a(402),l=a(456);const o=new Date(1979,1,29,0,0,0,0),m=new Date(1979,1,30,0,0,0,0);class g{constructor(t,e=!0,a,i){this.rootElement=t,this.showLegend=e,this.tickFormat="%H:%M",this.margin={top:0,right:16,bottom:16,left:28},this.series=[],this.minTime=o,this.maxTime=m,this.showLegend||(this.margin={top:0,right:0,bottom:0,left:0}),this.height=(i||t.clientHeight)-this.margin.top-this.margin.bottom,this.width=(a||t.clientWidth)-32-this.margin.right-this.margin.left,this.series=[Object(d.a)("schedule.Monday"),Object(d.a)("schedule.Tuesday"),Object(d.a)("schedule.Wednesday"),Object(d.a)("schedule.Thursday"),Object(d.a)("schedule.Friday"),Object(d.a)("schedule.Saturday"),Object(d.a)("schedule.Sunday")],this.initAxis(),this.createChart(!0)}data(t){const e=this.createChart(!1).select(".chart").selectAll("g").data(t,t=>t.start+t.taskName+t.end),a=e.enter().insert("g").attr("fill",t=>t.color).attr("transform",t=>"translate("+this.xScale(t.start)+","+this.yScale(t.taskName)+")");if(a.insert("rect").attr("height",this.yScale.bandwidth).attr("width",t=>Math.max(1,this.xScale(t.end)-this.xScale(t.start))),this.showLegend){const t=a.insert("text").attr("text-anchor","start").attr("x",6).attr("y",20).attr("width",t=>Math.max(1,this.xScale(t.end)-this.xScale(t.start)-6)).text(t=>this.fixedDigits(t.temperature,1));this.dotme(t)}e.exit().remove()}initAxis(){this.xScale=l.d().domain([this.minTime,this.maxTime]).range([0,this.width]).clamp(!0),this.yScale=l.c().domain(this.series).rangeRound([0,this.height-this.margin.top-this.margin.bottom]).padding(this.showLegend?.1:0),this.xAxis=l.a(this.xScale).tickFormat(l.f(this.tickFormat)).tickSize(this.showLegend?8:0).tickPadding(this.showLegend?8:0),this.yAxis=l.b(this.yScale).tickPadding(this.showLegend?8:0).tickSize(0)}dotme(t){t.each((function(){const t=l.e(this),e=parseInt(t.attr("width"),10);6.75*t.text().length>e&&t.text("")}))}fixedDigits(t,e){return(Math.round(t*Math.pow(10,e))/Math.pow(10,e)).toFixed(e)}createChart(t){let e=l.e(this.rootElement).select("svg");return t&&e.remove(),e.empty()&&((e=l.e(this.rootElement).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom)).append("g").attr("class","chart").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).attr("transform","translate("+this.margin.left+", "+this.margin.top+")"),this.showLegend&&(e.append("g").attr("class","x axis").attr("transform","translate("+this.margin.left+", "+(this.height-this.margin.top-this.margin.bottom)+")").call(this.xAxis),e.append("g").attr("class","y axis").attr("transform","translate("+this.margin.left+", 0)").call(this.yAxis))),e}}const f=t=>{switch(t){case n.a.Sunday:return Object(d.a)("schedule.Sunday");case n.a.Monday:return Object(d.a)("schedule.Monday");case n.a.Tuesday:return Object(d.a)("schedule.Tuesday");case n.a.Wednesday:return Object(d.a)("schedule.Wednesday");case n.a.Thursday:return Object(d.a)("schedule.Thursday");case n.a.Friday:return Object(d.a)("schedule.Friday");case n.a.Saturday:return Object(d.a)("schedule.Saturday");default:return"XX"}};class p{constructor(t,e){this.start=new Date(o),this.end=new Date(o),this.temperature=t?t.targetTemperature:e?e.targetTemperature:0,this.start.setHours(t?t.hour:0,t?t.minute:0),this.end.setHours(e?e.hour:24,e?e.minute:0),this.taskName=f(t?t.day:e?e.day:0),this.color=Object(u.a)(this.temperature)}static fullDay(t,e){return new p({hour:0,minute:0,targetTemperature:e,index:-1,day:t})}static firstHalf(t,e){return new p({hour:0,minute:0,targetTemperature:t?t.targetTemperature:e.targetTemperature,index:-1,day:e.day},e)}}var y=Object(i.withStyles)(t=>({chart:{padding:2*t.spacing.unit,width:"100%","& .axis domain":{fill:t.palette.text.primary},"& text":{fill:t.palette.text.primary,fontSize:"12px"}}}))(t=>{const{classes:e,plan:a,height:i,legend:r}=t,d=h.a.createRef(),[u,l]=(()=>{const[t,e]=h.a.useState(null),[a,i]=h.a.useState({width:t?t.clientWidth:0,height:t?t.clientHeight:0});function r(t){i({width:t?t.clientWidth:0,height:t?t.clientHeight:0})}return h.a.useEffect(()=>{if(null!=t){r(t);const e=(t=>Object(s.debounce)(()=>{r(t)},300))(t);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}},[t]),[e,a]})();return h.a.useEffect(()=>{if(null!=d.current){const t=new g(d.current,r,l.width,l.height),e=[];[n.a.Monday,n.a.Tuesday,n.a.Wednesday,n.a.Thursday,n.a.Friday,n.a.Saturday,n.a.Sunday].forEach(t=>{const{schedules:i,last:s}=Object(c.a)(Object.assign(Object.assign({},a),{schedule:Object(c.b)(a.schedule)}),t);if(0===i.length){if(null==s)return;return void e.push(p.fullDay(t,s.targetTemperature))}if(1===i.length&&null==s)return void e.push(p.fullDay(t,i[0].targetTemperature));let r=null;i.forEach(t=>{null==r?e.push(p.firstHalf(s,t)):e.push(new p(r,t)),r=t}),null!=r&&e.push(new p(r))}),t.data(e)}},[a,l]),h.a.useEffect(()=>{u(d.current)},[d]),h.a.createElement("div",{style:{height:i||300},className:e.chart,ref:d})});a.d(e,"calculateDay",(function(){return c.a}));e.default=y}}]);
//# sourceMappingURL=https://raw.githubusercontent.com/mskg/homey-heating/release/v1.2.3-rc2/settings/4.js.map