{"version":3,"sources":["webpack:////home/travis/build/mskg/homey-heating/node_modules/@material-ui/core/Avatar/index.js","webpack:///./api/callAPI.tsx","webpack:///./api/heating/index.tsx","webpack:///./components/AppHeader.tsx","webpack:///./components/InputContainer.tsx","webpack:///./components/ListItemLink.tsx","webpack:///./components/Menu.tsx","webpack:///./layouts/Page.tsx","webpack:///./components/BodyText.tsx","webpack:///./components/SubHeader.tsx","webpack:///./components/FormTextField.tsx","webpack:///./api/devices/index.tsx","webpack:///./api/zones/index.tsx","webpack:///./api/settings/index.tsx","webpack:///./api/suspendableState.tsx","webpack:///./api/hooks.tsx","webpack:///./components/temperatureToColor.tsx","webpack:////home/travis/build/mskg/homey-heating/node_modules/@material-ui/core/Avatar/Avatar.js","webpack:///./components/TemperatureAvatar.tsx","webpack:////home/travis/build/mskg/homey-heating/assets/icon_black.svg","webpack:////home/travis/build/mskg/homey-heating/node_modules/@material-ui/core/colors/lightBlue.js","webpack:///./pages/temperatures.tsx"],"names":["_interopRequireDefault","__webpack_require__","Object","defineProperty","exports","value","enumerable","get","_Avatar","default","callAPI","method","path","body","Promise","resolve","reject","Homey","api","err","result","updatePlan","newPlan","tslib__WEBPACK_IMPORTED_MODULE_0__","undefined","planCopy","assign","zones","length","devices","_callAPI__WEBPACK_IMPORTED_MODULE_2__","id","planAPI","fetchPlans","res","lodash__WEBPACK_IMPORTED_MODULE_1__","plan","p","name","fetchPlanById","Error","fetchSchedule","schedule","temperatures","s","device","removePlan","togglePlanState","enabled","modeAPI","fetchMode","mode","setMode","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_0__","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_2___default","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_3__","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_3___default","react__WEBPACK_IMPORTED_MODULE_4__","react__WEBPACK_IMPORTED_MODULE_4___default","__webpack_exports__","_theme","appBar","grow","flexGrow","buttons","display","toolbar","alignItems","justifyContent","props","classes","button","title","actions","subBar","children","a","createElement","position","color","className","variant","noWrap","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","theme","inputContainer","width","paddingLeft","spacing","unit","paddingRight","createLink","_a","innerRef","tslib_es6","to","toString","match","react_default","href","Link","components_ListItemLink","index_es","component","Menu_styles","text","padding","paddingBottom","version","paddingTop","normal","selected","palette","primary","main","otherButton","firstButton","marginLeft","AppMenuButton","_props","openMenu","setOpenMenu","useState","Fragment","AppMenu","open","onClose","MenuButton","first","onClick","icon","Menu_default","withRouter","styles","elements","type","Translation","Drawer_default","gutterBottom","map","e","key","disabled","url","otherProps","root","webkitOverflowScrolling","flexFlow","height","backgroundColor","flex","margin","maxWidth","overflowY","header","newPadding","style","react__WEBPACK_IMPORTED_MODULE_3___default","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_2___default","headline","marginTop","react__WEBPACK_IMPORTED_MODULE_2___default","_InputContainer__WEBPACK_IMPORTED_MODULE_3__","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_1___default","fullWidth","deviceAPI","fetchHeatingDevices","reduce","obj","idx","zoneAPI","fetchHeatingZones","settingsAPI","fetchSettings","_callAPI__WEBPACK_IMPORTED_MODULE_1__","updateSettings","settings","cache","Map","LOADING","useSuspendableState","provideState","provideFailed","val","state","setState","failed","setFailed","loadValue","set","apiMethod","setStateAction","tryMethod","r","catch","react","delete","[object Object]","charAt","toUpperCase","slice","d","usePlans","useDevices","useZones","useScheduleInformation","useSettings","useMode","heating","temperatureToColor","_material_ui_core_colors_amber__WEBPACK_IMPORTED_MODULE_0__","_material_ui_core_colors_amber__WEBPACK_IMPORTED_MODULE_0___default","_material_ui_core_colors_blue__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_colors_blue__WEBPACK_IMPORTED_MODULE_1___default","_material_ui_core_colors_deepOrange__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core_colors_deepOrange__WEBPACK_IMPORTED_MODULE_2___default","_material_ui_core_colors_green__WEBPACK_IMPORTED_MODULE_3__","_material_ui_core_colors_green__WEBPACK_IMPORTED_MODULE_3___default","shade","Math","round","min","max","b","floor","slotTemperature","_defineProperty2","_extends2","_objectWithoutProperties2","_react","_classnames","_withStyles","flexShrink","fontFamily","typography","fontSize","pxToRem","borderRadius","overflow","userSelect","colorDefault","background","grey","img","textAlign","objectFit","Avatar","alt","childrenProp","childrenClassNameProp","childrenClassName","classNameProp","Component","imgProps","sizes","src","srcSet","other","isValidElement","cloneElement","system","defaultProps","_default","FilledTemperatureAvatar","TemperatureAvatar","_material_ui_core__WEBPACK_IMPORTED_MODULE_0__","_material_ui_core__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_2___default","_material_ui_core_colors_deepOrange__WEBPACK_IMPORTED_MODULE_3__","_material_ui_core_colors_deepOrange__WEBPACK_IMPORTED_MODULE_3___default","_material_ui_core_colors_lightBlue__WEBPACK_IMPORTED_MODULE_4__","_material_ui_core_colors_lightBlue__WEBPACK_IMPORTED_MODULE_4___default","react__WEBPACK_IMPORTED_MODULE_5__","react__WEBPACK_IMPORTED_MODULE_5___default","_temperatureToColor__WEBPACK_IMPORTED_MODULE_6__","Icon","float","flexDirection","AVATAR_DIMENSION","avatar","lineHeight","zIndex","left","bottom","fill","FixedDigits","digits","pow","toFixed","data","module","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_1___default","_material_ui_core_List__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core_List__WEBPACK_IMPORTED_MODULE_2___default","_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_3__","_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_3___default","_material_ui_core_ListItemSecondaryAction__WEBPACK_IMPORTED_MODULE_4__","_material_ui_core_ListItemSecondaryAction__WEBPACK_IMPORTED_MODULE_4___default","_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_5__","_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_5___default","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_6__","react__WEBPACK_IMPORTED_MODULE_7__","react__WEBPACK_IMPORTED_MODULE_7___default","_app_model_heating__WEBPACK_IMPORTED_MODULE_8__","_api_hooks__WEBPACK_IMPORTED_MODULE_9__","_components_AppHeader__WEBPACK_IMPORTED_MODULE_10__","_components_BodyText__WEBPACK_IMPORTED_MODULE_11__","_components_FormTextField__WEBPACK_IMPORTED_MODULE_12__","_components_InputContainer__WEBPACK_IMPORTED_MODULE_13__","_components_Menu__WEBPACK_IMPORTED_MODULE_14__","_components_SubHeader__WEBPACK_IMPORTED_MODULE_15__","_components_TemperatureAvatar__WEBPACK_IMPORTED_MODULE_16__","_i18n_Translation__WEBPACK_IMPORTED_MODULE_17__","_layouts_Page__WEBPACK_IMPORTED_MODULE_18__","percent","list","marginBottom","scheduleInformation","getDisplayName","thermostatMode","Automatic","conflictingPlans","otherPlans","filter","join","formControl","m","nextDate","label","date","Date","ten","i","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","toDatetimeLocal","targetTemperature","secondary","temperature"],"mappings":"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","file":"8.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _Avatar.default;\n  }\n});\n\nvar _Avatar = _interopRequireDefault(require(\"./Avatar\"));","export default async function callAPI<T>(method: string, path: string, body: any = null): Promise<T> {\n    if (__PRODUCTION__) {\n        return await new Promise<T>((resolve, reject) => {\n            Homey.api(method, path, body, (err: any, result: any) =>  {\n                if (err) { reject(err); } else { resolve(result); }\n            });\n        });\n    }\n\n    const options: any = {\n        method,\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        cache: \"no-store\",\n    };\n\n    if (body != null) {\n        options.body = JSON.stringify(body);\n    }\n\n    // local development\n    const res = await fetch(`${__HOMEY_DEV_URL}/api/app/app.mskg.homey-heating${path}`, options);\n    return await res.json() as T;\n}\n","\nimport { map, sortBy } from \"lodash\";\nimport { IGroupedCalculatedTemperature, IHeatingPlan, IScheduleInformation, OperationMode } from \"../../../app/model\";\nimport callAPI from \"../callAPI\";\n\nconst fetchPlans = async (): Promise<IHeatingPlan[]> => {\n  const res = await callAPI<IHeatingPlan[]>(\"GET\", \"/plans\");\n\n  return sortBy(map(res, (plan: IHeatingPlan) => {\n    plan.zones = plan.zones || [];\n    plan.devices = plan.devices || [];\n\n    return plan;\n  }), (p) => p.name);\n};\n\nconst togglePlanState = async (plan: IHeatingPlan): Promise<boolean> => {\n  plan.enabled = !plan.enabled;\n  await updatePlan(plan);\n\n  return true;\n};\n\nconst updatePlan = async (newPlan: IHeatingPlan): Promise<IHeatingPlan> => {\n  const planCopy = {...newPlan};\n\n  if (!planCopy.zones || planCopy.zones.length === 0) { planCopy.zones = undefined; }\n  if (!planCopy.devices || planCopy.devices.length === 0) { planCopy.devices = undefined; }\n\n  return await callAPI<IHeatingPlan>(\"PUT\", `/plans/${newPlan.id}`, planCopy);\n};\n\nconst removePlan = async (id: string): Promise<IHeatingPlan> => {\n  return await callAPI<IHeatingPlan>(\"DELETE\", `/plans/${id}`);\n};\n\nconst fetchPlanById = async (id: string): Promise<IHeatingPlan> => {\n  const plan = await callAPI<IHeatingPlan>(\"GET\", `/plans/${id}`);\n  if (plan == null) { throw new Error(`Plan ${id} not found.`); }\n\n  plan.zones = plan.zones || [];\n  plan.devices = plan.devices || [];\n\n  return plan;\n};\n\nconst fetchSchedule = async (): Promise<IScheduleInformation> => {\n  const schedule = await callAPI<IScheduleInformation>(\"GET\", `/schedule`);\n  schedule.temperatures = sortBy(schedule.temperatures, [(s: IGroupedCalculatedTemperature) => s.device.name]);\n\n  return schedule;\n};\n\nconst fetchMode = async (): Promise<OperationMode> => {\n  const res = await callAPI<{mode: OperationMode}>(\"GET\", \"/mode\");\n  return res.mode;\n};\n\nconst setMode = async (mode: OperationMode): Promise<void> => {\n   return await callAPI<void>(\"PUT\", `/mode`, {mode});\n};\n\nexport const planAPI = {\n  fetchPlans,\n  fetchPlanById,\n  fetchSchedule,\n  updatePlan,\n  removePlan,\n  togglePlanState,\n};\n\nexport const modeAPI = {\n  fetchMode,\n  setMode,\n};\n","import AppBar from \"@material-ui/core/AppBar\";\nimport { StyleRulesCallback, withStyles, WithStyles } from \"@material-ui/core/styles\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, { Fragment, ReactChild } from \"react\";\n\nconst styles: StyleRulesCallback = (_theme) => ({\n    appBar: {\n    },\n\n    grow: {\n        flexGrow: 1,\n    },\n\n    buttons: {\n        display: \"flex\" as \"flex\",\n    },\n\n    toolbar: {\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    },\n});\n\ntype NamedSlots = {\n    title?: string,\n    button?: ReactChild,\n    actions?: ReactChild,\n    subBar?: ReactChild,\n};\n\ntype Props = WithStyles<typeof styles> & {\n    title?: string,\n    button?: React.ReactElement<any>,\n    children?: NamedSlots,\n};\n\nconst AppHeaderComponent: React.FunctionComponent<Props> = (props) => {\n    const { classes } = props;\n    const { button, title, actions, subBar } = props.children || {\n        button: null,\n        title: null,\n        actions: null,\n        subBar: null,\n    };\n\n    return (\n        <Fragment>\n            <AppBar position=\"absolute\" color=\"primary\" className={classes.appBar}>\n                <Toolbar className={classes.toolbar}>\n                    {props.button || button}\n\n                    <Typography variant=\"h6\" color=\"inherit\" noWrap={true}>\n                        {props.title || title}\n                    </Typography>\n\n                     <div className={classes.grow} />\n                    {actions != null &&\n                        <div className={classes.buttons}>\n                            {actions}\n                        </div>\n                    }\n                </Toolbar>\n\n                {subBar != null && subBar}\n            </AppBar>\n        </Fragment>\n    );\n};\n\nexport default withStyles(styles)(AppHeaderComponent);\n","import { StyleRulesCallback, withStyles, WithStyles } from \"@material-ui/core/styles\";\nimport React from \"react\";\n\nconst styles: StyleRulesCallback = (theme) => ({\n    inputContainer: {\n        width: \"100%\",\n        paddingLeft: theme.spacing.unit * 2,\n        paddingRight: theme.spacing.unit * 3,\n    },\n});\n\ntype Props = {\n    children: React.ReactElement<any>,\n} & WithStyles<typeof styles>;\n\nconst InputContainer: React.FunctionComponent<Props> = (props) => {\n    return (<div className={props.classes.inputContainer}>{props.children}</div>);\n};\n\nexport default withStyles(styles)(InputContainer);\n","import { ListItem } from \"@material-ui/core\";\nimport { ListItemProps } from \"@material-ui/core/ListItem\";\nimport { LocationDescriptor } from \"history\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\ntype Props =  {\n    // ListItemProps and LinkProps both define an 'innerRef' property which are incompatible.\n\n    to: LocationDescriptor\n    replace?: boolean,\n} & ListItemProps;\n\nfunction createLink({innerRef, ...props}: Props) {\n    // Remove `innerRef` from properties as the interface is incompatible.\n\n    if (props.to.toString().match(/https/)) {\n        return <a href={props.to.toString()} {...props}>{props.children}</a>;\n    }\n\n    return <Link {...props} />;\n}\n\nconst ListItemLink: React.FunctionComponent<Props> = (props) => {\n    return (\n        <ListItem {...props} component={createLink as unknown as \"a\"}>\n            {props.children}\n        </ListItem>\n    );\n};\n\nexport default ListItemLink;\n","import { Divider, IconButton, List, ListItemText, StyleRulesCallback, Typography, WithStyles, withStyles } from \"@material-ui/core\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport { IconButtonProps } from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport React from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport translate from \"../i18n/Translation\";\nimport ListItemLink from \"./ListItemLink\";\n\nconst styles: StyleRulesCallback = (theme) => ({\n    text: {\n        padding: theme.spacing.unit * 2,\n        paddingBottom: 0,\n    },\n\n    version: {\n        padding: theme.spacing.unit * 2,\n        paddingTop: 0,\n    },\n\n    normal: {\n    },\n\n    selected: {\n        color: theme.palette.primary.main,\n    },\n\n    otherButton: {\n\n    },\n\n    firstButton: {\n        marginLeft: -12,\n        // marginRight: 20,\n    },\n});\n\ntype Props = {\n    open: boolean;\n    onClose: () => void;\n} & WithStyles<typeof styles> & RouteComponentProps;\n\nconst AppMenuBase: React.FunctionComponent<Props> = (props) => {\n    const {classes} = props;\n\n    const elements = [\n        {\n            type: \"entry\",\n            to: \"/\",\n            text: translate(\"menu.plans\"),\n        },\n        {\n            to: \"/temperatures\",\n            text: translate(\"menu.temperatures\"),\n        },\n        {\n            to: \"/schedules\",\n            text: translate(\"menu.schedules\"),\n        },\n        {\n            to: \"/settings\",\n            text: translate(\"menu.settings\"),\n        },\n        // {\n        //     type: \"Divider\"\n        // },\n        {\n            to: \"https://homey-heating.mskg.app\",\n            text: translate(\"menu.help\"),\n        },\n    ];\n\n    return (\n        <Drawer open={props.open} onClose={props.onClose}>\n            <Typography className={classes.text} variant=\"h5\" gutterBottom={true}>\n                {translate(\"menu.title\")}\n            </Typography>\n            <Typography className={classes.version} variant=\"body2\" color=\"textSecondary\" gutterBottom={true}>\n                Version {__VERSION} ({__BUILD})\n            </Typography>\n\n            <Divider />\n            <List>\n            {\n                elements.map((e) => (e.type === \"Divider\"\n                    ? <Divider />\n                    : <ListItemLink key={e.to} to={e.to} disabled={props.match.url === e.to} button={true}>\n                        <ListItemText\n                            primary={e.text}\n                            classes={{primary: props.match.url !== e.to ? classes.normal : classes.selected}}\n                        />\n                    </ListItemLink>\n                ))\n            }\n            </List>\n        </Drawer>\n    );\n};\n\ntype MenuButtonProps = {\n    icon: React.ReactElement<any>,\n    first?: boolean,\n} & WithStyles<typeof styles> & IconButtonProps;\n\nconst MenuButtonBase: React.FunctionComponent<MenuButtonProps> = (props) => {\n    const { classes, first, icon, ...otherProps } = props;\n\n    return (\n        <IconButton className={first ? classes.firstButton : classes.otherButton} color=\"inherit\" {...otherProps}>\n            {icon}\n        </IconButton>\n    );\n};\n\nexport const AppMenuButton: React.FunctionComponent = (_props) => {\n    const [openMenu, setOpenMenu] = React.useState<boolean>(false);\n\n    return (\n        <React.Fragment>\n            <AppMenu open={openMenu} onClose={() => { setOpenMenu(false); }} />\n            <MenuButton first={true} onClick={() => { setOpenMenu(true); }} icon={<MenuIcon />} />\n        </React.Fragment>\n    );\n};\n\nconst AppMenu = withRouter(withStyles(styles)(AppMenuBase));\nexport const MenuButton = withStyles(styles)(MenuButtonBase);\n\nexport default AppMenu;\n","import { StyleRulesCallback, withStyles, WithStyles } from \"@material-ui/core/styles\";\nimport React, { ReactChild } from \"react\";\n\nconst styles: StyleRulesCallback = (_theme) => ({\n    root: {\n        webkitOverflowScrolling: \"touch\",\n        display: \"flex\",\n        flexFlow: \"column\",\n        height: \"100vh\",\n        width: \"100vw\",\n        backgroundColor: \"#fff\",\n    },\n\n    body: {\n        flex : \"1 0 100%\",\n        margin: 0,\n        maxWidth: \"100%\",\n        overflowY: \"scroll\",\n    },\n});\n\ntype NamedSlots = {\n    header: ReactChild,\n    body: ReactChild,\n    paddingTop: number | string,\n    paddingBottom?: number | string,\n};\n\ntype Props = WithStyles<typeof styles> & {\n    children: NamedSlots,\n};\n\nconst PageComponent: React.FunctionComponent<Props> = (props) => {\n    const { classes } = props;\n    const { header, body, paddingTop, paddingBottom } = props.children;\n\n    const newPadding = paddingBottom || \"auto\";\n\n    return (\n        <React.Fragment>\n            <div className={classes.root}>\n                {header}\n                <div className={classes.body} style={{paddingTop, paddingBottom: newPadding}}>\n                    {body}\n                </div>\n            </div>\n        </React.Fragment>\n    );\n};\n\nexport default withStyles(styles)(PageComponent);\n","import { StyleRulesCallback, withStyles, WithStyles } from \"@material-ui/core/styles\";\nimport Typography, { TypographyProps } from \"@material-ui/core/Typography\";\nimport React from \"react\";\n\nconst styles: StyleRulesCallback = (theme) => ({\n    text: {\n        // marginTop: theme.spacing.unit * 4,\n        paddingLeft: theme.spacing.unit * 2,\n        paddingRight: theme.spacing.unit * 2,\n    },\n});\n\ntype Props = {\n    text: string,\n} & WithStyles<typeof styles> & TypographyProps;\n\nconst BodyText: React.FunctionComponent<Props> = (props) => {\n    const {classes, text, ...otherProps} = props;\n\n    return (\n        <Typography className={classes.text} color=\"textSecondary\"  {...otherProps}>\n            {text}\n        </Typography>\n    );\n};\n\nexport default withStyles(styles)(BodyText);\n","import { StyleRulesCallback, withStyles, WithStyles } from \"@material-ui/core/styles\";\nimport Typography, { TypographyProps } from \"@material-ui/core/Typography\";\nimport React from \"react\";\n\nconst styles: StyleRulesCallback = (theme) => ({\n    headline: {\n        marginTop: theme.spacing.unit * 4,\n        paddingLeft: theme.spacing.unit * 2,\n        paddingRight: theme.spacing.unit * 2,\n    },\n});\n\ntype SubHeaderProps = {\n    text: string | undefined,\n} & WithStyles<typeof styles> & TypographyProps;\n\nconst SubHeader: React.FunctionComponent<SubHeaderProps> = (props) => {\n    const { classes, text, ...otherProps } = props;\n\n    return (\n        <Typography className={classes.headline} variant=\"h5\" color=\"textSecondary\" gutterBottom={true} {...otherProps}>\n            {text}\n        </Typography>\n    );\n};\n\nexport default withStyles(styles)(SubHeader);\n","import TextField, { TextFieldProps } from \"@material-ui/core/TextField\";\nimport React from \"react\";\nimport InputContainer from \"./InputContainer\";\n\nconst FormTextField = ({ classes, ...otherProps }: TextFieldProps) => {\n    return (\n        <InputContainer>\n            <TextField\n                fullWidth={true}\n                margin=\"normal\"\n                {...otherProps}\n            />\n        </InputContainer>);\n};\n\nexport default FormTextField;\n","\nimport { sortBy } from \"lodash\";\nimport { IHeatingDevice } from \"../../../app/model\";\nimport callAPI from \"../callAPI\";\n\nexport type HashType = {\n  [key: string]: IHeatingDevice;\n} & ArrayLike<IHeatingDevice>;\n\n// Homey.api( String method, String path, Mixed body, Function callback )\nconst fetchHeatingDevices = async (): Promise<HashType> => {\n  const devices = await callAPI<any[]>(\"GET\", \"/devices\");\n\n  const result = sortBy(devices, \"name\").reduce((map, obj, idx) => {\n    map[idx] = obj;\n    map[obj.id] = obj;\n    return map;\n  }, {});\n  result.length = devices.length;\n\n  return result;\n};\n\nexport const deviceAPI = {\n  fetchHeatingDevices,\n};\n","import { sortBy } from \"lodash\";\nimport { IHeatingZone } from \"../../../app/model\";\nimport callAPI from \"../callAPI\";\n\nexport type HashType = {\n  [key: string]: IHeatingZone;\n} & ArrayLike<IHeatingZone>;\n\nconst fetchHeatingZones = async (): Promise<HashType> => {\n  const zones = await callAPI<any[]>(\"GET\", \"/zones\");\n\n  const result = sortBy(zones, \"name\").reduce((map, obj, idx) => {\n    map[idx] = obj;\n    map[obj.id] = obj;\n    return map;\n  }, {});\n\n  result.length = zones.length;\n  return result;\n};\n\nexport const zoneAPI = {\n  fetchHeatingZones,\n};\n","import { Settings } from \"../../../app/services/settings-manager/types\";\nimport callAPI from \"../callAPI\";\n\nexport type SettingsHashMap = {\n  [key in keyof typeof Settings]?: string | boolean;\n};\n\nconst fetchSettings = async (): Promise<SettingsHashMap> => {\n  return await callAPI<SettingsHashMap>(\"GET\", \"/settings\");\n};\n\nconst updateSettings = async (settings: {}): Promise<void> => {\n  return await callAPI<any>(\"PUT\", `/settings`, settings);\n};\n\nexport const settingsAPI = {\n  fetchSettings,\n  updateSettings,\n};\n","import React, { Dispatch, SetStateAction, useEffect } from \"react\";\n\nexport type MapType = {[key: string]: any};\n\nexport type HookSetType<T> = Dispatch<SetStateAction<T>>;\nexport type HookReturnType = () => void;\nexport type ProvideState<T extends MapType> = (provideState?: boolean, provideFailed?: boolean) => T;\n\ntype Async<T> = () => Promise<T>;\n\n/***\n * Call the apiMethod asynchronously.\n *\n * If the method fails, throw the exception inside set SetStateAction of the hook.\n * This allows to catch the error \"in the ErrorBoundary.\"\n */\nasync function tryMethod<T>(apiMethod: () => Promise<T>, setStateAction: Dispatch<SetStateAction<T>>): Promise<void> {\n    try {\n        setStateAction(await apiMethod());\n    } catch (e) {\n        // required for the error to popup the hierarchy\n        setStateAction(() => { throw e; });\n    }\n}\n\nconst cache = new Map<string, any>();\nconst LOADING: any = \"Loading...\";\n\n/**\n * Create a \"hook\" that is able to suspend.\n *\n * @param name Must be unique\n * @param method The async method to wait for\n */\nexport function useSuspendableState<T extends MapType>(name: string, method: Async<any>): ProvideState<T> {\n    return (provideState = false, provideFailed = false) => {\n        // this is imporant as it sets the state after the promise resolves\n        const val = cache.get(name);\n        let [state, setState] = [null, null];\n        if (provideState) {\n            // we use instance compare on LOADING to determine non existing value\n            // @ts-ignore\n            [state, setState] = React.useState<any>(val !== LOADING ? val : null);\n        }\n\n        const [failed, setFailed] = React.useState(false);\n\n        loadValue();\n\n        function loadValue() {\n            if (cache.get(name) == null) {\n                cache.set(name, LOADING);\n\n                // this unloads the component and waits for the promise to resolve\n                throw tryMethod(method, (r) => {\n                    if (typeof r === \"function\") {\n                        cache.set(name, (r as any)(cache.get(name)));\n                    } else {\n                        cache.set(name, r);\n                    }\n                }).catch((e) => {\n                    if (!provideFailed) {\n                        // console.error(e);\n                        // check me - this doesn't work\n                        setFailed(() => { throw e; });\n                    } else {\n                        setFailed(true);\n                    }\n                });\n            }\n        }\n\n        useEffect(() => {\n            // console.log(\"killed value\");\n            return () => { cache.delete(name); };\n        }, []);\n\n        // we tell the DEV that this is not the way to go\n        function failOnNoState() {\n            if (!__PRODUCTION__) {\n                throw new Error(`You must use hooks to save the value ${name}`);\n            }\n        }\n\n        return {\n            [name]: provideState ? state : val,\n            [`set${name.charAt(0).toUpperCase() + name.slice(1)}`]: provideState ? setState : failOnNoState,\n            [`load${name.charAt(0).toUpperCase() + name.slice(1)}`]: loadValue,\n            [`load${name.charAt(0).toUpperCase() + name.slice(1)}Failed`]: failed,\n        } as T;\n    };\n}\n","import { IHeatingDevice, IHeatingPlan, IHeatingZone, IScheduleInformation, OperationMode } from \"../../app/model\";\nimport { deviceAPI } from \"./devices\";\nimport { modeAPI, planAPI } from \"./heating\";\nimport { settingsAPI, SettingsHashMap } from \"./settings\";\nimport { HookReturnType, HookSetType, useSuspendableState } from \"./suspendableState\";\nimport { zoneAPI } from \"./zones\";\n\ntype PlansType = {\n    plans: IHeatingPlan[],\n    setPlans: HookSetType<IHeatingPlan[]>,\n    loadPlans: HookReturnType,\n};\n\ntype DevicesType = {\n    devices: IHeatingDevice[],\n    setDevices: HookSetType<IHeatingDevice[]>,\n    loadDevices: HookReturnType,\n};\n\ntype ZonesType = {\n    zones: IHeatingZone[],\n    setZones: HookSetType<IHeatingZone[]>,\n    loadZones: HookReturnType,\n};\n\ntype ScheduleInformationType = {\n    scheduleInformation: IScheduleInformation,\n    setScheduleInformation: HookSetType<IScheduleInformation>,\n    loadScheduleInformation: HookReturnType,\n};\n\ntype SettingsType = {\n    settings: SettingsHashMap,\n    setSettings: HookSetType<SettingsHashMap>,\n    loadSettings: HookReturnType,\n};\n\ntype ModeType = {\n    mode: OperationMode,\n    setMode: HookSetType<OperationMode>,\n    loadMode: HookReturnType,\n};\n\nexport const usePlans = useSuspendableState<PlansType>(\"plans\", planAPI.fetchPlans);\nexport const useDevices = useSuspendableState<DevicesType>(\"devices\", deviceAPI.fetchHeatingDevices);\nexport const useZones = useSuspendableState<ZonesType>(\"zones\", zoneAPI.fetchHeatingZones);\nexport const useScheduleInformation = useSuspendableState<ScheduleInformationType>(\"scheduleInformation\", planAPI.fetchSchedule);\nexport const useSettings = useSuspendableState<SettingsType>(\"settings\", settingsAPI.fetchSettings);\nexport const useMode = useSuspendableState<ModeType>(\"mode\", modeAPI.fetchMode);\n","import amber from \"@material-ui/core/colors/amber\";\nimport blue from \"@material-ui/core/colors/blue\";\nimport deepOrange from \"@material-ui/core/colors/deepOrange\";\nimport green from \"@material-ui/core/colors/green\";\n\nexport function slotTemperature(val: number, min: number, max: number, a: number, b: number) {\n    //        (b-a)(x - min)\n    // f(x) = -------------- +  a\n    //        max - min\n    //\n    return Math.floor(\n        (((b - a) * (val - min)) /\n        (max - min))\n        + a,\n    );\n}\n\nexport const temperatureToColor = (n: number) => {\n    // project 16 ... 24 to 200 ... 900\n    const shade = Math.round(slotTemperature(\n        Math.min(Math.max(16, n), 24),\n        16, 24,\n        1, 8) * 100 + 100);\n\n    if (n <= 16) {\n        return blue[shade];\n    }\n\n    if (n <= 18.5) {\n        return green[shade];\n    }\n\n    if (n <= 20.5) {\n        return amber[shade];\n    }\n\n    return deepOrange[shade];\n};\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.styles = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _utils = require(\"@material-ui/utils\");\n\nvar _withStyles = _interopRequireDefault(require(\"../styles/withStyles\"));\n\nvar styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      position: 'relative',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexShrink: 0,\n      width: 40,\n      height: 40,\n      fontFamily: theme.typography.fontFamily,\n      fontSize: theme.typography.pxToRem(20),\n      borderRadius: '50%',\n      overflow: 'hidden',\n      userSelect: 'none'\n    },\n\n    /* Styles applied to the root element if there are children and not `src` or `srcSet`. */\n    colorDefault: {\n      color: theme.palette.background.default,\n      backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[600]\n    },\n\n    /* Styles applied to the img element if either `src` or `srcSet` is defined. */\n    img: {\n      width: '100%',\n      height: '100%',\n      textAlign: 'center',\n      // Handle non-square image. The property isn't supported by IE 11.\n      objectFit: 'cover'\n    }\n  };\n};\n\nexports.styles = styles;\n\nfunction Avatar(props) {\n  var alt = props.alt,\n      childrenProp = props.children,\n      childrenClassNameProp = props.childrenClassName,\n      classes = props.classes,\n      classNameProp = props.className,\n      Component = props.component,\n      imgProps = props.imgProps,\n      sizes = props.sizes,\n      src = props.src,\n      srcSet = props.srcSet,\n      other = (0, _objectWithoutProperties2.default)(props, [\"alt\", \"children\", \"childrenClassName\", \"classes\", \"className\", \"component\", \"imgProps\", \"sizes\", \"src\", \"srcSet\"]);\n  var children = null;\n  var img = src || srcSet;\n\n  if (img) {\n    children = _react.default.createElement(\"img\", (0, _extends2.default)({\n      alt: alt,\n      src: src,\n      srcSet: srcSet,\n      sizes: sizes,\n      className: classes.img\n    }, imgProps));\n  } else if (childrenClassNameProp && _react.default.isValidElement(childrenProp)) {\n    children = _react.default.cloneElement(childrenProp, {\n      className: (0, _classnames.default)(childrenClassNameProp, childrenProp.props.className)\n    });\n  } else {\n    children = childrenProp;\n  }\n\n  return _react.default.createElement(Component, (0, _extends2.default)({\n    className: (0, _classnames.default)(classes.root, classes.system, (0, _defineProperty2.default)({}, classes.colorDefault, !img), classNameProp)\n  }, other), children);\n}\n\nprocess.env.NODE_ENV !== \"production\" ? Avatar.propTypes = {\n  /**\r\n   * Used in combination with `src` or `srcSet` to\r\n   * provide an alt attribute for the rendered `img` element.\r\n   */\n  alt: _propTypes.default.string,\n\n  /**\r\n   * Used to render icon or text elements inside the Avatar.\r\n   * `src` and `alt` props will not be used and no `img` will\r\n   * be rendered by default.\r\n   *\r\n   * This can be an element, or just a string.\r\n   */\n  children: _propTypes.default.node,\n\n  /**\r\n   * @ignore\r\n   * The className of the child element.\r\n   * Used by Chip and ListItemIcon to style the Avatar icon.\r\n   */\n  childrenClassName: _propTypes.default.string,\n\n  /**\r\n   * Override or extend the styles applied to the component.\r\n   * See [CSS API](#css-api) below for more details.\r\n   */\n  classes: _propTypes.default.object.isRequired,\n\n  /**\r\n   * @ignore\r\n   */\n  className: _propTypes.default.string,\n\n  /**\r\n   * The component used for the root node.\r\n   * Either a string to use a DOM element or a component.\r\n   */\n  component: _utils.componentPropType,\n\n  /**\r\n   * Attributes applied to the `img` element if the component\r\n   * is used to display an image.\r\n   */\n  imgProps: _propTypes.default.object,\n\n  /**\r\n   * The `sizes` attribute for the `img` element.\r\n   */\n  sizes: _propTypes.default.string,\n\n  /**\r\n   * The `src` attribute for the `img` element.\r\n   */\n  src: _propTypes.default.string,\n\n  /**\r\n   * The `srcSet` attribute for the `img` element.\r\n   */\n  srcSet: _propTypes.default.string\n} : void 0;\nAvatar.defaultProps = {\n  component: 'div'\n};\n\nvar _default = (0, _withStyles.default)(styles, {\n  name: 'MuiAvatar'\n})(Avatar);\n\nexports.default = _default;","import { StyleRulesCallback, Typography, WithStyles, withStyles } from \"@material-ui/core\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport deepOrange from \"@material-ui/core/colors/deepOrange\";\nimport blue from \"@material-ui/core/colors/lightBlue\";\nimport React from \"react\";\nimport { temperatureToColor } from \"./temperatureToColor\";\n\n// tslint:disable-next-line: no-var-requires\nconst Icon = require(\"../../../assets/icon_black.svg\");\n\nconst AVATAR_DIMENSION = 35;\nconst styles: StyleRulesCallback = (_theme) => ({\n    root: {\n        fontSize: \"1em\",\n        float: \"left\",\n        textAlign: \"center\",\n\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n\n        width: AVATAR_DIMENSION + 10,\n        // height: AVATAR_DIMENSION,\n        // overflow: \"hidden\",\n    },\n\n    avatar: {\n        width: AVATAR_DIMENSION,\n        height: AVATAR_DIMENSION,\n        lineHeight: AVATAR_DIMENSION,\n\n        position: \"relative\",\n        overflow: \"hidden\",\n    },\n\n    img: {\n        width: AVATAR_DIMENSION,\n        height: AVATAR_DIMENSION,\n\n        zIndex: 2,\n        position: \"absolute\",\n        left: 0,\n        bottom: 0,\n    },\n\n    fill: {\n        display: \"block\",\n\n        width: AVATAR_DIMENSION,\n        height: AVATAR_DIMENSION - 2,\n\n        zIndex: 1,\n\n        position: \"absolute\",\n        left: 0,\n        bottom: 1,\n    },\n\n    // root: {\n    //     fontSize: \"1em\",\n\n    //     width: height,\n    //     height: height,\n    //     lineHeight: height,\n\n    //     zIndex: 2,\n\n    //     float: \"left\",\n    //     textAlign: \"center\",\n    //     border: \"1px solid\",\n    //     borderRadius: \"100%\",\n    //     position: \"relative\",\n\n    //     overflow: \"hidden\",\n    // },\n\n    // fill: {\n    //     display: \"block\",\n\n    //     width: height,\n    //     height: height,\n\n    //     zIndex: 1,\n    //     position: \"absolute\",\n    //     left: 0,\n    //     bottom: 0,\n    // }\n});\n\ntype FilledProps = {\n    digits?: number;\n    value: number;\n    fill: number;\n} & WithStyles<typeof styles>;\n\nfunction FixedDigits(value: number, digits: number) {\n    return (Math.round(value * Math.pow(10, digits)) / Math.pow(10, digits)).toFixed(digits);\n}\n\nconst BaseFilledTemperatureAvatar: React.FunctionComponent<FilledProps> = (props) => {\n    const { value, classes, fill } = props;\n    let { digits } = props;\n\n    const color = (fill === 100 ? blue : deepOrange)[500];\n    if (digits == null) { digits = 2; }\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.avatar} >\n                <object className={classes.img} data={Icon} type=\"image/svg+xml\" />\n                <span style={{ height: `calc(${fill}% - 5px)`, background: color }} className={classes.fill} />\n            </div>\n\n            <Typography variant=\"body1\" color=\"textSecondary\" component=\"div\">{FixedDigits(value, digits)}</Typography>\n        </div>\n    );\n};\n\ntype Props = {\n    value: number;\n};\n\nconst BaseTemperatureAvatar: React.FunctionComponent<Props> = (props) => {\n    const { value } = props;\n\n    return (\n        <Avatar style={{ padding: \"25px\", background: temperatureToColor(value), fontSize: \"1em\" }}>{FixedDigits(value, 1)}</Avatar>\n    );\n};\n\nexport function normalize(min: number, max: number, x: number) {\n    return (x - min) / (max - min);\n}\n\nexport const FilledTemperatureAvatar = withStyles(styles)(BaseFilledTemperatureAvatar);\nexport const TemperatureAvatar = withStyles(styles)(BaseTemperatureAvatar);\n","module.exports = __webpack_public_path__ + \"icon_black.svg?5136879a03a13f9fb18f241b081f38cb\";","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar lightBlue = {\n  50: '#e1f5fe',\n  100: '#b3e5fc',\n  200: '#81d4fa',\n  300: '#4fc3f7',\n  400: '#29b6f6',\n  500: '#03a9f4',\n  600: '#039be5',\n  700: '#0288d1',\n  800: '#0277bd',\n  900: '#01579b',\n  A100: '#80d8ff',\n  A200: '#40c4ff',\n  A400: '#00b0ff',\n  A700: '#0091ea'\n};\nvar _default = lightBlue;\nexports.default = _default;","import { FormControl, InputLabel, ListItemAvatar, MenuItem, Select } from \"@material-ui/core\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { StyleRulesCallback, withStyles, WithStyles } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport { IGroupedCalculatedTemperature, NormalOperationMode } from \"../../app/model/heating\";\nimport { useScheduleInformation } from \"../api/hooks\";\nimport AppHeader from \"../components/AppHeader\";\nimport BodyText from \"../components/BodyText\";\nimport FormTextField from \"../components/FormTextField\";\nimport InputContainer from \"../components/InputContainer\";\nimport { AppMenuButton } from \"../components/Menu\";\nimport SubHeader from \"../components/SubHeader\";\nimport { FilledTemperatureAvatar, TemperatureAvatar } from \"../components/TemperatureAvatar\";\nimport translate from \"../i18n/Translation\";\nimport Page from \"../layouts/Page\";\n\nconst styles: StyleRulesCallback = (theme) => ({\n    list: {\n        marginTop: 0,\n        marginBottom: theme.spacing.unit * 2,\n    },\n});\n\ntype Props = WithStyles<typeof styles>;\n\nfunction percent(a: number, b: number) {\n    if (a > b) { return 100; }\n\n    return Math.round(a / b * 100);\n}\n\nconst TemperaturesPage: React.FunctionComponent<Props> = (props) => {\n    const { classes } = props;\n    const { scheduleInformation } = useScheduleInformation();\n\n    const toDatetimeLocal = (d: Date) => {\n        if (d == null) { return \"\"; }\n\n        const date = new Date(d);\n        const ten = (i: number) => {\n            return (i < 10 ? \"0\" : \"\") + i;\n        };\n\n        const YYYY = date.getFullYear();\n        const MM = ten(date.getMonth() + 1);\n        const DD = ten(date.getDate());\n        const HH = ten(date.getHours());\n        const II = ten(date.getMinutes());\n        const SS = ten(date.getSeconds());\n\n        return YYYY + \"-\" + MM + \"-\" + DD + \"T\" +\n            HH + \":\" + II + \":\" + SS;\n    };\n\n    function getDisplayName(schedule: IGroupedCalculatedTemperature) {\n        if (schedule.thermostatMode !== NormalOperationMode.Automatic) {\n            return translate(`ThermostatMode.${schedule.thermostatMode}`);\n        }\n\n        if (schedule.conflictingPlans.length > 1) {\n            const otherPlans = schedule.conflictingPlans\n                .filter((p) => schedule.plan.id !== p.id)\n                .map((p) => p.name).join(\", \");\n\n            return `${schedule.plan.name} (${otherPlans})`;\n        }\n\n        return schedule.plan.name;\n    }\n\n    return (\n        <Page>\n            {{\n                header: (\n                    <AppHeader>\n                    {{\n                        title: translate(\"temperatures.title\"),\n                        button: (\n                            <AppMenuButton />\n                        ),\n                    }}\n                </AppHeader>\n                ),\n                paddingTop: 50,\n                body: (\n                    <React.Fragment>\n                        <SubHeader text={translate(\"temperatures.schedule\")} />\n\n                        <InputContainer>\n                            <FormControl className={classes.formControl} fullWidth={true}>\n                                <InputLabel>{translate(\"temperatures.mode\")}</InputLabel>\n\n                                <Select\n                                    fullWidth={true}\n                                    disabled={true}\n                                    value={scheduleInformation.mode}\n                                >\n                                {\n                                    [0, 1, 2, 3, 4, 5].map((m) =>\n                                        (<MenuItem key={m} value={m}>{translate(`Modes.${m}`)}</MenuItem>),\n                                    )\n                                }\n                                </Select>\n                            </FormControl>\n                        </InputContainer>\n\n                        {scheduleInformation.nextDate &&\n                            <FormTextField\n                                label={translate(\"temperatures.next\")}\n                                type=\"datetime-local\"\n                                value={toDatetimeLocal(scheduleInformation.nextDate)}\n                                disabled={true}\n                            />\n                        }\n\n                        <SubHeader text={translate(\"temperatures.list.title\")} />\n                        <BodyText text={translate(\"temperatures.list.text\")} />\n\n                        {scheduleInformation.temperatures.length === 0\n                            ? <BodyText style={{paddingTop: 16}} text={translate(\"temperatures.list.empty\")} />\n                            : <List className={classes.list}>\n                                {scheduleInformation.temperatures.length > 0 && <Divider />}\n                                {scheduleInformation.temperatures.map((schedule) => (\n                                    <React.Fragment key={schedule.device.id + schedule.plan.id}>\n                                        <ListItem>\n                                            <ListItemAvatar>\n                                                <TemperatureAvatar value={schedule.targetTemperature} />\n                                            </ListItemAvatar>\n                                            <ListItemText primary={schedule.device.name} secondary={getDisplayName(schedule)} />\n                                            <ListItemSecondaryAction style={{ paddingRight: 16 }} >\n                                                <FilledTemperatureAvatar value={schedule.temperature || schedule.targetTemperature} fill={percent(schedule.temperature || schedule.targetTemperature , schedule.targetTemperature)} />\n                                            </ListItemSecondaryAction>\n                                        </ListItem>\n                                        <Divider />\n                                    </React.Fragment>\n                                ))}\n                            </List>\n                        }\n                    </React.Fragment>\n                ),\n            }}\n        </Page>\n    );\n};\n\nexport default withStyles(styles)(TemperaturesPage);\n"],"sourceRoot":""}