"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[855],{4746:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(5163);function a(e,t,n=null){return(0,o.mG)(this,void 0,void 0,(function*(){return yield new Promise(((o,a)=>{Homey.api(e,t,n,((e,t)=>{e?a(e):o(t)}))}))}))}},3834:(e,t,n)=>{n.d(t,{i:()=>l});var o=n(5163),a=n(6635),s=n(4746);const l={fetchHeatingDevices:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,s.Z)("GET","/devices"),t=(0,a.sortBy)(e,"name").reduce(((e,t,n)=>(e[n]=t,e[t.id]=t,e)),{});return t.length=e.length,t}))}},8681:(e,t,n)=>{n.d(t,{M:()=>i,X:()=>r});var o=n(5163),a=n(6635),s=n(4746);const l=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=Object.assign({},e);return t.zones&&0!==t.zones.length||(t.zones=void 0),t.devices&&0!==t.devices.length||(t.devices=void 0),yield(0,s.Z)("PUT",`/plans/${e.id}`,t)})),i={fetchPlans:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,s.Z)("GET","/plans");return(0,a.sortBy)((0,a.map)(e,(e=>(e.zones=e.zones||[],e.devices=e.devices||[],e))),(e=>e.name))})),fetchPlanById:e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=yield(0,s.Z)("GET",`/plans/${e}`);if(null==t)throw new Error(`Plan ${e} not found.`);return t.zones=t.zones||[],t.devices=t.devices||[],t})),fetchSchedule:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,s.Z)("GET","/schedule");return e.temperatures=(0,a.sortBy)(e.temperatures,[e=>e.device.name]),e})),updatePlan:l,removePlan:e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return yield(0,s.Z)("DELETE",`/plans/${e}`)})),togglePlanState:e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return e.enabled=!e.enabled,yield l(e),!0}))},r={fetchMode:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield(0,s.Z)("GET","/mode")).mode})),setMode:e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return yield(0,s.Z)("PUT","/mode",{mode:e})}))}},2094:(e,t,n)=>{n.d(t,{Ls:()=>p,yU:()=>Z,xn:()=>u,Si:()=>g,rV:()=>h,HT:()=>v});var o=n(3834),a=n(8681),s=n(2817),l=n(5163),i=n(2784);const r=new Map,c="Loading...";function d(e,t){return(n=!1,o=!1)=>{const a=r.get(e);let[s,d]=[null,null];n&&([s,d]=i.useState(a!==c?a:null));const[m,u]=i.useState(!1);function p(n=!1){if(null==r.get(e)||n)throw r.set(e,c),function(e,t){return(0,l.mG)(this,void 0,void 0,(function*(){try{t(yield e())}catch(e){t((()=>{throw e}))}}))}(t,(t=>{"function"==typeof t?r.set(e,t(r.get(e))):r.set(e,t)})).catch((e=>{u(!!o||(()=>{throw e}))}))}return p(),(0,i.useEffect)((()=>()=>{r.delete(e)}),[]),{[e]:n?s:a,[`set${e.charAt(0).toUpperCase()+e.slice(1)}`]:n?d:function(){},[`load${e.charAt(0).toUpperCase()+e.slice(1)}`]:p,[`load${e.charAt(0).toUpperCase()+e.slice(1)}Failed`]:m}}}var m=n(8516);const u=d("plans",a.M.fetchPlans),p=d("devices",o.i.fetchHeatingDevices),v=d("zones",m.v.fetchHeatingZones),g=d("scheduleInformation",a.M.fetchSchedule),h=d("settings",s.w.fetchSettings),Z=d("mode",a.X.fetchMode)},2817:(e,t,n)=>{n.d(t,{w:()=>s});var o=n(5163),a=n(4746);const s={fetchSettings:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return yield(0,a.Z)("GET","/settings")})),updateSettings:e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return yield(0,a.Z)("PUT","/settings",e)}))}},8516:(e,t,n)=>{n.d(t,{v:()=>l});var o=n(5163),a=n(6635),s=n(4746);const l={fetchHeatingZones:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,s.Z)("GET","/zones"),t=(0,a.sortBy)(e,"name").reduce(((e,t,n)=>(e[n]=t,e[t.id]=t,e)),{});return t.length=e.length,t}))}},1583:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(1585),a=n(2511),s=n(5549),l=n(2784);const i=(0,a.Z)((e=>({fabButton:{zIndex:1,margin:"0 auto",position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}})))((e=>{const{classes:t}=e;return l.createElement(o.Z,{color:"secondary","aria-label":"Add",className:t.fabButton,onClick:()=>e.onClick()},l.createElement(s.Z,null))}))},5030:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(331),a=n(2511),s=n(5223),l=n(436),i=n(2784);const r=(0,a.Z)((e=>({appBar:{},grow:{flexGrow:1},buttons:{display:"flex"},toolbar:{alignItems:"center",justifyContent:"space-between"}})))((e=>{const{classes:t}=e,{button:n,title:a,actions:r,subBar:c}=e.children||{button:null,title:null,actions:null,subBar:null};return i.createElement(i.Fragment,null,i.createElement(o.Z,{position:"absolute",color:"primary",className:t.appBar},i.createElement(s.Z,{className:t.toolbar},e.button||n,i.createElement(l.Z,{variant:"h6",color:"inherit",noWrap:!0},e.title||a),i.createElement("div",{className:t.grow}),null!=r&&i.createElement("div",{className:t.buttons},r)),null!=c&&c))}))},7606:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(5163),a=n(2511),s=n(436),l=n(2784);const i=(0,a.Z)((e=>({text:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}})))((e=>{const{classes:t,text:n}=e,a=(0,o._T)(e,["classes","text"]);return l.createElement(s.Z,Object.assign({className:t.text,color:"textSecondary"},a),n)}))},9503:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(2511),a=n(2784);const s=(0,o.Z)((e=>({inputContainer:{width:"100%",paddingLeft:e.spacing(2),paddingRight:e.spacing(3)}})))((e=>a.createElement("div",{className:e.classes.inputContainer},e.children)))},7546:(e,t,n)=>{n.d(t,{T2:()=>y,j2:()=>x});var o=n(5163),a=n(436),s=n(5256),l=n(1776),i=n(9378),r=n(1837),c=n(2511),d=n(4190),m=n(4882),u=n(2784),p=n(7267),v=n(1810),g=n(8402),h=n(7933);function Z(e){var{innerRef:t}=e,n=(0,o._T)(e,["innerRef"]);return n.to.toString().match(/https/)?u.createElement("a",Object.assign({onClick:()=>Homey.openURL(n.to.toString())},n),n.children):u.createElement(h.rU,Object.assign({},n))}const f=e=>u.createElement(g.Z,Object.assign({},e,{component:Z}),e.children),E=e=>({text:{padding:e.spacing(2),paddingBottom:0},version:{padding:e.spacing(2),paddingTop:0},normal:{},selected:{color:e.palette.primary.main},otherButton:{},firstButton:{marginLeft:-12}}),y=e=>{const[t,n]=u.useState(!1);return u.createElement(u.Fragment,null,u.createElement(b,{open:t,onClose:()=>{n(!1)}}),u.createElement(x,{first:!0,onClick:()=>{n(!0)},icon:u.createElement(m.Z,null)}))},b=(0,p.EN)((0,c.Z)(E)((e=>{const{classes:t}=e,n=[{type:"entry",to:"/",text:(0,v.Z)("menu.plans")},{to:"/temperatures",text:(0,v.Z)("menu.temperatures")},{to:"/schedules",text:(0,v.Z)("menu.schedules")},{to:"/settings",text:(0,v.Z)("menu.settings")},{to:"https://homey-heating.mskg.app",text:(0,v.Z)("menu.help")}];return u.createElement(d.ZP,{open:e.open,onClose:e.onClose},u.createElement(a.Z,{className:t.text,variant:"h5",gutterBottom:!0},(0,v.Z)("menu.title")),u.createElement(a.Z,{className:t.version,variant:"body2",color:"textSecondary",gutterBottom:!0},"Version ","2.0.0-rc15"," (","v2.0.0-rc15",")"),u.createElement(s.Z,null),u.createElement(l.Z,null,n.map((n=>"Divider"===n.type?u.createElement(s.Z,null):u.createElement(f,{key:n.to,to:n.to,disabled:e.match.url===n.to,button:!0},u.createElement(i.Z,{primary:n.text,classes:{primary:e.match.url!==n.to?t.normal:t.selected}}))))))}))),x=(0,c.Z)(E)((e=>{const{classes:t,first:n,icon:a}=e,s=(0,o._T)(e,["classes","first","icon"]);return u.createElement(r.Z,Object.assign({className:n?t.firstButton:t.otherButton,color:"inherit"},s),a)}))},638:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(5163),a=n(2511),s=n(436),l=n(2784);const i=(0,a.Z)((e=>({headline:{marginTop:e.spacing(4),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}})))((e=>{const{classes:t,text:n}=e,a=(0,o._T)(e,["classes","text"]);return l.createElement(s.Z,Object.assign({className:t.headline,variant:"h5",color:"textSecondary",gutterBottom:!0},a),n)}))},3589:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(2511),a=n(2784);const s=(0,o.Z)((e=>({root:{webkitOverflowScrolling:"touch",display:"flex",flexFlow:"column",height:"100vh",width:"100vw",backgroundColor:"#fff"},body:{flex:"1 0 100%",margin:0,maxWidth:"100%",overflowY:"scroll"}})))((e=>{const{classes:t}=e,{header:n,body:o,paddingTop:s,paddingBottom:l}=e.children,i=l||"auto";return a.createElement(a.Fragment,null,a.createElement("div",{className:t.root},n,a.createElement("div",{className:t.body,style:{paddingTop:s,paddingBottom:i}},o)))}))},9855:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var o=n(5163),a=n(2940),s=n(2231),l=n(5256),i=n(1776),r=n(8402),c=n(9520),d=n(9378),m=n(2511),u=n(2938),p=n(6635),v=n(3826),g=n(2784),h=n(7933),Z=n(7267),f=n(8681),E=n(2094),y=n(1583),b=n(5030),x=n(7606),T=n(9503),B=n(7546),G=n(638),w=n(1810),S=n(3589);const k=(0,v.RM)((0,Z.EN)((0,m.Z)((e=>({list:{marginTop:0,marginBottom:e.spacing(2)}})))((e=>{const{classes:t}=e,{plans:n,loadPlans:m}=(0,E.xn)(),{zones:v}=(0,E.HT)(),{devices:Z}=(0,E.Ls)(),{mode:k,setMode:C}=(0,E.yU)(!0),[N,P]=g.useState(!1);function M(e){const t=[];return(0,p.forEach)(e.devices,(e=>{const n=Z[e];null!=n&&t.push(n.name)})),(0,p.forEach)(e.zones,(e=>{const n=v[e];null!=n&&t.push(n.name)})),(0,p.sortBy)(t,(e=>e)).join(", ")}return g.createElement(S.Z,null,{header:g.createElement(b.Z,{title:(0,w.Z)("plans.title"),button:g.createElement(B.T2,null)}),paddingTop:50,paddingBottom:50,body:g.createElement(g.Fragment,null,g.createElement(G.Z,{text:(0,w.Z)("plans.heatingmode.section")}),g.createElement(T.Z,null,g.createElement(a.Z,{fullWidth:!0,disabled:N,onChange:t=>{return n=t.target.value,void(0,o.mG)(void 0,void 0,void 0,(function*(){const t=parseInt(n,10);P(!0),yield f.X.setMode(t),C(t),e.enqueueSnackbar((0,w.Z)("plans.modechanged",{name:(0,w.Z)(`Modes.${n}`)})),P(!1)}));var n},value:k},[0,1,2,3,4,5].map((e=>g.createElement(s.Z,{key:e,value:e},(0,w.Z)(`Modes.${e}`)))))),g.createElement(G.Z,{text:(0,w.Z)("plans.plans.section")}),0===n.length?g.createElement(x.Z,{style:{paddingTop:16},text:(0,w.Z)("plans.plans.empty")}):g.createElement(i.Z,{className:t.list},n.length>0&&g.createElement(l.Z,{key:"0"}),n.map((t=>g.createElement(g.Fragment,{key:t.id},g.createElement(r.Z,Object.assign({},{to:`/plans/${t.id}`},{component:h.rU,button:!0}),g.createElement(d.Z,{primary:t.name,secondary:M(t)}),g.createElement(c.Z,null,g.createElement(u.Z,{onChange:()=>{return n=t,void(0,o.mG)(void 0,void 0,void 0,(function*(){P(!0),yield f.M.togglePlanState(n),yield m(),e.enqueueSnackbar((0,w.Z)("plans.toggled",{name:n.name})),P(!1)}));var n},checked:t.enabled}))),g.createElement(l.Z,null))))),g.createElement(y.Z,{onClick:()=>{e.history.push("/plans/new")}}))})}))))}}]);
//# sourceMappingURL=https://raw.githubusercontent.com/mskg/homey-heating/release/v2.0.0-rc15/settings/855.js.map