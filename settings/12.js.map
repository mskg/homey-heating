{"version":3,"sources":["webpack:////home/travis/build/mskg/homey-heating/node_modules/@material-ui/core/Fab/index.js","webpack:///./api/callAPI.tsx","webpack:///./api/heating/index.tsx","webpack:///./components/AppHeader.tsx","webpack:///./components/ListItemLink.tsx","webpack:///./components/Menu.tsx","webpack:///./layouts/Page.tsx","webpack:///./state/planHooks.tsx","webpack:///./components/temperatureToColor.tsx","webpack:////home/travis/build/mskg/homey-heating/node_modules/@material-ui/core/colors/green.js","webpack:////home/travis/build/mskg/homey-heating/node_modules/@material-ui/core/colors/amber.js","webpack:///./components/AddFab.tsx","webpack:////home/travis/build/mskg/homey-heating/node_modules/@material-ui/core/Fab/Fab.js","webpack:////home/travis/build/mskg/homey-heating/node_modules/@material-ui/icons/Add.js","webpack:///./components/TemperatureAvatar.tsx","webpack:////home/travis/build/mskg/homey-heating/assets/icon_black.svg","webpack:////home/travis/build/mskg/homey-heating/node_modules/@material-ui/core/colors/lightBlue.js","webpack:///./pages/plan-schedule.tsx"],"names":["_interopRequireDefault","Object","defineProperty","exports","value","enumerable","get","_Fab","default","callAPI","method","path","body","Promise","resolve","reject","Homey","api","err","result","updatePlan","newPlan","planCopy","zones","length","undefined","devices","id","planAPI","fetchPlans","res","plan","p","name","fetchPlanById","Error","fetchSchedule","schedule","temperatures","s","device","removePlan","togglePlanState","enabled","modeAPI","fetchMode","mode","setMode","_theme","appBar","grow","flexGrow","buttons","display","toolbar","alignItems","justifyContent","props","classes","button","title","actions","subBar","children","position","color","className","variant","noWrap","createLink","innerRef","to","toString","match","onClick","openURL","component","theme","text","padding","spacing","unit","paddingBottom","version","paddingTop","normal","selected","palette","primary","main","otherButton","firstButton","marginLeft","AppMenuButton","_props","openMenu","setOpenMenu","useState","Fragment","AppMenu","open","onClose","MenuButton","first","icon","elements","type","gutterBottom","map","e","key","disabled","url","otherProps","root","webkitOverflowScrolling","flexFlow","height","width","backgroundColor","flex","margin","maxWidth","overflowY","header","newPadding","style","useHistory","dispatch","loaded","savePoint","undo","commit","useModifyPlan","setName","evt","target","setDescription","description","toggleState","toggleZone","zone","toggleDevice","useModifyExceptions","isDirty","setDirty","setOverride","temp","temperature","clearOverride","updateOverride","useModifySetPoints","selectDay","day","selectedDay","setPoint","copyDays","source","days","targets","removeSetPoint","idx","index","loadSetPoint","point","newSetPoint","saveSetPoint","setStart","date","start","setTargetTemperature","parseFloat","cachedPlan","usePlan","keep","then","overrides","temperatureToColor","n","shade","Math","round","val","min","max","a","b","floor","slotTemperature","_default","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","fabButton","zIndex","bottom","right","styles","_defineProperty2","_objectWithoutProperties2","_extends2","_react","_classnames","_withStyles","_ButtonBase","_helpers","typography","boxSizing","minHeight","transition","transitions","create","duration","short","borderRadius","minWidth","boxShadow","shadows","getContrastText","grey","action","disabledBackground","textDecoration","label","contrastText","dark","secondary","extended","focusVisible","colorInherit","sizeSmall","sizeMedium","Fab","_classNames","disableFocusRipple","focusVisibleClassName","size","other","createElement","concat","capitalize","focusRipple","defaultProps","d","Icon","fontSize","float","textAlign","flexDirection","AVATAR_DIMENSION","avatar","lineHeight","overflow","img","left","fill","FixedDigits","digits","pow","toFixed","FilledTemperatureAvatar","data","background","TemperatureAvatar","module","CopyDayDialog","lazy","SetPointDialog","formatNumber","i","tabToDate","dateDay","list","marginTop","marginBottom","tab","location","history","isSetPointDialogOpen","setSetPointDialogOpen","isCopyDayDialogOpen","setIsCopyDayDialogOpen","selectedTab","setTab","params","useEffect","selectTab","removeSetPointFunc","onConfirm","onCancel","replace","pathname","state","onChange","_e","v","disableRipple","isolation","last","dateToTab","targetTemperature","hour","minute","schedules","sp","onEditSetPoint","menuButton"],"mappings":"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","file":"12.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _Fab.default;\n  }\n});\n\nvar _Fab = _interopRequireDefault(require(\"./Fab\"));","export default async function callAPI<T>(method: string, path: string, body: any = null): Promise<T> {\n    if (__PRODUCTION__) {\n        return await new Promise<T>((resolve, reject) => {\n            Homey.api(method, path, body, (err: any, result: any) =>  {\n                if (err) { reject(err); } else { resolve(result); }\n            });\n        });\n    }\n\n    const options: any = {\n        method,\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        cache: \"no-store\",\n    };\n\n    if (body != null) {\n        options.body = JSON.stringify(body);\n    }\n\n    // local development\n    const res = await fetch(`${__HOMEY_DEV_URL}/api/app/app.mskg.homey-heating${path}`, options);\n    return await res.json() as T;\n}\n","\nimport { map, sortBy } from \"lodash\";\nimport { IGroupedCalculatedTemperature, IHeatingPlan, IScheduleInformation, OperationMode } from \"../../../app/model\";\nimport callAPI from \"../callAPI\";\n\nconst fetchPlans = async (): Promise<IHeatingPlan[]> => {\n  const res = await callAPI<IHeatingPlan[]>(\"GET\", \"/plans\");\n\n  return sortBy(map(res, (plan: IHeatingPlan) => {\n    plan.zones = plan.zones || [];\n    plan.devices = plan.devices || [];\n\n    return plan;\n  }), (p) => p.name);\n};\n\nconst togglePlanState = async (plan: IHeatingPlan): Promise<boolean> => {\n  plan.enabled = !plan.enabled;\n  await updatePlan(plan);\n\n  return true;\n};\n\nconst updatePlan = async (newPlan: IHeatingPlan): Promise<IHeatingPlan> => {\n  const planCopy = {...newPlan};\n\n  if (!planCopy.zones || planCopy.zones.length === 0) { planCopy.zones = undefined; }\n  if (!planCopy.devices || planCopy.devices.length === 0) { planCopy.devices = undefined; }\n\n  return await callAPI<IHeatingPlan>(\"PUT\", `/plans/${newPlan.id}`, planCopy);\n};\n\nconst removePlan = async (id: string): Promise<IHeatingPlan> => {\n  return await callAPI<IHeatingPlan>(\"DELETE\", `/plans/${id}`);\n};\n\nconst fetchPlanById = async (id: string): Promise<IHeatingPlan> => {\n  const plan = await callAPI<IHeatingPlan>(\"GET\", `/plans/${id}`);\n  if (plan == null) { throw new Error(`Plan ${id} not found.`); }\n\n  plan.zones = plan.zones || [];\n  plan.devices = plan.devices || [];\n\n  return plan;\n};\n\nconst fetchSchedule = async (): Promise<IScheduleInformation> => {\n  const schedule = await callAPI<IScheduleInformation>(\"GET\", `/schedule`);\n  schedule.temperatures = sortBy(schedule.temperatures, [(s: IGroupedCalculatedTemperature) => s.device.name]);\n\n  return schedule;\n};\n\nconst fetchMode = async (): Promise<OperationMode> => {\n  const res = await callAPI<{mode: OperationMode}>(\"GET\", \"/mode\");\n  return res.mode;\n};\n\nconst setMode = async (mode: OperationMode): Promise<void> => {\n   return await callAPI<void>(\"PUT\", `/mode`, {mode});\n};\n\nexport const planAPI = {\n  fetchPlans,\n  fetchPlanById,\n  fetchSchedule,\n  updatePlan,\n  removePlan,\n  togglePlanState,\n};\n\nexport const modeAPI = {\n  fetchMode,\n  setMode,\n};\n","import AppBar from \"@material-ui/core/AppBar\";\nimport { StyleRulesCallback, withStyles, WithStyles } from \"@material-ui/core/styles\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, { Fragment, ReactChild } from \"react\";\n\nconst styles: StyleRulesCallback = (_theme) => ({\n    appBar: {\n    },\n\n    grow: {\n        flexGrow: 1,\n    },\n\n    buttons: {\n        display: \"flex\" as \"flex\",\n    },\n\n    toolbar: {\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    },\n});\n\ntype NamedSlots = {\n    title?: string,\n    button?: ReactChild,\n    actions?: ReactChild,\n    subBar?: ReactChild,\n};\n\ntype Props = WithStyles<typeof styles> & {\n    title?: string,\n    button?: React.ReactElement<any>,\n    children?: NamedSlots,\n};\n\nconst AppHeaderComponent: React.FunctionComponent<Props> = (props) => {\n    const { classes } = props;\n    const { button, title, actions, subBar } = props.children || {\n        button: null,\n        title: null,\n        actions: null,\n        subBar: null,\n    };\n\n    return (\n        <Fragment>\n            <AppBar position=\"absolute\" color=\"primary\" className={classes.appBar}>\n                <Toolbar className={classes.toolbar}>\n                    {props.button || button}\n\n                    <Typography variant=\"h6\" color=\"inherit\" noWrap={true}>\n                        {props.title || title}\n                    </Typography>\n\n                     <div className={classes.grow} />\n                    {actions != null &&\n                        <div className={classes.buttons}>\n                            {actions}\n                        </div>\n                    }\n                </Toolbar>\n\n                {subBar != null && subBar}\n            </AppBar>\n        </Fragment>\n    );\n};\n\nexport default withStyles(styles)(AppHeaderComponent);\n","import { ListItem } from \"@material-ui/core\";\nimport { ListItemProps } from \"@material-ui/core/ListItem\";\nimport { LocationDescriptor } from \"history\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\ntype Props =  {\n    // ListItemProps and LinkProps both define an 'innerRef' property which are incompatible.\n\n    to: LocationDescriptor\n    replace?: boolean,\n} & ListItemProps;\n\nfunction createLink({innerRef, ...props}: Props) {\n    // Remove `innerRef` from properties as the interface is incompatible.\n\n    if (props.to.toString().match(/https/)) {\n        return <a onClick={() => Homey.openURL(props.to.toString())} {...props}>{props.children}</a>;\n    }\n\n    // @ts-ignore\n    return <Link {...props} />;\n}\n\nconst ListItemLink: React.FunctionComponent<Props> = (props) => {\n    return (\n        <ListItem {...props} component={createLink as unknown as \"a\"}>\n            {props.children}\n        </ListItem>\n    );\n};\n\nexport default ListItemLink;\n","import { Divider, IconButton, List, ListItemText, StyleRulesCallback, Typography, WithStyles, withStyles } from \"@material-ui/core\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport { IconButtonProps } from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport React from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport translate from \"../i18n/Translation\";\nimport ListItemLink from \"./ListItemLink\";\n\nconst styles: StyleRulesCallback = (theme) => ({\n    text: {\n        padding: theme.spacing.unit * 2,\n        paddingBottom: 0,\n    },\n\n    version: {\n        padding: theme.spacing.unit * 2,\n        paddingTop: 0,\n    },\n\n    normal: {\n    },\n\n    selected: {\n        color: theme.palette.primary.main,\n    },\n\n    otherButton: {\n\n    },\n\n    firstButton: {\n        marginLeft: -12,\n        // marginRight: 20,\n    },\n});\n\ntype Props = {\n    open: boolean;\n    onClose: () => void;\n} & WithStyles<typeof styles> & RouteComponentProps;\n\nconst AppMenuBase: React.FunctionComponent<Props> = (props) => {\n    const {classes} = props;\n\n    const elements = [\n        {\n            type: \"entry\",\n            to: \"/\",\n            text: translate(\"menu.plans\"),\n        },\n        {\n            to: \"/temperatures\",\n            text: translate(\"menu.temperatures\"),\n        },\n        {\n            to: \"/schedules\",\n            text: translate(\"menu.schedules\"),\n        },\n        {\n            to: \"/settings\",\n            text: translate(\"menu.settings\"),\n        },\n        // {\n        //     type: \"Divider\"\n        // },\n        {\n            to: \"https://homey-heating.mskg.app\",\n            text: translate(\"menu.help\"),\n        },\n    ];\n\n    return (\n        <Drawer open={props.open} onClose={props.onClose}>\n            <Typography className={classes.text} variant=\"h5\" gutterBottom={true}>\n                {translate(\"menu.title\")}\n            </Typography>\n            <Typography className={classes.version} variant=\"body2\" color=\"textSecondary\" gutterBottom={true}>\n                Version {__VERSION} ({__BUILD})\n            </Typography>\n\n            <Divider />\n            <List>\n            {\n                elements.map((e) => (e.type === \"Divider\"\n                    ? <Divider />\n                    : <ListItemLink key={e.to} to={e.to} disabled={props.match.url === e.to} button={true}>\n                        <ListItemText\n                            primary={e.text}\n                            classes={{primary: props.match.url !== e.to ? classes.normal : classes.selected}}\n                        />\n                    </ListItemLink>\n                ))\n            }\n            </List>\n        </Drawer>\n    );\n};\n\ntype MenuButtonProps = {\n    icon: React.ReactElement<any>,\n    first?: boolean,\n} & WithStyles<typeof styles> & IconButtonProps;\n\nconst MenuButtonBase: React.FunctionComponent<MenuButtonProps> = (props) => {\n    const { classes, first, icon, ...otherProps } = props;\n\n    return (\n        <IconButton className={first ? classes.firstButton : classes.otherButton} color=\"inherit\" {...otherProps}>\n            {icon}\n        </IconButton>\n    );\n};\n\nexport const AppMenuButton: React.FunctionComponent = (_props) => {\n    const [openMenu, setOpenMenu] = React.useState<boolean>(false);\n\n    return (\n        <React.Fragment>\n            <AppMenu open={openMenu} onClose={() => { setOpenMenu(false); }} />\n            <MenuButton first={true} onClick={() => { setOpenMenu(true); }} icon={<MenuIcon />} />\n        </React.Fragment>\n    );\n};\n\nconst AppMenu = withRouter(withStyles(styles)(AppMenuBase));\nexport const MenuButton = withStyles(styles)(MenuButtonBase);\n\nexport default AppMenu;\n","import { StyleRulesCallback, withStyles, WithStyles } from \"@material-ui/core/styles\";\nimport React, { ReactChild } from \"react\";\n\nconst styles: StyleRulesCallback = (_theme) => ({\n    root: {\n        webkitOverflowScrolling: \"touch\",\n        display: \"flex\",\n        flexFlow: \"column\",\n        height: \"100vh\",\n        width: \"100vw\",\n        backgroundColor: \"#fff\",\n    },\n\n    body: {\n        flex : \"1 0 100%\",\n        margin: 0,\n        maxWidth: \"100%\",\n        overflowY: \"scroll\",\n    },\n});\n\ntype NamedSlots = {\n    header: ReactChild,\n    body: ReactChild,\n    paddingTop: number | string,\n    paddingBottom?: number | string,\n};\n\ntype Props = WithStyles<typeof styles> & {\n    children: NamedSlots,\n};\n\nconst PageComponent: React.FunctionComponent<Props> = (props) => {\n    const { classes } = props;\n    const { header, body, paddingTop, paddingBottom } = props.children;\n\n    const newPadding = paddingBottom || \"auto\";\n\n    return (\n        <React.Fragment>\n            <div className={classes.root}>\n                {header}\n                <div className={classes.body} style={{paddingTop, paddingBottom: newPadding}}>\n                    {body}\n                </div>\n            </div>\n        </React.Fragment>\n    );\n};\n\nexport default withStyles(styles)(PageComponent);\n","import { useCallback, useEffect, useState } from \"react\";\nimport * as uuidv1 from \"uuid/v1\";\nimport { OverrideMode } from \"../../app/model\";\nimport { planAPI } from \"../api/heating\";\nimport { usePlanDispatch, usePlanGlobalState } from \"./PlanProvider\";\n\nexport const useHistory = () => {\n    const dispatch = usePlanDispatch();\n    const loaded = usePlanGlobalState(\"loaded\");\n\n    const savePoint = useCallback(() => dispatch({ type: \"savePoint\" }), [dispatch]);\n    const undo = useCallback(() => dispatch({ type: \"undo\" }), [dispatch]);\n    const commit = useCallback(() => dispatch({ type: \"commit\" }), [dispatch]);\n\n    useEffect(() => {\n        savePoint();\n    }, [loaded]);\n\n    return {\n        savePoint, undo, commit,\n    };\n};\n\nexport const useModifyPlan = () => {\n    const dispatch = usePlanDispatch();\n\n    const setName = useCallback((evt) => dispatch({ type: \"setName\", name: evt.target.value }), [dispatch]);\n    const setDescription = useCallback((evt) => dispatch({ type: \"setDescription\", description: evt.target.value }), [dispatch]);\n\n    const toggleState = useCallback(() => dispatch({ type: \"toggleEnabled\" }), [dispatch]);\n    const toggleZone = useCallback((id) => dispatch({ type: \"toggleZone\", zone: id }), [dispatch]);\n    const toggleDevice = useCallback((id) => dispatch({ type: \"toggleDevice\", device: id }), [dispatch]);\n\n    return { setName, setDescription, toggleState, toggleZone, toggleDevice };\n};\n\nexport const useModifyExceptions = () => {\n    const dispatch = usePlanDispatch();\n    const [isDirty, setDirty] = useState<boolean>(false);\n\n    const setOverride = useCallback((mode, temp) => {\n        dispatch({ type: \"setOverride\", mode, temperature: temp });\n        setDirty(true);\n    }, [dispatch]);\n\n    const clearOverride = useCallback((mode) => {\n        dispatch({ type: \"clearOverride\", mode });\n        setDirty(true);\n    }, [dispatch]);\n\n    const updateOverride = useCallback((mode: OverrideMode, target: number) => {\n        if (target === 0) { clearOverride(mode); } else { setOverride(mode, target); }\n    }, [dispatch]);\n\n    useEffect(() => {\n        setDirty(false);\n    }, []);\n\n    return { isDirty, setOverride, clearOverride, updateOverride };\n};\n\nexport const useModifySetPoints = () => {\n    const [isDirty, setDirty] = useState<boolean>(false);\n\n    const dispatch = usePlanDispatch();\n\n    const selectDay = useCallback((day) => { dispatch({ type: \"selectDay\", day }); }, [dispatch]);\n    const selectedDay = usePlanGlobalState(\"selectedDay\");\n    const setPoint = usePlanGlobalState(\"setPoint\");\n\n    const copyDays = useCallback((source, days) => {\n        if (days != null && days.length > 0) {\n            setDirty(true);\n            dispatch({ type: \"copyDays\", source, targets: days });\n        }\n    }, [dispatch]);\n\n    const removeSetPoint = useCallback((idx) => { setDirty(true); dispatch({ type: \"removeSetPoint\", index: idx }); }, [dispatch]);\n\n    const loadSetPoint = useCallback((point) => { dispatch({ type: \"loadSetPoint\", setPoint: point }); }, [dispatch]);\n    const newSetPoint = useCallback((day) => { dispatch({ type: \"newSetPoint\", day }); }, [dispatch]);\n\n    const saveSetPoint = useCallback((s) => {\n        if (s.index === -1) {\n            dispatch({ type: \"addSetPoint\", setPoint: s });\n        } else {\n            dispatch({ type: \"updateSetPoint\", setPoint: s });\n        }\n    }, [dispatch]);\n\n    const setStart = useCallback((date: Date | string) => dispatch({ type: \"setStart\", start: date }), [dispatch]);\n    const setTargetTemperature = useCallback((evt) => dispatch({ type: \"setTargetTemperature\", temperature: parseFloat(evt.target.value) }), [dispatch]);\n\n    useEffect(() => {\n        setDirty(false);\n    }, []);\n\n    return { setDirty, isDirty, selectedDay, setPoint, copyDays, removeSetPoint, loadSetPoint, newSetPoint, selectDay, saveSetPoint, setStart, setTargetTemperature };\n};\n\nlet cachedPlan = false;\nexport const usePlan = (id: string, keep: boolean = true) => {\n    const dispatch = usePlanDispatch();\n\n    const plan = usePlanGlobalState(\"plan\");\n    const loaded = usePlanGlobalState(\"loaded\");\n    const isDirty = usePlanGlobalState(\"dirty\");\n\n    if (!loaded || !keep) {\n        if ((id == null || id === \"new\") && !cachedPlan) {\n            cachedPlan = true;\n            dispatch({\n                type: \"loadPlan\", plan: {\n                    id: uuidv1(),\n                    enabled: false,\n                    name: \"\",\n                    zones: [],\n                    devices: [],\n                    schedule: [],\n                    overrides: undefined,\n                },\n            });\n        } else {\n            if (!cachedPlan) {\n                throw planAPI.fetchPlanById(id).then((p) => {\n                    cachedPlan = true;\n                    dispatch({ type: \"loadPlan\", plan: p });\n                });\n            }\n        }\n    }\n\n    useEffect(() => {\n        return () => {\n            cachedPlan = false;\n        };\n    }, [id, keep]);\n\n    return { plan, isDirty, loaded };\n};\n","import amber from \"@material-ui/core/colors/amber\";\nimport blue from \"@material-ui/core/colors/blue\";\nimport deepOrange from \"@material-ui/core/colors/deepOrange\";\nimport green from \"@material-ui/core/colors/green\";\n\nexport function slotTemperature(val: number, min: number, max: number, a: number, b: number) {\n    //        (b-a)(x - min)\n    // f(x) = -------------- +  a\n    //        max - min\n    //\n    return Math.floor(\n        (((b - a) * (val - min)) /\n        (max - min))\n        + a,\n    );\n}\n\nexport const temperatureToColor = (n: number) => {\n    // project 16 ... 24 to 200 ... 900\n    const shade = Math.round(slotTemperature(\n        Math.min(Math.max(16, n), 24),\n        16, 24,\n        1, 8) * 100 + 100);\n\n    if (n <= 16) {\n        return blue[shade];\n    }\n\n    if (n <= 18.5) {\n        return green[shade];\n    }\n\n    if (n <= 20.5) {\n        return amber[shade];\n    }\n\n    return deepOrange[shade];\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar green = {\n  50: '#e8f5e9',\n  100: '#c8e6c9',\n  200: '#a5d6a7',\n  300: '#81c784',\n  400: '#66bb6a',\n  500: '#4caf50',\n  600: '#43a047',\n  700: '#388e3c',\n  800: '#2e7d32',\n  900: '#1b5e20',\n  A100: '#b9f6ca',\n  A200: '#69f0ae',\n  A400: '#00e676',\n  A700: '#00c853'\n};\nvar _default = green;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar amber = {\n  50: '#fff8e1',\n  100: '#ffecb3',\n  200: '#ffe082',\n  300: '#ffd54f',\n  400: '#ffca28',\n  500: '#ffc107',\n  600: '#ffb300',\n  700: '#ffa000',\n  800: '#ff8f00',\n  900: '#ff6f00',\n  A100: '#ffe57f',\n  A200: '#ffd740',\n  A400: '#ffc400',\n  A700: '#ffab00'\n};\nvar _default = amber;\nexports.default = _default;","import Fab from \"@material-ui/core/Fab\";\nimport { StyleRulesCallback, withStyles, WithStyles } from \"@material-ui/core/styles\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport React from \"react\";\n\nconst styles: StyleRulesCallback = (theme) => ({\n    fabButton: {\n        zIndex: 1,\n        margin: \"0 auto\",\n\n        position: \"absolute\" as \"absolute\",\n        bottom: theme.spacing.unit * 2,\n        right: theme.spacing.unit * 2,\n    },\n});\n\ntype Props = WithStyles<typeof styles> & {\n    onClick: () => void,\n};\n\nconst AddFabComponent: React.FunctionComponent<Props> = (props) => {\n    const { classes } = props;\n\n    return (\n        <Fab color=\"secondary\" aria-label=\"Add\" className={classes.fabButton} onClick={() => props.onClick()}>\n            <AddIcon />\n        </Fab>\n    );\n};\n\nexport default withStyles(styles)(AddFabComponent);\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.styles = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _utils = require(\"@material-ui/utils\");\n\nvar _withStyles = _interopRequireDefault(require(\"../styles/withStyles\"));\n\nvar _ButtonBase = _interopRequireDefault(require(\"../ButtonBase\"));\n\nvar _helpers = require(\"../utils/helpers\");\n\n// @inheritedComponent ButtonBase\nvar styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: (0, _extends2.default)({}, theme.typography.button, {\n      boxSizing: 'border-box',\n      minHeight: 36,\n      transition: theme.transitions.create(['background-color', 'box-shadow', 'border'], {\n        duration: theme.transitions.duration.short\n      }),\n      borderRadius: '50%',\n      padding: 0,\n      minWidth: 0,\n      width: 56,\n      height: 56,\n      boxShadow: theme.shadows[6],\n      '&:active': {\n        boxShadow: theme.shadows[12]\n      },\n      color: theme.palette.getContrastText(theme.palette.grey[300]),\n      backgroundColor: theme.palette.grey[300],\n      '&$focusVisible': {\n        boxShadow: theme.shadows[6]\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.grey.A100,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: theme.palette.grey[300]\n        },\n        '&$disabled': {\n          backgroundColor: theme.palette.action.disabledBackground\n        },\n        textDecoration: 'none'\n      },\n      '&$disabled': {\n        color: theme.palette.action.disabled,\n        boxShadow: theme.shadows[0],\n        backgroundColor: theme.palette.action.disabledBackground\n      }\n    }),\n\n    /* Styles applied to the span element that wraps the children. */\n    label: {\n      width: '100%',\n      // assure the correct width for iOS Safari\n      display: 'inherit',\n      alignItems: 'inherit',\n      justifyContent: 'inherit'\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    primary: {\n      color: theme.palette.primary.contrastText,\n      backgroundColor: theme.palette.primary.main,\n      '&:hover': {\n        backgroundColor: theme.palette.primary.dark,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: theme.palette.primary.main\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    secondary: {\n      color: theme.palette.secondary.contrastText,\n      backgroundColor: theme.palette.secondary.main,\n      '&:hover': {\n        backgroundColor: theme.palette.secondary.dark,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: theme.palette.secondary.main\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"extended\"`. */\n    extended: {\n      borderRadius: 48 / 2,\n      padding: '0 16px',\n      width: 'auto',\n      minHeight: 'auto',\n      minWidth: 48,\n      height: 48,\n      '&$sizeSmall': {\n        width: 'auto',\n        padding: '0 8px',\n        borderRadius: 34 / 2,\n        minWidth: 34,\n        height: 34\n      },\n      '&$sizeMedium': {\n        width: 'auto',\n        padding: '0 16px',\n        borderRadius: 40 / 2,\n        minWidth: 40,\n        height: 40\n      }\n    },\n\n    /* Styles applied to the ButtonBase root element if the button is keyboard focused. */\n    focusVisible: {},\n\n    /* Styles applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the root element if `color=\"inherit\"`. */\n    colorInherit: {\n      color: 'inherit'\n    },\n\n    /* Styles applied to the root element if `size=\"small\"``. */\n    sizeSmall: {\n      width: 40,\n      height: 40\n    },\n\n    /* Styles applied to the root element if `size=\"medium\"``. */\n    sizeMedium: {\n      width: 48,\n      height: 48\n    }\n  };\n};\n\nexports.styles = styles;\n\nfunction Fab(props) {\n  var _classNames;\n\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      color = props.color,\n      disabled = props.disabled,\n      disableFocusRipple = props.disableFocusRipple,\n      focusVisibleClassName = props.focusVisibleClassName,\n      size = props.size,\n      variant = props.variant,\n      other = (0, _objectWithoutProperties2.default)(props, [\"children\", \"classes\", \"className\", \"color\", \"disabled\", \"disableFocusRipple\", \"focusVisibleClassName\", \"size\", \"variant\"]);\n  return _react.default.createElement(_ButtonBase.default, (0, _extends2.default)({\n    className: (0, _classnames.default)(classes.root, (_classNames = {}, (0, _defineProperty2.default)(_classNames, classes.extended, variant === 'extended'), (0, _defineProperty2.default)(_classNames, classes.primary, color === 'primary'), (0, _defineProperty2.default)(_classNames, classes.secondary, color === 'secondary'), (0, _defineProperty2.default)(_classNames, classes[\"size\".concat((0, _helpers.capitalize)(size))], size !== 'large'), (0, _defineProperty2.default)(_classNames, classes.disabled, disabled), (0, _defineProperty2.default)(_classNames, classes.colorInherit, color === 'inherit'), _classNames), className),\n    disabled: disabled,\n    focusRipple: !disableFocusRipple,\n    focusVisibleClassName: (0, _classnames.default)(classes.focusVisible, focusVisibleClassName)\n  }, other), _react.default.createElement(\"span\", {\n    className: classes.label\n  }, children));\n}\n\nprocess.env.NODE_ENV !== \"production\" ? Fab.propTypes = {\n  /**\n   * The content of the button.\n   */\n  children: _propTypes.default.node.isRequired,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css-api) below for more details.\n   */\n  classes: _propTypes.default.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: _propTypes.default.string,\n\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: _propTypes.default.oneOf(['default', 'inherit', 'primary', 'secondary']),\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a DOM element or a component.\n   */\n  component: _utils.componentPropType,\n\n  /**\n   * If `true`, the button will be disabled.\n   */\n  disabled: _propTypes.default.bool,\n\n  /**\n   * If `true`, the  keyboard focus ripple will be disabled.\n   * `disableRipple` must also be true.\n   */\n  disableFocusRipple: _propTypes.default.bool,\n\n  /**\n   * If `true`, the ripple effect will be disabled.\n   */\n  disableRipple: _propTypes.default.bool,\n\n  /**\n   * @ignore\n   */\n  focusVisibleClassName: _propTypes.default.string,\n\n  /**\n   * The URL to link to when the button is clicked.\n   * If defined, an `a` element will be used as the root node.\n   */\n  href: _propTypes.default.string,\n\n  /**\n   * The size of the button.\n   * `small` is equivalent to the dense button styling.\n   */\n  size: _propTypes.default.oneOf(['small', 'medium', 'large']),\n\n  /**\n   * @ignore\n   */\n  type: _propTypes.default.string,\n\n  /**\n   * The variant to use.\n   */\n  variant: _propTypes.default.oneOf(['round', 'extended'])\n} : void 0;\nFab.defaultProps = {\n  color: 'default',\n  component: 'button',\n  disabled: false,\n  disableFocusRipple: false,\n  size: 'large',\n  type: 'button',\n  variant: 'round'\n};\n\nvar _default = (0, _withStyles.default)(styles, {\n  name: 'MuiFab'\n})(Fab);\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","import { StyleRulesCallback, Typography, WithStyles, withStyles } from \"@material-ui/core\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport deepOrange from \"@material-ui/core/colors/deepOrange\";\nimport blue from \"@material-ui/core/colors/lightBlue\";\nimport React from \"react\";\nimport { temperatureToColor } from \"./temperatureToColor\";\n\n// tslint:disable-next-line: no-var-requires\nconst Icon = require(\"../../../assets/icon_black.svg\");\n\nconst AVATAR_DIMENSION = 35;\nconst styles: StyleRulesCallback = (_theme) => ({\n    root: {\n        fontSize: \"1em\",\n        float: \"left\",\n        textAlign: \"center\",\n\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n\n        width: AVATAR_DIMENSION + 10,\n        // height: AVATAR_DIMENSION,\n        // overflow: \"hidden\",\n    },\n\n    avatar: {\n        width: AVATAR_DIMENSION,\n        height: AVATAR_DIMENSION,\n        lineHeight: AVATAR_DIMENSION,\n\n        position: \"relative\",\n        overflow: \"hidden\",\n    },\n\n    img: {\n        width: AVATAR_DIMENSION,\n        height: AVATAR_DIMENSION,\n\n        zIndex: 2,\n        position: \"absolute\",\n        left: 0,\n        bottom: 0,\n    },\n\n    fill: {\n        display: \"block\",\n\n        width: AVATAR_DIMENSION,\n        height: AVATAR_DIMENSION - 2,\n\n        zIndex: 1,\n\n        position: \"absolute\",\n        left: 0,\n        bottom: 1,\n    },\n\n    // root: {\n    //     fontSize: \"1em\",\n\n    //     width: height,\n    //     height: height,\n    //     lineHeight: height,\n\n    //     zIndex: 2,\n\n    //     float: \"left\",\n    //     textAlign: \"center\",\n    //     border: \"1px solid\",\n    //     borderRadius: \"100%\",\n    //     position: \"relative\",\n\n    //     overflow: \"hidden\",\n    // },\n\n    // fill: {\n    //     display: \"block\",\n\n    //     width: height,\n    //     height: height,\n\n    //     zIndex: 1,\n    //     position: \"absolute\",\n    //     left: 0,\n    //     bottom: 0,\n    // }\n});\n\ntype FilledProps = {\n    digits?: number;\n    value: number;\n    fill: number;\n} & WithStyles<typeof styles>;\n\nfunction FixedDigits(value: number, digits: number) {\n    return (Math.round(value * Math.pow(10, digits)) / Math.pow(10, digits)).toFixed(digits);\n}\n\nconst BaseFilledTemperatureAvatar: React.FunctionComponent<FilledProps> = (props) => {\n    const { value, classes, fill } = props;\n    let { digits } = props;\n\n    const color = (fill === 100 ? blue : deepOrange)[500];\n    if (digits == null) { digits = 2; }\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.avatar} >\n                <object className={classes.img} data={Icon} type=\"image/svg+xml\" />\n                <span style={{ height: `calc(${fill}% - 5px)`, background: color }} className={classes.fill} />\n            </div>\n\n            <Typography variant=\"body1\" color=\"textSecondary\" component=\"div\">{FixedDigits(value, digits)}</Typography>\n        </div>\n    );\n};\n\ntype Props = {\n    value: number;\n};\n\nconst BaseTemperatureAvatar: React.FunctionComponent<Props> = (props) => {\n    const { value } = props;\n\n    return (\n        <Avatar style={{ padding: \"25px\", background: temperatureToColor(value), fontSize: \"1em\" }}>{FixedDigits(value, 1)}</Avatar>\n    );\n};\n\nexport function normalize(min: number, max: number, x: number) {\n    return (x - min) / (max - min);\n}\n\nexport const FilledTemperatureAvatar = withStyles(styles)(BaseFilledTemperatureAvatar);\nexport const TemperatureAvatar = withStyles(styles)(BaseTemperatureAvatar);\n","module.exports = __webpack_public_path__ + \"icon_black.svg?5136879a03a13f9fb18f241b081f38cb\";","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar lightBlue = {\n  50: '#e1f5fe',\n  100: '#b3e5fc',\n  200: '#81d4fa',\n  300: '#4fc3f7',\n  400: '#29b6f6',\n  500: '#03a9f4',\n  600: '#039be5',\n  700: '#0288d1',\n  800: '#0277bd',\n  900: '#01579b',\n  A100: '#80d8ff',\n  A200: '#40c4ff',\n  A400: '#00b0ff',\n  A700: '#0091ea'\n};\nvar _default = lightBlue;\nexports.default = _default;","import { Button, ListItemSecondaryAction } from \"@material-ui/core\";\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { StyleRulesCallback, withStyles, WithStyles } from \"@material-ui/core/styles\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport BackIcon from \"@material-ui/icons/ArrowBackIos\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport TrashIcon from \"@material-ui/icons/Delete\";\nimport CopyIcon from \"@material-ui/icons/FileCopy\";\nimport React, { useCallback } from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport { ScrollLocky } from \"react-scroll-locky\";\nimport { Day, ISetPoint } from \"../../app/model\";\nimport AddFab from \"../components/AddFab\";\nimport AppHeader from \"../components/AppHeader\";\nimport { MenuButton } from \"../components/Menu\";\nimport { TemperatureAvatar } from \"../components/TemperatureAvatar\";\nimport translate from \"../i18n/Translation\";\nimport Page from \"../layouts/Page\";\nimport { useHistory, useModifySetPoints, usePlan } from \"../state/planHooks\";\nimport { usePlanDispatch } from \"../state/PlanProvider\";\n\nconst CopyDayDialog = React.lazy(() => import(\"../dialogs/CopyDayDialog\"));\nconst SetPointDialog = React.lazy(() => import(\"../dialogs/SetPointDialog\"));\n\nconst styles: StyleRulesCallback = (theme) => ({\n    list: {\n        marginTop: 0,\n        marginBottom: theme.spacing.unit * 2,\n    },\n\n    tab: {\n        minWidth: \"50px\",\n    },\n\n    avatar: {\n\n    },\n});\n\nfunction formatNumber(i: number) {\n    return i > 9 ? i.toString() : \"0\" + i;\n}\n\nfunction tabToDate(dateDay: number): number {\n    return dateDay + 1 > 6 ? 0 : dateDay + 1;\n}\n\nfunction dateToTab(dateDay: number): number {\n    return dateDay === 0 ? 6 : dateDay - 1;\n}\n\ntype IndexedSetPoint = {\n    index: number,\n} & ISetPoint;\n\ntype Params = {\n    id: string;\n};\n\ntype Props = WithStyles<typeof styles> & RouteComponentProps<Params, {}, boolean>;\n\nconst SchedulePage: React.FunctionComponent<Props> = (props: Props) => {\n    const { classes, location, history } = props;\n\n    const dispatch = usePlanDispatch();\n\n    const [isSetPointDialogOpen, setSetPointDialogOpen] = React.useState(false);\n    const [isCopyDayDialogOpen, setIsCopyDayDialogOpen] = React.useState(false);\n    const [selectedTab, setTab] = React.useState(0);\n\n    const { plan, loaded } = usePlan(props.match.params.id);\n    const { undo, commit } = useHistory();\n\n    React.useEffect(() => {\n        selectTab(0);\n\n        setSetPointDialogOpen(false);\n        setIsCopyDayDialogOpen(false);\n    }, [location, loaded]);\n\n    const {\n        isDirty, setDirty,\n        selectedDay, copyDays, loadSetPoint, newSetPoint, selectDay, removeSetPoint: removeSetPointFunc,\n    } = useModifySetPoints();\n\n    const selectTab = useCallback((tab) => {\n        setTab(tab);\n        selectDay(tabToDate(tab));\n    }, [dispatch]);\n\n    // depends on local variables\n    const removeSetPoint = (idx: number) => {\n        removeSetPointFunc(idx);\n        selectTab(selectedTab);\n    };\n\n    // depends on local variables\n    const copyDay = (days: Day[]) => {\n        copyDays(tabToDate(selectedTab), days);\n        selectTab(selectedTab);\n        setIsCopyDayDialogOpen(false);\n    };\n\n    function onCancelDialog() {\n        undo();\n\n        history.replace({\n            pathname: `/plans/${plan.id}`,\n            state: true,\n        });\n    }\n\n    function onSaveDialog() {\n        commit();\n\n        history.replace({\n            pathname: `/plans/${plan.id}`,\n            state: true,\n        });\n    }\n\n    function onEditSetPoint(sp: ISetPoint, index: number) {\n        loadSetPoint({ ...sp, index });\n        setSetPointDialogOpen(true);\n    }\n\n    function addSetPoint() {\n        newSetPoint(tabToDate(selectedTab));\n        setSetPointDialogOpen(true);\n    }\n\n    return (\n        <React.Fragment>\n            <CopyDayDialog\n                open={isCopyDayDialogOpen}\n                onConfirm={copyDay}\n                onCancel={() => { setIsCopyDayDialogOpen(false); }}\n            />\n\n            <SetPointDialog\n                open={isSetPointDialogOpen}\n                onClose={(d) => {\n                    if (d) { setDirty(true); selectTab(selectedTab); }\n                    setSetPointDialogOpen(false);\n                }}\n            />\n\n            <Page>\n                {{\n                    header: (\n                        <AppHeader>\n                            {{\n                                title: translate(\"schedule.title\"),\n                                button: (\n                                    <MenuButton first={true} onClick={onCancelDialog} icon={isDirty ? <CancelIcon /> : <BackIcon />} />\n                                ),\n                                actions: (\n                                    <React.Fragment>\n                                        <MenuButton onClick={() => { setIsCopyDayDialogOpen(true); }} icon={<CopyIcon />} />\n\n                                        {isDirty &&\n                                            <Button color=\"inherit\" onClick={onSaveDialog}>\n                                                {translate(\"schedule.save\")}\n                                            </Button>\n                                        }\n                                    </React.Fragment>\n                                ),\n                                subBar: (\n                                    <Tabs value={selectedTab} onChange={(_e, v) => selectTab(v)} variant=\"fullWidth\">\n                                        <Tab classes={{ root: props.classes.tab }} disableRipple={true} label={translate(\"schedule.Monday\")} />\n                                        <Tab classes={{ root: props.classes.tab }} disableRipple={true} label={translate(\"schedule.Tuesday\")} />\n                                        <Tab classes={{ root: props.classes.tab }} disableRipple={true} label={translate(\"schedule.Wednesday\")} />\n                                        <Tab classes={{ root: props.classes.tab }} disableRipple={true} label={translate(\"schedule.Thursday\")} />\n                                        <Tab classes={{ root: props.classes.tab }} disableRipple={true} label={translate(\"schedule.Friday\")} />\n                                        <Tab classes={{ root: props.classes.tab }} disableRipple={true} label={translate(\"schedule.Saturday\")} />\n                                        <Tab classes={{ root: props.classes.tab }} disableRipple={true} label={translate(\"schedule.Sunday\")} />\n                                    </Tabs>\n                                ),\n                            }}\n                        </AppHeader>\n                    ),\n                    paddingTop: 100,\n                    paddingBottom: 60,\n                    body: (\n                        <React.Fragment>\n                            <ScrollLocky enabled={isSetPointDialogOpen || isCopyDayDialogOpen} isolation={false}>\n                                <List className={classes.list}>\n                                    {\n                                        selectedDay.last &&\n                                        <React.Fragment key=\"-1\">\n                                            <ListItem button={true} onClick={() => selectTab(dateToTab((selectedDay.last && selectedDay.last.day) || 0))}>\n                                                <TemperatureAvatar value={selectedDay.last.targetTemperature} />\n\n                                                <ListItemText\n                                                    primary={`${Day[selectedDay.last.day]}`}\n                                                    secondary={`${formatNumber(selectedDay.last.hour)}:${formatNumber(selectedDay.last.minute)}`}\n                                                />\n                                            </ListItem>\n                                            <Divider />\n                                        </React.Fragment>\n                                    }\n                                    {\n                                        selectedDay.schedules.map((schedule: IndexedSetPoint) =>\n                                            <React.Fragment key={schedule.index}>\n                                                <ListItem button={true} onClick={() => onEditSetPoint(schedule, schedule.index)}>\n                                                    <TemperatureAvatar value={schedule.targetTemperature} />\n\n                                                    <ListItemText primary={`${formatNumber(schedule.hour)}:${formatNumber(schedule.minute)}`} />\n\n                                                    <ListItemSecondaryAction>\n                                                        <IconButton className={classes.menuButton} onClick={() => removeSetPoint(schedule.index)}>\n                                                            <TrashIcon />\n                                                        </IconButton>\n                                                    </ListItemSecondaryAction>\n                                                </ListItem>\n                                                <Divider />\n                                            </React.Fragment>,\n                                        )\n                                    }\n                                </List>\n                            </ScrollLocky>\n\n                            <AddFab onClick={addSetPoint} />\n                        </React.Fragment>\n                    ),\n                }}\n            </Page>\n        </React.Fragment>\n    );\n};\n\nexport default withRouter(withStyles(styles)(SchedulePage));\n"],"sourceRoot":""}