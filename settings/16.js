(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{102:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(101);function l(e,t,a=null){return Object(n.b)(this,void 0,void 0,(function*(){return yield new Promise((n,l)=>{Homey.api(e,t,a,(e,t)=>{e?l(e):n(t)})})}))}},105:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return s}));var n=a(101),l=a(9),c=a(102);const o=e=>Object(n.b)(void 0,void 0,void 0,(function*(){const t=Object.assign({},e);return t.zones&&0!==t.zones.length||(t.zones=void 0),t.devices&&0!==t.devices.length||(t.devices=void 0),yield Object(c.a)("PUT","/plans/"+e.id,t)})),r={fetchPlans:()=>Object(n.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/plans");return Object(l.sortBy)(Object(l.map)(e,e=>(e.zones=e.zones||[],e.devices=e.devices||[],e)),e=>e.name)})),fetchPlanById:e=>Object(n.b)(void 0,void 0,void 0,(function*(){const t=yield Object(c.a)("GET","/plans/"+e);if(null==t)throw new Error(`Plan ${e} not found.`);return t.zones=t.zones||[],t.devices=t.devices||[],t})),fetchSchedule:()=>Object(n.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/schedule");return e.temperatures=Object(l.sortBy)(e.temperatures,[e=>e.device.name]),e})),updatePlan:o,removePlan:e=>Object(n.b)(void 0,void 0,void 0,(function*(){return yield Object(c.a)("DELETE","/plans/"+e)})),togglePlanState:e=>Object(n.b)(void 0,void 0,void 0,(function*(){return e.enabled=!e.enabled,yield o(e),!0}))},s={fetchMode:()=>Object(n.b)(void 0,void 0,void 0,(function*(){return(yield Object(c.a)("GET","/mode")).mode})),setMode:e=>Object(n.b)(void 0,void 0,void 0,(function*(){return yield Object(c.a)("PUT","/mode",{mode:e})}))}},106:function(e,t,a){"use strict";var n=a(252),l=a(14),c=a(254),o=a(255),r=a(0),s=a.n(r);t.a=Object(l.a)(e=>({appBar:{},grow:{flexGrow:1},buttons:{display:"flex"},toolbar:{alignItems:"center",justifyContent:"space-between"}}))(e=>{const{classes:t}=e,{button:a,title:l,actions:i,subBar:u}=e.children||{button:null,title:null,actions:null,subBar:null};return s.a.createElement(r.Fragment,null,s.a.createElement(n.a,{position:"absolute",color:"primary",className:t.appBar},s.a.createElement(c.a,{className:t.toolbar},e.button||a,s.a.createElement(o.a,{variant:"h6",color:"inherit",noWrap:!0},e.title||l),s.a.createElement("div",{className:t.grow}),null!=i&&s.a.createElement("div",{className:t.buttons},i)),null!=u&&u))})},108:function(e,t,a){"use strict";a.d(t,"a",(function(){return E})),a.d(t,"b",(function(){return C}));var n=a(101),l=a(255),c=a(264),o=a(261),r=a(265),s=a(266),i=a(14),u=a(263),d=a(122),b=a.n(d),m=a(0),p=a.n(m),v=a(3),f=a(41),y=a(262),O=a(42);function j(e){var{innerRef:t}=e,a=Object(n.d)(e,["innerRef"]);return a.to.toString().match(/https/)?p.a.createElement("a",Object.assign({onClick:()=>Homey.openURL(a.to.toString())},a),a.children):p.a.createElement(O.b,Object.assign({},a))}var g=e=>p.a.createElement(y.a,Object.assign({},e,{component:j}),e.children);const h=e=>({text:{padding:e.spacing(2),paddingBottom:0},version:{padding:e.spacing(2),paddingTop:0},normal:{},selected:{color:e.palette.primary.main},otherButton:{},firstButton:{marginLeft:-12}}),E=e=>{const[t,a]=p.a.useState(!1);return p.a.createElement(p.a.Fragment,null,p.a.createElement(k,{open:t,onClose:()=>{a(!1)}}),p.a.createElement(C,{first:!0,onClick:()=>{a(!0)},icon:p.a.createElement(b.a,null)}))},k=Object(v.f)(Object(i.a)(h)(e=>{const{classes:t}=e,a=[{type:"entry",to:"/",text:Object(f.a)("menu.plans")},{to:"/temperatures",text:Object(f.a)("menu.temperatures")},{to:"/schedules",text:Object(f.a)("menu.schedules")},{to:"/settings",text:Object(f.a)("menu.settings")},{to:"https://homey-heating.mskg.app",text:Object(f.a)("menu.help")}];return p.a.createElement(u.a,{open:e.open,onClose:e.onClose},p.a.createElement(l.a,{className:t.text,variant:"h5",gutterBottom:!0},Object(f.a)("menu.title")),p.a.createElement(l.a,{className:t.version,variant:"body2",color:"textSecondary",gutterBottom:!0},"Version ","2.0.0-rc6"," (",void 0,")"),p.a.createElement(c.a,null),p.a.createElement(o.a,null,a.map(a=>"Divider"===a.type?p.a.createElement(c.a,null):p.a.createElement(g,{key:a.to,to:a.to,disabled:e.match.url===a.to,button:!0},p.a.createElement(r.a,{primary:a.text,classes:{primary:e.match.url!==a.to?t.normal:t.selected}})))))})),C=Object(i.a)(h)(e=>{const{classes:t,first:a,icon:l}=e,c=Object(n.d)(e,["classes","first","icon"]);return p.a.createElement(s.a,Object.assign({className:a?t.firstButton:t.otherButton,color:"inherit"},c),l)})},112:function(e,t,a){"use strict";var n=a(14),l=a(0),c=a.n(l);t.a=Object(n.a)(e=>({root:{webkitOverflowScrolling:"touch",display:"flex",flexFlow:"column",height:"100vh",width:"100vw",backgroundColor:"#fff"},body:{flex:"1 0 100%",margin:0,maxWidth:"100%",overflowY:"scroll"}}))(e=>{const{classes:t}=e,{header:a,body:n,paddingTop:l,paddingBottom:o}=e.children,r=o||"auto";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:t.root},a,c.a.createElement("div",{className:t.body,style:{paddingTop:l,paddingBottom:r}},n)))})},134:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return b}));var n=a(0),l=a(129),c=a(105),o=a(46);const r=()=>{const e=Object(o.b)(),t=Object(o.c)("loaded"),a=Object(n.useCallback)(()=>e({type:"savePoint"}),[e]),l=Object(n.useCallback)(()=>e({type:"undo"}),[e]),c=Object(n.useCallback)(()=>e({type:"commit"}),[e]);return Object(n.useEffect)(()=>{a()},[t]),{savePoint:a,undo:l,commit:c}},s=()=>{const e=Object(o.b)();return{setName:Object(n.useCallback)(t=>e({type:"setName",name:t.target.value}),[e]),setDescription:Object(n.useCallback)(t=>e({type:"setDescription",description:t.target.value}),[e]),toggleState:Object(n.useCallback)(()=>e({type:"toggleEnabled"}),[e]),toggleZone:Object(n.useCallback)(t=>e({type:"toggleZone",zone:t}),[e]),toggleDevice:Object(n.useCallback)(t=>e({type:"toggleDevice",device:t}),[e])}},i=()=>{const e=Object(o.b)(),[t,a]=Object(n.useState)(!1),l=Object(n.useCallback)((t,n)=>{e({type:"setOverride",mode:t,temperature:n}),a(!0)},[e]),c=Object(n.useCallback)(t=>{e({type:"clearOverride",mode:t}),a(!0)},[e]),r=Object(n.useCallback)((e,t)=>{0===t?c(e):l(e,t)},[e]);return Object(n.useEffect)(()=>{a(!1)},[]),{isDirty:t,setOverride:l,clearOverride:c,updateOverride:r}},u=()=>{const[e,t]=Object(n.useState)(!1),a=Object(o.b)(),l=Object(n.useCallback)(e=>{a({type:"selectDay",day:e})},[a]),c=Object(o.c)("selectedDay"),r=Object(o.c)("setPoint"),s=Object(n.useCallback)((e,n)=>{null!=n&&n.length>0&&(t(!0),a({type:"copyDays",source:e,targets:n}))},[a]),i=Object(n.useCallback)(e=>{t(!0),a({type:"removeSetPoint",index:e})},[a]),u=Object(n.useCallback)(e=>{a({type:"loadSetPoint",setPoint:e})},[a]),d=Object(n.useCallback)(e=>{a({type:"newSetPoint",day:e})},[a]),b=Object(n.useCallback)(e=>{-1===e.index?a({type:"addSetPoint",setPoint:e}):a({type:"updateSetPoint",setPoint:e})},[a]),m=Object(n.useCallback)(e=>a({type:"setStart",start:e}),[a]),p=Object(n.useCallback)(e=>a({type:"setTargetTemperature",temperature:parseFloat(e.target.value)}),[a]);return Object(n.useEffect)(()=>{t(!1)},[]),{setDirty:t,isDirty:e,selectedDay:c,setPoint:r,copyDays:s,removeSetPoint:i,loadSetPoint:u,newSetPoint:d,selectDay:l,saveSetPoint:b,setStart:m,setTargetTemperature:p}};let d=!1;const b=(e,t=!0)=>{const a=Object(o.b)(),r=Object(o.c)("plan"),s=Object(o.c)("loaded"),i=Object(o.c)("dirty");if(!s||!t)if(null!=e&&"new"!==e||d){if(!d)throw c.b.fetchPlanById(e).then(e=>{d=!0,a({type:"loadPlan",plan:e})})}else d=!0,a({type:"loadPlan",plan:{id:l(),enabled:!1,name:"",zones:[],devices:[],schedule:[],overrides:void 0}});return Object(n.useEffect)(()=>()=>{d=!1},[e,t]),{plan:r,isDirty:i,loaded:s}}},146:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(148),l=a.n(n),c=a(49),o=a.n(c),r=a(47),s=a.n(r),i=a(147),u=a.n(i);const d=e=>{const t=Math.round(100*(a=Math.min(Math.max(16,e),24),n=16,c=24,r=1,i=8,Math.floor((i-r)*(a-n)/(c-n)+r))+100);var a,n,c,r,i;return e<=16?o.a[t]:e<=18.5?u.a[t]:e<=20.5?l.a[t]:s.a[t]}},177:function(e,t,a){"use strict";var n=a(228),l=a(14),c=a(178),o=a.n(c),r=a(0),s=a.n(r);t.a=Object(l.a)(e=>({fabButton:{zIndex:1,margin:"0 auto",position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}))(e=>{const{classes:t}=e;return s.a.createElement(n.a,{color:"secondary","aria-label":"Add",className:t.fabButton,onClick:()=>e.onClick()},s.a.createElement(o.a,null))})},179:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return y}));var n=a(255),l=a(14),c=a(202),o=a(47),r=a.n(o),s=a(181),i=a.n(s),u=a(0),d=a.n(u),b=a(146);const m=a(180),p=e=>({root:{fontSize:"1em",float:"left",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",width:45},avatar:{width:35,height:35,lineHeight:35,position:"relative",overflow:"hidden"},img:{width:35,height:35,zIndex:2,position:"absolute",left:0,bottom:0},fill:{display:"block",width:35,height:33,zIndex:1,position:"absolute",left:0,bottom:1}});function v(e,t){return(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)}const f=Object(l.a)(p)(e=>{const{value:t,classes:a,fill:l}=e;let{digits:c}=e;const o=(100===l?i.a:r.a)[500];return null==c&&(c=2),d.a.createElement("div",{className:a.root},d.a.createElement("div",{className:a.avatar},d.a.createElement("object",{className:a.img,data:m,type:"image/svg+xml"}),d.a.createElement("span",{style:{height:`calc(${l}% - 5px)`,background:o},className:a.fill})),d.a.createElement(n.a,{variant:"body1",color:"textSecondary",component:"div"},v(t,c),"°"))}),y=Object(l.a)(p)(e=>{const{value:t}=e;return d.a.createElement(c.a,{style:{padding:"25px",background:Object(b.a)(t),fontSize:"1em"}},v(t,1),"°")})},180:function(e,t,a){e.exports=a.p+"icon_black.svg?5136879a03a13f9fb18f241b081f38cb"},268:function(e,t,a){"use strict";a.r(t);var n=a(224),l=a(175),c=a(264),o=a(266),r=a(261),s=a(262),i=a(265),u=a(14),d=a(225),b=a(234),m=a(145),p=a.n(m),v=a(144),f=a.n(v),y=a(168),O=a.n(y),j=a(167),g=a.n(j),h=a(0),E=a.n(h),k=a(3),C=a(233),x=a(35),P=a(177),S=a(106),w=a(108),B=a(179),D=a(41),T=a(112),N=a(134),z=a(46);const F=E.a.lazy(()=>Promise.all([a.e(17),a.e(18)]).then(a.bind(null,229))),M=E.a.lazy(()=>Promise.all([a.e(1),a.e(2),a.e(15)]).then(a.bind(null,230)));function R(e){return e>9?e.toString():"0"+e}function I(e){return e+1>6?0:e+1}t.default=Object(k.f)(Object(u.a)(e=>({list:{marginTop:0,marginBottom:e.spacing(2)},tab:{minWidth:"50px"},avatar:{}}))(e=>{const{classes:t,location:a,history:u}=e,m=Object(z.b)(),[v,y]=E.a.useState(!1),[j,k]=E.a.useState(!1),[$,G]=E.a.useState(0),{plan:W,loaded:H}=Object(N.e)(e.match.params.id),{undo:L,commit:U}=Object(N.a)();E.a.useEffect(()=>{Q(0),y(!1),k(!1)},[a,H]);const{isDirty:A,setDirty:J,selectedDay:Z,copyDays:V,loadSetPoint:Y,newSetPoint:_,selectDay:q,removeSetPoint:K}=Object(N.d)(),Q=Object(h.useCallback)(e=>{G(e),q(I(e))},[m]);return E.a.createElement(E.a.Fragment,null,E.a.createElement(F,{open:j,onConfirm:e=>{V(I($),e),Q($),k(!1)},onCancel:()=>{k(!1)}}),E.a.createElement(M,{open:v,onClose:e=>{e&&(J(!0),Q($)),y(!1)}}),E.a.createElement(T.a,null,{header:E.a.createElement(S.a,null,{title:Object(D.a)("schedule.title"),button:E.a.createElement(w.b,{first:!0,onClick:function(){L(),u.replace({pathname:"/plans/"+W.id,state:!0})},icon:A?E.a.createElement(f.a,null):E.a.createElement(p.a,null)}),actions:E.a.createElement(E.a.Fragment,null,E.a.createElement(w.b,{onClick:()=>{k(!0)},icon:E.a.createElement(g.a,null)}),A&&E.a.createElement(n.a,{color:"inherit",onClick:function(){U(),u.replace({pathname:"/plans/"+W.id,state:!0})}},Object(D.a)("schedule.save"))),subBar:E.a.createElement(b.a,{value:$,onChange:(e,t)=>Q(t),variant:"fullWidth"},E.a.createElement(d.a,{classes:{root:e.classes.tab},disableRipple:!0,label:Object(D.a)("schedule.Monday")}),E.a.createElement(d.a,{classes:{root:e.classes.tab},disableRipple:!0,label:Object(D.a)("schedule.Tuesday")}),E.a.createElement(d.a,{classes:{root:e.classes.tab},disableRipple:!0,label:Object(D.a)("schedule.Wednesday")}),E.a.createElement(d.a,{classes:{root:e.classes.tab},disableRipple:!0,label:Object(D.a)("schedule.Thursday")}),E.a.createElement(d.a,{classes:{root:e.classes.tab},disableRipple:!0,label:Object(D.a)("schedule.Friday")}),E.a.createElement(d.a,{classes:{root:e.classes.tab},disableRipple:!0,label:Object(D.a)("schedule.Saturday")}),E.a.createElement(d.a,{classes:{root:e.classes.tab},disableRipple:!0,label:Object(D.a)("schedule.Sunday")}))}),paddingTop:100,paddingBottom:60,body:E.a.createElement(E.a.Fragment,null,E.a.createElement(C.a,{enabled:v||j,isolation:!1},E.a.createElement(r.a,{className:t.list},Z.last&&E.a.createElement(E.a.Fragment,{key:"-1"},E.a.createElement(s.a,{button:!0,onClick:()=>{return Q(0===(e=Z.last&&Z.last.day||0)?6:e-1);var e}},E.a.createElement(B.b,{value:Z.last.targetTemperature}),E.a.createElement(i.a,{primary:""+x.a[Z.last.day],secondary:`${R(Z.last.hour)}:${R(Z.last.minute)}`})),E.a.createElement(c.a,null)),Z.schedules.map(e=>E.a.createElement(E.a.Fragment,{key:e.index},E.a.createElement(s.a,{button:!0,onClick:()=>{return t=e,a=e.index,Y(Object.assign(Object.assign({},t),{index:a})),void y(!0);var t,a}},E.a.createElement(B.b,{value:e.targetTemperature}),E.a.createElement(i.a,{primary:`${R(e.hour)}:${R(e.minute)}`}),E.a.createElement(l.a,null,E.a.createElement(o.a,{className:t.menuButton,onClick:()=>{return t=e.index,K(t),void Q($);var t}},E.a.createElement(O.a,null)))),E.a.createElement(c.a,null))))),E.a.createElement(P.a,{onClick:function(){_(I($)),y(!0)}}))}))}))}}]);
//# sourceMappingURL=https://raw.githubusercontent.com/mskg/homey-heating/release/v2.0.0-rc6/settings/16.js.map