(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{102:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(101);function r(e,t,a=null){return Object(n.b)(this,void 0,void 0,(function*(){return yield new Promise((n,r)=>{Homey.api(e,t,a,(e,t)=>{e?r(e):n(t)})})}))}},105:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l}));var n=a(101),r=a(9),c=a(102);const o=e=>Object(n.b)(void 0,void 0,void 0,(function*(){const t=Object.assign({},e);return t.zones&&0!==t.zones.length||(t.zones=void 0),t.devices&&0!==t.devices.length||(t.devices=void 0),yield Object(c.a)("PUT","/plans/"+e.id,t)})),s={fetchPlans:()=>Object(n.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/plans");return Object(r.sortBy)(Object(r.map)(e,e=>(e.zones=e.zones||[],e.devices=e.devices||[],e)),e=>e.name)})),fetchPlanById:e=>Object(n.b)(void 0,void 0,void 0,(function*(){const t=yield Object(c.a)("GET","/plans/"+e);if(null==t)throw new Error(`Plan ${e} not found.`);return t.zones=t.zones||[],t.devices=t.devices||[],t})),fetchSchedule:()=>Object(n.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/schedule");return e.temperatures=Object(r.sortBy)(e.temperatures,[e=>e.device.name]),e})),updatePlan:o,removePlan:e=>Object(n.b)(void 0,void 0,void 0,(function*(){return yield Object(c.a)("DELETE","/plans/"+e)})),togglePlanState:e=>Object(n.b)(void 0,void 0,void 0,(function*(){return e.enabled=!e.enabled,yield o(e),!0}))},l={fetchMode:()=>Object(n.b)(void 0,void 0,void 0,(function*(){return(yield Object(c.a)("GET","/mode")).mode})),setMode:e=>Object(n.b)(void 0,void 0,void 0,(function*(){return yield Object(c.a)("PUT","/mode",{mode:e})}))}},106:function(e,t,a){"use strict";var n=a(252),r=a(14),c=a(254),o=a(255),s=a(0),l=a.n(s);t.a=Object(r.a)(e=>({appBar:{},grow:{flexGrow:1},buttons:{display:"flex"},toolbar:{alignItems:"center",justifyContent:"space-between"}}))(e=>{const{classes:t}=e,{button:a,title:r,actions:i,subBar:d}=e.children||{button:null,title:null,actions:null,subBar:null};return l.a.createElement(s.Fragment,null,l.a.createElement(n.a,{position:"absolute",color:"primary",className:t.appBar},l.a.createElement(c.a,{className:t.toolbar},e.button||a,l.a.createElement(o.a,{variant:"h6",color:"inherit",noWrap:!0},e.title||r),l.a.createElement("div",{className:t.grow}),null!=i&&l.a.createElement("div",{className:t.buttons},i)),null!=d&&d))})},107:function(e,t,a){"use strict";var n=a(14),r=a(0),c=a.n(r);t.a=Object(n.a)(e=>({inputContainer:{width:"100%",paddingLeft:e.spacing(2),paddingRight:e.spacing(3)}}))(e=>c.a.createElement("div",{className:e.classes.inputContainer},e.children))},108:function(e,t,a){"use strict";a.d(t,"a",(function(){return E})),a.d(t,"b",(function(){return C}));var n=a(101),r=a(255),c=a(264),o=a(261),s=a(265),l=a(266),i=a(14),d=a(263),u=a(122),b=a.n(u),m=a(0),p=a.n(m),v=a(3),O=a(41),g=a(262),f=a(42);function j(e){var{innerRef:t}=e,a=Object(n.d)(e,["innerRef"]);return a.to.toString().match(/https/)?p.a.createElement("a",Object.assign({onClick:()=>Homey.openURL(a.to.toString())},a),a.children):p.a.createElement(f.b,Object.assign({},a))}var y=e=>p.a.createElement(g.a,Object.assign({},e,{component:j}),e.children);const h=e=>({text:{padding:e.spacing(2),paddingBottom:0},version:{padding:e.spacing(2),paddingTop:0},normal:{},selected:{color:e.palette.primary.main},otherButton:{},firstButton:{marginLeft:-12}}),E=e=>{const[t,a]=p.a.useState(!1);return p.a.createElement(p.a.Fragment,null,p.a.createElement(x,{open:t,onClose:()=>{a(!1)}}),p.a.createElement(C,{first:!0,onClick:()=>{a(!0)},icon:p.a.createElement(b.a,null)}))},x=Object(v.f)(Object(i.a)(h)(e=>{const{classes:t}=e,a=[{type:"entry",to:"/",text:Object(O.a)("menu.plans")},{to:"/temperatures",text:Object(O.a)("menu.temperatures")},{to:"/schedules",text:Object(O.a)("menu.schedules")},{to:"/settings",text:Object(O.a)("menu.settings")},{to:"https://homey-heating.mskg.app",text:Object(O.a)("menu.help")}];return p.a.createElement(d.a,{open:e.open,onClose:e.onClose},p.a.createElement(r.a,{className:t.text,variant:"h5",gutterBottom:!0},Object(O.a)("menu.title")),p.a.createElement(r.a,{className:t.version,variant:"body2",color:"textSecondary",gutterBottom:!0},"Version ","2.0.0-rc6"," (",void 0,")"),p.a.createElement(c.a,null),p.a.createElement(o.a,null,a.map(a=>"Divider"===a.type?p.a.createElement(c.a,null):p.a.createElement(y,{key:a.to,to:a.to,disabled:e.match.url===a.to,button:!0},p.a.createElement(s.a,{primary:a.text,classes:{primary:e.match.url!==a.to?t.normal:t.selected}})))))})),C=Object(i.a)(h)(e=>{const{classes:t,first:a,icon:r}=e,c=Object(n.d)(e,["classes","first","icon"]);return p.a.createElement(l.a,Object.assign({className:a?t.firstButton:t.otherButton,color:"inherit"},c),r)})},112:function(e,t,a){"use strict";var n=a(14),r=a(0),c=a.n(r);t.a=Object(n.a)(e=>({root:{webkitOverflowScrolling:"touch",display:"flex",flexFlow:"column",height:"100vh",width:"100vw",backgroundColor:"#fff"},body:{flex:"1 0 100%",margin:0,maxWidth:"100%",overflowY:"scroll"}}))(e=>{const{classes:t}=e,{header:a,body:n,paddingTop:r,paddingBottom:o}=e.children,s=o||"auto";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:t.root},a,c.a.createElement("div",{className:t.body,style:{paddingTop:r,paddingBottom:s}},n)))})},113:function(e,t,a){"use strict";var n=a(101),r=a(14),c=a(255),o=a(0),s=a.n(o);t.a=Object(r.a)(e=>({text:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}))(e=>{const{classes:t,text:a}=e,r=Object(n.d)(e,["classes","text"]);return s.a.createElement(c.a,Object.assign({className:t.text,color:"textSecondary"},r),a)})},114:function(e,t,a){"use strict";var n=a(101),r=a(14),c=a(255),o=a(0),s=a.n(o);t.a=Object(r.a)(e=>({headline:{marginTop:e.spacing(4),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}))(e=>{const{classes:t,text:a}=e,r=Object(n.d)(e,["classes","text"]);return s.a.createElement(c.a,Object.assign({className:t.headline,variant:"h5",color:"textSecondary",gutterBottom:!0},r),a)})},116:function(e,t,a){"use strict";var n=a(101),r=a(279),c=a(0),o=a.n(c),s=a(107);t.a=e=>{var{classes:t}=e,a=Object(n.d)(e,["classes"]);return o.a.createElement(s.a,null,o.a.createElement(r.a,Object.assign({fullWidth:!0,margin:"normal"},a)))}},129:function(e,t,a){var n,r,c=a(139),o=a(140),s=0,l=0;e.exports=function(e,t,a){var i=t&&a||0,d=t||[],u=(e=e||{}).node||n,b=void 0!==e.clockseq?e.clockseq:r;if(null==u||null==b){var m=c();null==u&&(u=n=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==b&&(b=r=16383&(m[6]<<8|m[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:l+1,O=p-s+(v-l)/1e4;if(O<0&&void 0===e.clockseq&&(b=b+1&16383),(O<0||p>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,l=v,r=b;var g=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;d[i++]=g>>>24&255,d[i++]=g>>>16&255,d[i++]=g>>>8&255,d[i++]=255&g;var f=p/4294967296*1e4&268435455;d[i++]=f>>>8&255,d[i++]=255&f,d[i++]=f>>>24&15|16,d[i++]=f>>>16&255,d[i++]=b>>>8|128,d[i++]=255&b;for(var j=0;j<6;++j)d[i+j]=u[j];return t||o(d)}},134:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return b}));var n=a(0),r=a(129),c=a(105),o=a(46);const s=()=>{const e=Object(o.b)(),t=Object(o.c)("loaded"),a=Object(n.useCallback)(()=>e({type:"savePoint"}),[e]),r=Object(n.useCallback)(()=>e({type:"undo"}),[e]),c=Object(n.useCallback)(()=>e({type:"commit"}),[e]);return Object(n.useEffect)(()=>{a()},[t]),{savePoint:a,undo:r,commit:c}},l=()=>{const e=Object(o.b)();return{setName:Object(n.useCallback)(t=>e({type:"setName",name:t.target.value}),[e]),setDescription:Object(n.useCallback)(t=>e({type:"setDescription",description:t.target.value}),[e]),toggleState:Object(n.useCallback)(()=>e({type:"toggleEnabled"}),[e]),toggleZone:Object(n.useCallback)(t=>e({type:"toggleZone",zone:t}),[e]),toggleDevice:Object(n.useCallback)(t=>e({type:"toggleDevice",device:t}),[e])}},i=()=>{const e=Object(o.b)(),[t,a]=Object(n.useState)(!1),r=Object(n.useCallback)((t,n)=>{e({type:"setOverride",mode:t,temperature:n}),a(!0)},[e]),c=Object(n.useCallback)(t=>{e({type:"clearOverride",mode:t}),a(!0)},[e]),s=Object(n.useCallback)((e,t)=>{0===t?c(e):r(e,t)},[e]);return Object(n.useEffect)(()=>{a(!1)},[]),{isDirty:t,setOverride:r,clearOverride:c,updateOverride:s}},d=()=>{const[e,t]=Object(n.useState)(!1),a=Object(o.b)(),r=Object(n.useCallback)(e=>{a({type:"selectDay",day:e})},[a]),c=Object(o.c)("selectedDay"),s=Object(o.c)("setPoint"),l=Object(n.useCallback)((e,n)=>{null!=n&&n.length>0&&(t(!0),a({type:"copyDays",source:e,targets:n}))},[a]),i=Object(n.useCallback)(e=>{t(!0),a({type:"removeSetPoint",index:e})},[a]),d=Object(n.useCallback)(e=>{a({type:"loadSetPoint",setPoint:e})},[a]),u=Object(n.useCallback)(e=>{a({type:"newSetPoint",day:e})},[a]),b=Object(n.useCallback)(e=>{-1===e.index?a({type:"addSetPoint",setPoint:e}):a({type:"updateSetPoint",setPoint:e})},[a]),m=Object(n.useCallback)(e=>a({type:"setStart",start:e}),[a]),p=Object(n.useCallback)(e=>a({type:"setTargetTemperature",temperature:parseFloat(e.target.value)}),[a]);return Object(n.useEffect)(()=>{t(!1)},[]),{setDirty:t,isDirty:e,selectedDay:c,setPoint:s,copyDays:l,removeSetPoint:i,loadSetPoint:d,newSetPoint:u,selectDay:r,saveSetPoint:b,setStart:m,setTargetTemperature:p}};let u=!1;const b=(e,t=!0)=>{const a=Object(o.b)(),s=Object(o.c)("plan"),l=Object(o.c)("loaded"),i=Object(o.c)("dirty");if(!l||!t)if(null!=e&&"new"!==e||u){if(!u)throw c.b.fetchPlanById(e).then(e=>{u=!0,a({type:"loadPlan",plan:e})})}else u=!0,a({type:"loadPlan",plan:{id:r(),enabled:!1,name:"",zones:[],devices:[],schedule:[],overrides:void 0}});return Object(n.useEffect)(()=>()=>{u=!1},[e,t]),{plan:s,isDirty:i,loaded:l}}},139:function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);e.exports=function(){return a(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},140:function(e,t){for(var a=[],n=0;n<256;++n)a[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=a;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},145:function(e,t,a){"use strict";var n=a(109),r=a(110);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(0)),o=(0,n(a(111)).default)(c.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");t.default=o},176:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c})),function(e){e.TargetTemperature="target_temperature",e.MeasureTemperature="measure_temperature",e.ThermostatOverride="thermostat_override"}(n||(n={}));const r=4,c=35},278:function(e,t,a){"use strict";a.r(t);var n=a(224),r=a(14),c=a(145),o=a.n(c),s=a(144),l=a.n(s),i=a(0),d=a.n(i),u=a(3),b=a(35),m=a(106),p=a(113),v=a(108),O=a(267),g=a(226),f=a(176),j=a(41),y=a(116);var h=Object(r.a)(e=>({planOverride:{marginBottom:e.spacing(2)}}))(e=>d.a.createElement(i.Fragment,null,d.a.createElement("div",{className:e.classes.planOverride},d.a.createElement(O.a,{style:{marginLeft:0},control:d.a.createElement(g.a,{checked:e.enabled,onChange:(t,a)=>{e.setOverride(e.mode,a?0===e.targetTemperature?16:e.targetTemperature:0)}}),label:e.text,labelPlacement:"end"}),d.a.createElement(y.a,{label:Object(j.a)("plan.target.label"),placeholder:Object(j.a)("plan.target.placeholder"),disabled:!e.enabled,hidden:!e.enabled,type:"number",InputProps:{inputProps:{min:f.b,max:f.a,step:.5}},value:e.targetTemperature,onChange:t=>{e.setOverride(e.mode,parseFloat(t.target.value))}})))),E=a(114),x=a(112),C=a(134);t.default=Object(u.f)(Object(r.a)(e=>({resetPadding:{paddingBottom:100,paddingLeft:0,paddingRight:0}}))(e=>{const{history:t,classes:a}=e,{plan:r}=Object(C.e)(e.match.params.id),{isDirty:c,updateOverride:s}=Object(C.b)(),{undo:i,commit:u}=Object(C.a)();const O=e=>{const t=null!=r.overrides?r.overrides[b.b[e]]||r.overrides[e]:null;return{mode:e,enabled:null!=t&&0!==t.targetTemperature,targetTemperature:null!=t?t.targetTemperature:0}};return d.a.createElement(x.a,null,{header:d.a.createElement(m.a,null,{title:Object(j.a)("overrides.title"),button:d.a.createElement(v.b,{first:!0,onClick:function(){i(),t.replace({pathname:"/plans/"+r.id,state:!0})},icon:c?d.a.createElement(l.a,null):d.a.createElement(o.a,null)}),actions:d.a.createElement(d.a.Fragment,null,c&&d.a.createElement(n.a,{color:"inherit",onClick:function(){u(),t.replace({pathname:"/plans/"+r.id,state:!0})}},Object(j.a)("schedule.save")))}),paddingTop:50,body:d.a.createElement("div",{className:a.resetPadding},d.a.createElement(E.a,{text:Object(j.a)("overrides.section")}),d.a.createElement(p.a,{text:Object(j.a)("overrides.text")}),d.a.createElement(h,Object.assign({text:Object(j.a)("overrides.athome"),setOverride:s},O(b.b.DayAtHome))),d.a.createElement(h,Object.assign({text:Object(j.a)("overrides.away"),setOverride:s},O(b.b.DayAway))),d.a.createElement(h,Object.assign({text:Object(j.a)("overrides.sleeping"),setOverride:s},O(b.b.Sleep))),d.a.createElement(h,Object.assign({text:Object(j.a)("overrides.holiday"),setOverride:s},O(b.b.Holiday))),d.a.createElement(h,Object.assign({text:Object(j.a)("overrides.outofseason"),setOverride:s},O(b.b.OutOfSeason))))})}))}}]);
//# sourceMappingURL=https://raw.githubusercontent.com/mskg/homey-heating/release/v2.0.0-rc6/settings/12.js.map