/*! For license information please see pages_plan-exceptions_tsx.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["pages_plan-exceptions_tsx"],{"../app/services/homey-api/declarations.ts":(e,t,a)=>{var s;a.r(t),a.d(t,{CLASS_THERMOSTAT:()=>l,CapabilityType:()=>s,TARGET_TEMPERATURE_MAX:()=>n,TARGET_TEMPERATURE_MIN:()=>r}),function(e){e.TargetTemperature="target_temperature",e.MeasureTemperature="measure_temperature",e.ThermostatOverride="thermostat_override"}(s||(s={}));const l="thermostat",r=4,n=35},"./components/FormTextField.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a("../../node_modules/tslib/tslib.es6.js"),l=a("../../node_modules/@material-ui/core/esm/TextField/TextField.js"),r=a("../../node_modules/react/index.js"),n=a("./components/InputContainer.tsx");const o=e=>{var{classes:t}=e,a=(0,s.__rest)(e,["classes"]);return r.createElement(n.default,null,r.createElement(l.default,Object.assign({fullWidth:!0,margin:"normal"},a)))}},"./components/InputContainer.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a("../../node_modules/@material-ui/core/esm/styles/withStyles.js"),l=a("../../node_modules/react/index.js");const r=(0,s.default)((e=>({inputContainer:{width:"100%",paddingLeft:e.spacing(2),paddingRight:e.spacing(3)}})))((e=>l.createElement("div",{className:e.classes.inputContainer},e.children)))},"./components/OverrideSetting.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a("../../node_modules/@material-ui/core/esm/FormControlLabel/FormControlLabel.js"),l=a("../../node_modules/@material-ui/core/esm/styles/withStyles.js"),r=a("../../node_modules/@material-ui/core/esm/Switch/Switch.js"),n=a("../../node_modules/react/index.js"),o=a("../app/services/homey-api/declarations.ts"),d=a("./i18n/Translation.tsx"),i=a("./components/FormTextField.tsx");const u=(0,l.default)((e=>({planOverride:{marginBottom:e.spacing(2)}})))((e=>n.createElement(n.Fragment,null,n.createElement("div",{className:e.classes.planOverride},n.createElement(s.default,{style:{marginLeft:0},control:n.createElement(r.default,{checked:e.enabled,onChange:(t,a)=>{e.setOverride(e.mode,a?0===e.targetTemperature?16:e.targetTemperature:0)}}),label:e.text,labelPlacement:"end"}),n.createElement(i.default,{label:(0,d.default)("plan.target.label"),placeholder:(0,d.default)("plan.target.placeholder"),disabled:!e.enabled,hidden:!e.enabled,type:"number",InputProps:{inputProps:{min:o.TARGET_TEMPERATURE_MIN,max:o.TARGET_TEMPERATURE_MAX,step:.5}},value:e.targetTemperature,onChange:t=>{e.setOverride(e.mode,parseFloat(t.target.value))}})))))},"./pages/plan-exceptions.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a("../../node_modules/@material-ui/core/esm/Button/Button.js"),l=a("../../node_modules/@material-ui/core/esm/styles/withStyles.js"),r=a("../../node_modules/@material-ui/icons/ArrowBackIos.js"),n=a("../../node_modules/@material-ui/icons/Cancel.js"),o=a("../../node_modules/react/index.js"),d=a("../../node_modules/react-router/esm/react-router.js"),i=a("../app/model/index.ts"),u=a("./components/AppHeader.tsx"),c=a("./components/BodyText.tsx"),m=a("./components/Menu.tsx"),p=a("./components/OverrideSetting.tsx"),v=a("./components/SubHeader.tsx"),y=a("./i18n/Translation.tsx"),f=a("./layouts/Page.tsx"),g=a("./state/planHooks.tsx");const b=(0,d.withRouter)((0,l.default)((e=>({resetPadding:{paddingBottom:100,paddingLeft:0,paddingRight:0}})))((e=>{const{history:t,classes:a}=e,{plan:l}=(0,g.usePlan)(e.match.params.id),{isDirty:d,updateOverride:b}=(0,g.useModifyExceptions)(),{undo:x,commit:E}=(0,g.useHistory)(),P=e=>{const t=null!=l.overrides?l.overrides[i.OverrideMode[e]]||l.overrides[e]:null;return{mode:e,enabled:null!=t&&0!==t.targetTemperature,targetTemperature:null!=t?t.targetTemperature:0}};return o.createElement(f.default,null,{header:o.createElement(u.default,null,{title:(0,y.default)("overrides.title"),button:o.createElement(m.MenuButton,{first:!0,onClick:function(){x(),t.replace({pathname:`/plans/${l.id}`,state:!0})},icon:d?o.createElement(n.default,null):o.createElement(r.default,null)}),actions:o.createElement(o.Fragment,null,d&&o.createElement(s.default,{color:"inherit",onClick:function(){E(),t.replace({pathname:`/plans/${l.id}`,state:!0})}},(0,y.default)("schedule.save")))}),paddingTop:50,body:o.createElement("div",{className:a.resetPadding},o.createElement(v.default,{text:(0,y.default)("overrides.section")}),o.createElement(c.default,{text:(0,y.default)("overrides.text")}),o.createElement(p.default,Object.assign({text:(0,y.default)("overrides.athome"),setOverride:b},P(i.OverrideMode.DayAtHome))),o.createElement(p.default,Object.assign({text:(0,y.default)("overrides.away"),setOverride:b},P(i.OverrideMode.DayAway))),o.createElement(p.default,Object.assign({text:(0,y.default)("overrides.sleeping"),setOverride:b},P(i.OverrideMode.Sleep))),o.createElement(p.default,Object.assign({text:(0,y.default)("overrides.holiday"),setOverride:b},P(i.OverrideMode.Holiday))),o.createElement(p.default,Object.assign({text:(0,y.default)("overrides.outofseason"),setOverride:b},P(i.OverrideMode.OutOfSeason))))})})))},"./state/planHooks.tsx":(e,t,a)=>{a.r(t),a.d(t,{useHistory:()=>o,useModifyExceptions:()=>i,useModifyPlan:()=>d,useModifySetPoints:()=>u,usePlan:()=>m});var s=a("../../node_modules/react/index.js"),l=a("../../node_modules/uuid/v1.js"),r=a("./api/heating/index.tsx"),n=a("./state/PlanProvider.tsx");const o=()=>{const e=(0,n.usePlanDispatch)(),t=(0,n.usePlanGlobalState)("loaded"),a=(0,s.useCallback)((()=>e({type:"savePoint"})),[e]),l=(0,s.useCallback)((()=>e({type:"undo"})),[e]),r=(0,s.useCallback)((()=>e({type:"commit"})),[e]);return(0,s.useEffect)((()=>{a()}),[t]),{savePoint:a,undo:l,commit:r}},d=()=>{const e=(0,n.usePlanDispatch)();return{setName:(0,s.useCallback)((t=>e({type:"setName",name:t.target.value})),[e]),setDescription:(0,s.useCallback)((t=>e({type:"setDescription",description:t.target.value})),[e]),toggleState:(0,s.useCallback)((()=>e({type:"toggleEnabled"})),[e]),toggleZone:(0,s.useCallback)((t=>e({type:"toggleZone",zone:t})),[e]),toggleDevice:(0,s.useCallback)((t=>e({type:"toggleDevice",device:t})),[e])}},i=()=>{const e=(0,n.usePlanDispatch)(),[t,a]=(0,s.useState)(!1),l=(0,s.useCallback)(((t,s)=>{e({type:"setOverride",mode:t,temperature:s}),a(!0)}),[e]),r=(0,s.useCallback)((t=>{e({type:"clearOverride",mode:t}),a(!0)}),[e]),o=(0,s.useCallback)(((e,t)=>{0===t?r(e):l(e,t)}),[e]);return(0,s.useEffect)((()=>{a(!1)}),[]),{isDirty:t,setOverride:l,clearOverride:r,updateOverride:o}},u=()=>{const[e,t]=(0,s.useState)(!1),a=(0,n.usePlanDispatch)(),l=(0,s.useCallback)((e=>{a({type:"selectDay",day:e})}),[a]),r=(0,n.usePlanGlobalState)("selectedDay"),o=(0,n.usePlanGlobalState)("setPoint"),d=(0,s.useCallback)(((e,s)=>{null!=s&&s.length>0&&(t(!0),a({type:"copyDays",source:e,targets:s}))}),[a]),i=(0,s.useCallback)((e=>{t(!0),a({type:"removeSetPoint",index:e})}),[a]),u=(0,s.useCallback)((e=>{a({type:"loadSetPoint",setPoint:e})}),[a]),c=(0,s.useCallback)((e=>{a({type:"newSetPoint",day:e})}),[a]),m=(0,s.useCallback)((e=>{-1===e.index?a({type:"addSetPoint",setPoint:e}):a({type:"updateSetPoint",setPoint:e})}),[a]),p=(0,s.useCallback)((e=>a({type:"setStart",start:e})),[a]),v=(0,s.useCallback)((e=>a({type:"setTargetTemperature",temperature:parseFloat(e.target.value)})),[a]);return(0,s.useEffect)((()=>{t(!1)}),[]),{setDirty:t,isDirty:e,selectedDay:r,setPoint:o,copyDays:d,removeSetPoint:i,loadSetPoint:u,newSetPoint:c,selectDay:l,saveSetPoint:m,setStart:p,setTargetTemperature:v}};let c=!1;const m=(e,t=!0)=>{const a=(0,n.usePlanDispatch)(),o=(0,n.usePlanGlobalState)("plan"),d=(0,n.usePlanGlobalState)("loaded"),i=(0,n.usePlanGlobalState)("dirty");if(!d||!t)if(null!=e&&"new"!==e||c){if(!c)throw r.planAPI.fetchPlanById(e).then((e=>{c=!0,a({type:"loadPlan",plan:e})}))}else c=!0,a({type:"loadPlan",plan:{id:l(),enabled:!1,name:"",zones:[],devices:[],schedule:[],overrides:void 0}});return(0,s.useEffect)((()=>()=>{c=!1}),[e,t]),{plan:o,isDirty:i,loaded:d}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxPQUFPSCxVQUFXLENBQUNzQyxJQU0xSSxPQUpBLElBQUFNLFlBQVUsS0FDTlcsR0FBUyxFQUFNLEdBQ2hCLElBRUksQ0FBRUEsV0FBVXpDLFVBQVNpRCxjQUFhQyxXQUFVQyxXQUFVSyxpQkFBZ0JHLGVBQWNFLGNBQWFkLFlBQVdlLGVBQWNFLFdBQVVHLHVCQUFzQixFQUdySyxJQUFJQyxHQUFhLEVBQ1YsTUFBTXhFLEVBQVUsQ0FBQ0csRUFBWXNFLEdBQWdCLEtBQ2hELE1BQU03QyxHQUFXLElBQUFDLG1CQUVYOUIsR0FBTyxJQUFBZ0Msb0JBQW1CLFFBQzFCRCxHQUFTLElBQUFDLG9CQUFtQixVQUM1QjNCLEdBQVUsSUFBQTJCLG9CQUFtQixTQUVuQyxJQUFLRCxJQUFXMkMsRUFDWixHQUFXLE1BQU50RSxHQUFxQixRQUFQQSxHQUFrQnFFLEdBY2pDLElBQUtBLEVBQ0QsTUFBTSxFQUFBRSxRQUFBLGNBQXNCdkUsR0FBSXdFLE1BQU1DLElBQ2xDSixHQUFhLEVBQ2I1QyxFQUFTLENBQUU1QyxLQUFNLFdBQVllLEtBQU02RSxHQUFJLFNBaEIvQ0osR0FBYSxFQUNiNUMsRUFBUyxDQUNMNUMsS0FBTSxXQUFZZSxLQUFNLENBQ3BCSSxHQUFJLElBQ0ovQixTQUFTLEVBQ1RpRSxLQUFNLEdBQ053QyxNQUFPLEdBQ1BDLFFBQVMsR0FDVEMsU0FBVSxHQUNWbkUsZUFBV29FLEtBbUIzQixPQU5BLElBQUE5QyxZQUFVLElBQ0MsS0FDSHNDLEdBQWEsQ0FBSyxHQUV2QixDQUFDckUsRUFBSXNFLElBRUQsQ0FBRTFFLE9BQU1LLFVBQVMwQixTQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2FwcC9zZXJ2aWNlcy9ob21leS1hcGkvZGVjbGFyYXRpb25zLnRzIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvRm9ybVRleHRGaWVsZC50c3giLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9JbnB1dENvbnRhaW5lci50c3giLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9PdmVycmlkZVNldHRpbmcudHN4Iiwid2VicGFjazovLy8uL3BhZ2VzL3BsYW4tZXhjZXB0aW9ucy50c3giLCJ3ZWJwYWNrOi8vLy4vc3RhdGUvcGxhbkhvb2tzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBDYXBhYmlsaXR5VHlwZSB7XG4gICAgVGFyZ2V0VGVtcGVyYXR1cmUgPSBcInRhcmdldF90ZW1wZXJhdHVyZVwiLFxuICAgIE1lYXN1cmVUZW1wZXJhdHVyZSA9IFwibWVhc3VyZV90ZW1wZXJhdHVyZVwiLFxuXG4gICAgLy8gQ2FuIG5vdCBiZSBjYWxsZWQgbW9kZSBhcyB0aGlzIGlzIGEgc3RhbmRhcmQgY2FwYWJpbGl0eVxuICAgIFRoZXJtb3N0YXRPdmVycmlkZSA9IFwidGhlcm1vc3RhdF9vdmVycmlkZVwiLFxufVxuXG5leHBvcnQgY29uc3QgQ0xBU1NfVEhFUk1PU1RBVDogc3RyaW5nID0gXCJ0aGVybW9zdGF0XCI7XG5cbi8vIGZyb20gQ2FwYWJpbGl0eSDigJQgdGFyZ2V0X3RlbXBlcmF0dXJlXG5leHBvcnQgY29uc3QgVEFSR0VUX1RFTVBFUkFUVVJFX01JTiA9IDQ7XG5leHBvcnQgY29uc3QgVEFSR0VUX1RFTVBFUkFUVVJFX01BWCA9IDM1O1xuIiwiaW1wb3J0IFRleHRGaWVsZCwgeyBUZXh0RmllbGRQcm9wcyB9IGZyb20gXCJAbWF0ZXJpYWwtdWkvY29yZS9UZXh0RmllbGRcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBJbnB1dENvbnRhaW5lciBmcm9tIFwiLi9JbnB1dENvbnRhaW5lclwiO1xuXG5jb25zdCBGb3JtVGV4dEZpZWxkID0gKHsgY2xhc3NlcywgLi4ub3RoZXJQcm9wcyB9OiBUZXh0RmllbGRQcm9wcykgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxJbnB1dENvbnRhaW5lcj5cbiAgICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgICAgICBmdWxsV2lkdGg9e3RydWV9XG4gICAgICAgICAgICAgICAgbWFyZ2luPVwibm9ybWFsXCJcbiAgICAgICAgICAgICAgICB7Li4ub3RoZXJQcm9wc31cbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvSW5wdXRDb250YWluZXI+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1UZXh0RmllbGQ7XG4iLCJpbXBvcnQgeyBTdHlsZVJ1bGVzQ2FsbGJhY2ssIHdpdGhTdHlsZXMsIFdpdGhTdHlsZXMgfSBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmUvc3R5bGVzXCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IHN0eWxlczogU3R5bGVSdWxlc0NhbGxiYWNrPGFueSwgYW55PiA9ICh0aGVtZSkgPT4gKHtcbiAgICBpbnB1dENvbnRhaW5lcjoge1xuICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgIHBhZGRpbmdMZWZ0OiB0aGVtZS5zcGFjaW5nKDIpLFxuICAgICAgICBwYWRkaW5nUmlnaHQ6IHRoZW1lLnNwYWNpbmcoMyksXG4gICAgfSxcbn0pO1xuXG50eXBlIFByb3BzID0ge1xuICAgIGNoaWxkcmVuOiBSZWFjdC5SZWFjdEVsZW1lbnQ8YW55Pixcbn0gJiBXaXRoU3R5bGVzPHR5cGVvZiBzdHlsZXM+O1xuXG5jb25zdCBJbnB1dENvbnRhaW5lcjogUmVhY3QuRnVuY3Rpb25Db21wb25lbnQ8UHJvcHM+ID0gKHByb3BzKSA9PiB7XG4gICAgcmV0dXJuICg8ZGl2IGNsYXNzTmFtZT17cHJvcHMuY2xhc3Nlcy5pbnB1dENvbnRhaW5lcn0+e3Byb3BzLmNoaWxkcmVufTwvZGl2Pik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoU3R5bGVzKHN0eWxlcykoSW5wdXRDb250YWluZXIpO1xuIiwiaW1wb3J0IEZvcm1Db250cm9sTGFiZWwgZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlL0Zvcm1Db250cm9sTGFiZWxcIjtcbmltcG9ydCB7IFN0eWxlUnVsZXNDYWxsYmFjaywgd2l0aFN0eWxlcywgV2l0aFN0eWxlcyB9IGZyb20gXCJAbWF0ZXJpYWwtdWkvY29yZS9zdHlsZXNcIjtcbmltcG9ydCBTd2l0Y2ggZnJvbSBcIkBtYXRlcmlhbC11aS9jb3JlL1N3aXRjaFwiO1xuaW1wb3J0IFJlYWN0LCB7IEZyYWdtZW50IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBPdmVycmlkZU1vZGUgfSBmcm9tIFwiLi4vLi4vYXBwL21vZGVsXCI7XG5pbXBvcnQgeyBUQVJHRVRfVEVNUEVSQVRVUkVfTUFYLCBUQVJHRVRfVEVNUEVSQVRVUkVfTUlOIH0gZnJvbSBcIi4uLy4uL2FwcC9zZXJ2aWNlcy9ob21leS1hcGkvZGVjbGFyYXRpb25zXCI7XG5pbXBvcnQgdHJhbnNsYXRlIGZyb20gXCIuLi9pMThuL1RyYW5zbGF0aW9uXCI7XG5pbXBvcnQgRm9ybVRleHRGaWVsZCBmcm9tIFwiLi9Gb3JtVGV4dEZpZWxkXCI7XG5cbmNvbnN0IHN0eWxlczogU3R5bGVSdWxlc0NhbGxiYWNrPGFueSwgYW55PiA9ICh0aGVtZSkgPT4gKHtcbiAgICBwbGFuT3ZlcnJpZGU6IHtcbiAgICAgICAgbWFyZ2luQm90dG9tOiB0aGVtZS5zcGFjaW5nKDIpLFxuICAgIH0sXG59KTtcblxudHlwZSBQbGFuT3ZlcnJpZGVQcm9wcyA9IHtcbiAgICBtb2RlOiBPdmVycmlkZU1vZGUsXG4gICAgZW5hYmxlZDogYm9vbGVhbjtcbiAgICB0YXJnZXRUZW1wZXJhdHVyZTogbnVtYmVyLFxuXG4gICAgdGV4dDogc3RyaW5nLFxuICAgIHNldE92ZXJyaWRlOiAobW9kZTogT3ZlcnJpZGVNb2RlLCB0YXJnZXQ6IG51bWJlcikgPT4gdm9pZCxcbn0gJiBXaXRoU3R5bGVzPHR5cGVvZiBzdHlsZXM+O1xuXG5jb25zdCBPdmVycmlkZVNldHRpbmc6IFJlYWN0LkZ1bmN0aW9uQ29tcG9uZW50PFBsYW5PdmVycmlkZVByb3BzPiA9IChwcm9wcykgPT4ge1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPEZyYWdtZW50PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3Byb3BzLmNsYXNzZXMucGxhbk92ZXJyaWRlfT5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2xMYWJlbFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5MZWZ0OiAwIH19XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e1xuICAgICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3Byb3BzLmVuYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhfZSwgY2hlY2tlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zZXRPdmVycmlkZShwcm9wcy5tb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZCA/IChwcm9wcy50YXJnZXRUZW1wZXJhdHVyZSA9PT0gMCA/IDE2IDogcHJvcHMudGFyZ2V0VGVtcGVyYXR1cmUpIDogMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3Byb3BzLnRleHR9XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsUGxhY2VtZW50PVwiZW5kXCJcbiAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgPEZvcm1UZXh0RmllbGRcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3RyYW5zbGF0ZShcInBsYW4udGFyZ2V0LmxhYmVsXCIpfVxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dHJhbnNsYXRlKFwicGxhbi50YXJnZXQucGxhY2Vob2xkZXJcIil9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshcHJvcHMuZW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuPXshcHJvcHMuZW5hYmxlZH1cblxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgSW5wdXRQcm9wcz17eyBpbnB1dFByb3BzOiB7IG1pbjogVEFSR0VUX1RFTVBFUkFUVVJFX01JTiwgbWF4OiBUQVJHRVRfVEVNUEVSQVRVUkVfTUFYLCBzdGVwOiAwLjUgfSB9fVxuXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtwcm9wcy50YXJnZXRUZW1wZXJhdHVyZX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhldnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnNldE92ZXJyaWRlKHByb3BzLm1vZGUsIHBhcnNlRmxvYXQoZXZ0LnRhcmdldC52YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9GcmFnbWVudD5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFN0eWxlcyhzdHlsZXMpKE92ZXJyaWRlU2V0dGluZyk7XG4iLCJpbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQG1hdGVyaWFsLXVpL2NvcmVcIjtcbmltcG9ydCB7IFN0eWxlUnVsZXNDYWxsYmFjaywgd2l0aFN0eWxlcywgV2l0aFN0eWxlcyB9IGZyb20gXCJAbWF0ZXJpYWwtdWkvY29yZS9zdHlsZXNcIjtcbmltcG9ydCBCYWNrSWNvbiBmcm9tIFwiQG1hdGVyaWFsLXVpL2ljb25zL0Fycm93QmFja0lvc1wiO1xuaW1wb3J0IENhbmNlbEljb24gZnJvbSBcIkBtYXRlcmlhbC11aS9pY29ucy9DYW5jZWxcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFJvdXRlQ29tcG9uZW50UHJvcHMsIHdpdGhSb3V0ZXIgfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IHsgT3ZlcnJpZGVNb2RlIH0gZnJvbSBcIi4uLy4uL2FwcC9tb2RlbFwiO1xuaW1wb3J0IEFwcEhlYWRlciBmcm9tIFwiLi4vY29tcG9uZW50cy9BcHBIZWFkZXJcIjtcbmltcG9ydCBCb2R5VGV4dCBmcm9tIFwiLi4vY29tcG9uZW50cy9Cb2R5VGV4dFwiO1xuaW1wb3J0IHsgTWVudUJ1dHRvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL01lbnVcIjtcbmltcG9ydCBPdmVycmlkZVNldHRpbmcgZnJvbSBcIi4uL2NvbXBvbmVudHMvT3ZlcnJpZGVTZXR0aW5nXCI7XG5pbXBvcnQgU3ViSGVhZGVyIGZyb20gXCIuLi9jb21wb25lbnRzL1N1YkhlYWRlclwiO1xuaW1wb3J0IHRyYW5zbGF0ZSBmcm9tIFwiLi4vaTE4bi9UcmFuc2xhdGlvblwiO1xuaW1wb3J0IFBhZ2UgZnJvbSBcIi4uL2xheW91dHMvUGFnZVwiO1xuaW1wb3J0IHsgdXNlSGlzdG9yeSwgdXNlTW9kaWZ5RXhjZXB0aW9ucywgdXNlUGxhbiB9IGZyb20gXCIuLi9zdGF0ZS9wbGFuSG9va3NcIjtcblxuY29uc3Qgc3R5bGVzOiBTdHlsZVJ1bGVzQ2FsbGJhY2s8YW55LCBhbnk+ID0gKF90aGVtZSkgPT4gKHtcbiAgICByZXNldFBhZGRpbmc6IHtcbiAgICAgICAgcGFkZGluZ0JvdHRvbTogMTAwLFxuICAgICAgICBwYWRkaW5nTGVmdDogMCxcbiAgICAgICAgcGFkZGluZ1JpZ2h0OiAwLFxuICAgIH0sXG59KTtcblxudHlwZSBQYXJhbXMgPSB7XG4gICAgaWQ6IHN0cmluZztcbn07XG5cbnR5cGUgUHJvcHMgPSBXaXRoU3R5bGVzPHR5cGVvZiBzdHlsZXM+ICYgUm91dGVDb21wb25lbnRQcm9wczxQYXJhbXMsIHt9LCBib29sZWFuPjtcblxuY29uc3QgU2NoZWR1bGVFeGNlcHRpb25zUGFnZTogUmVhY3QuRnVuY3Rpb25Db21wb25lbnQ8UHJvcHM+ID0gKHByb3BzOiBQcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgaGlzdG9yeSwgY2xhc3NlcyB9ID0gcHJvcHM7XG5cbiAgICBjb25zdCB7IHBsYW4gfSA9IHVzZVBsYW4ocHJvcHMubWF0Y2gucGFyYW1zLmlkKTtcbiAgICBjb25zdCB7IGlzRGlydHksIHVwZGF0ZU92ZXJyaWRlIH0gPSB1c2VNb2RpZnlFeGNlcHRpb25zKCk7XG4gICAgY29uc3QgeyB1bmRvLCBjb21taXQgfSA9IHVzZUhpc3RvcnkoKTtcblxuICAgIGZ1bmN0aW9uIG9uQ2FuY2VsRGlhbG9nKCkge1xuICAgICAgICB1bmRvKCk7XG5cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBoaXN0b3J5LnJlcGxhY2Uoe1xuICAgICAgICAgICAgcGF0aG5hbWU6IGAvcGxhbnMvJHtwbGFuLmlkfWAsXG4gICAgICAgICAgICBzdGF0ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25TYXZlRGlhbG9nKCkge1xuICAgICAgICBjb21taXQoKTtcblxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGhpc3RvcnkucmVwbGFjZSh7XG4gICAgICAgICAgICBwYXRobmFtZTogYC9wbGFucy8ke3BsYW4uaWR9YCxcbiAgICAgICAgICAgIHN0YXRlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBnZXRPdmVycmlkZSA9IChtb2RlOiBPdmVycmlkZU1vZGUpID0+IHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGUgPSBwbGFuLm92ZXJyaWRlcyAhPSBudWxsXG4gICAgICAgICAgICAvLyBtYWRlIGFuIGVycm9yIGluIGZpcnN0IGltcGxlbWVudGF0aW9uIHN0b3JpbmcgdGhlIG51bWJlciBpbnN0ZWFkIG9mIHRoZSB2YWx1ZVxuICAgICAgICAgICAgPyAocGxhbi5vdmVycmlkZXNbT3ZlcnJpZGVNb2RlW21vZGVdXSB8fCBwbGFuLm92ZXJyaWRlc1ttb2RlXSlcbiAgICAgICAgICAgIDogbnVsbDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZSxcbiAgICAgICAgICAgIGVuYWJsZWQ6IG92ZXJyaWRlICE9IG51bGwgJiYgb3ZlcnJpZGUudGFyZ2V0VGVtcGVyYXR1cmUgIT09IDAsXG4gICAgICAgICAgICB0YXJnZXRUZW1wZXJhdHVyZTogb3ZlcnJpZGUgIT0gbnVsbCA/IG92ZXJyaWRlLnRhcmdldFRlbXBlcmF0dXJlIDogMCxcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPFBhZ2U+XG4gICAgICAgICAgICB7e1xuICAgICAgICAgICAgICAgIGhlYWRlcjogKFxuICAgICAgICAgICAgICAgICAgICA8QXBwSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICAgICAge3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdHJhbnNsYXRlKFwib3ZlcnJpZGVzLnRpdGxlXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbjogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWVudUJ1dHRvbiBmaXJzdD17dHJ1ZX0gb25DbGljaz17b25DYW5jZWxEaWFsb2d9IGljb249e2lzRGlydHkgPyA8Q2FuY2VsSWNvbiAvPiA6IDxCYWNrSWNvbiAvPn0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnM6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzRGlydHkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIGNvbG9yPVwiaW5oZXJpdFwiIG9uQ2xpY2s9e29uU2F2ZURpYWxvZ30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0cmFuc2xhdGUoXCJzY2hlZHVsZS5zYXZlXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICA8L0FwcEhlYWRlcj5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6IDUwLFxuICAgICAgICAgICAgICAgIGJvZHk6IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMucmVzZXRQYWRkaW5nfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTdWJIZWFkZXIgdGV4dD17dHJhbnNsYXRlKFwib3ZlcnJpZGVzLnNlY3Rpb25cIil9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Qm9keVRleHQgdGV4dD17dHJhbnNsYXRlKFwib3ZlcnJpZGVzLnRleHRcIil9IC8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxPdmVycmlkZVNldHRpbmcgdGV4dD17dHJhbnNsYXRlKFwib3ZlcnJpZGVzLmF0aG9tZVwiKX0gc2V0T3ZlcnJpZGU9e3VwZGF0ZU92ZXJyaWRlfSB7Li4uZ2V0T3ZlcnJpZGUoT3ZlcnJpZGVNb2RlLkRheUF0SG9tZSl9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8T3ZlcnJpZGVTZXR0aW5nIHRleHQ9e3RyYW5zbGF0ZShcIm92ZXJyaWRlcy5hd2F5XCIpfSBzZXRPdmVycmlkZT17dXBkYXRlT3ZlcnJpZGV9IHsuLi5nZXRPdmVycmlkZShPdmVycmlkZU1vZGUuRGF5QXdheSl9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8T3ZlcnJpZGVTZXR0aW5nIHRleHQ9e3RyYW5zbGF0ZShcIm92ZXJyaWRlcy5zbGVlcGluZ1wiKX0gc2V0T3ZlcnJpZGU9e3VwZGF0ZU92ZXJyaWRlfSB7Li4uZ2V0T3ZlcnJpZGUoT3ZlcnJpZGVNb2RlLlNsZWVwKX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxPdmVycmlkZVNldHRpbmcgdGV4dD17dHJhbnNsYXRlKFwib3ZlcnJpZGVzLmhvbGlkYXlcIil9IHNldE92ZXJyaWRlPXt1cGRhdGVPdmVycmlkZX0gey4uLmdldE92ZXJyaWRlKE92ZXJyaWRlTW9kZS5Ib2xpZGF5KX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxPdmVycmlkZVNldHRpbmcgdGV4dD17dHJhbnNsYXRlKFwib3ZlcnJpZGVzLm91dG9mc2Vhc29uXCIpfSBzZXRPdmVycmlkZT17dXBkYXRlT3ZlcnJpZGV9IHsuLi5nZXRPdmVycmlkZShPdmVycmlkZU1vZGUuT3V0T2ZTZWFzb24pfSAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgPC9QYWdlPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKHdpdGhTdHlsZXMoc3R5bGVzKShTY2hlZHVsZUV4Y2VwdGlvbnNQYWdlKSk7XG4iLCJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICogYXMgdXVpZHYxIGZyb20gXCJ1dWlkL3YxXCI7XG5pbXBvcnQgeyBPdmVycmlkZU1vZGUgfSBmcm9tIFwiLi4vLi4vYXBwL21vZGVsXCI7XG5pbXBvcnQgeyBwbGFuQVBJIH0gZnJvbSBcIi4uL2FwaS9oZWF0aW5nXCI7XG5pbXBvcnQgeyB1c2VQbGFuRGlzcGF0Y2gsIHVzZVBsYW5HbG9iYWxTdGF0ZSB9IGZyb20gXCIuL1BsYW5Qcm92aWRlclwiO1xuXG5leHBvcnQgY29uc3QgdXNlSGlzdG9yeSA9ICgpID0+IHtcbiAgICBjb25zdCBkaXNwYXRjaCA9IHVzZVBsYW5EaXNwYXRjaCgpO1xuICAgIGNvbnN0IGxvYWRlZCA9IHVzZVBsYW5HbG9iYWxTdGF0ZShcImxvYWRlZFwiKTtcblxuICAgIGNvbnN0IHNhdmVQb2ludCA9IHVzZUNhbGxiYWNrKCgpID0+IGRpc3BhdGNoKHsgdHlwZTogXCJzYXZlUG9pbnRcIiB9KSwgW2Rpc3BhdGNoXSk7XG4gICAgY29uc3QgdW5kbyA9IHVzZUNhbGxiYWNrKCgpID0+IGRpc3BhdGNoKHsgdHlwZTogXCJ1bmRvXCIgfSksIFtkaXNwYXRjaF0pO1xuICAgIGNvbnN0IGNvbW1pdCA9IHVzZUNhbGxiYWNrKCgpID0+IGRpc3BhdGNoKHsgdHlwZTogXCJjb21taXRcIiB9KSwgW2Rpc3BhdGNoXSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzYXZlUG9pbnQoKTtcbiAgICB9LCBbbG9hZGVkXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBzYXZlUG9pbnQsIHVuZG8sIGNvbW1pdCxcbiAgICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZU1vZGlmeVBsYW4gPSAoKSA9PiB7XG4gICAgY29uc3QgZGlzcGF0Y2ggPSB1c2VQbGFuRGlzcGF0Y2goKTtcblxuICAgIGNvbnN0IHNldE5hbWUgPSB1c2VDYWxsYmFjaygoZXZ0KSA9PiBkaXNwYXRjaCh7IHR5cGU6IFwic2V0TmFtZVwiLCBuYW1lOiBldnQudGFyZ2V0LnZhbHVlIH0pLCBbZGlzcGF0Y2hdKTtcbiAgICBjb25zdCBzZXREZXNjcmlwdGlvbiA9IHVzZUNhbGxiYWNrKChldnQpID0+IGRpc3BhdGNoKHsgdHlwZTogXCJzZXREZXNjcmlwdGlvblwiLCBkZXNjcmlwdGlvbjogZXZ0LnRhcmdldC52YWx1ZSB9KSwgW2Rpc3BhdGNoXSk7XG5cbiAgICBjb25zdCB0b2dnbGVTdGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IGRpc3BhdGNoKHsgdHlwZTogXCJ0b2dnbGVFbmFibGVkXCIgfSksIFtkaXNwYXRjaF0pO1xuICAgIGNvbnN0IHRvZ2dsZVpvbmUgPSB1c2VDYWxsYmFjaygoaWQpID0+IGRpc3BhdGNoKHsgdHlwZTogXCJ0b2dnbGVab25lXCIsIHpvbmU6IGlkIH0pLCBbZGlzcGF0Y2hdKTtcbiAgICBjb25zdCB0b2dnbGVEZXZpY2UgPSB1c2VDYWxsYmFjaygoaWQpID0+IGRpc3BhdGNoKHsgdHlwZTogXCJ0b2dnbGVEZXZpY2VcIiwgZGV2aWNlOiBpZCB9KSwgW2Rpc3BhdGNoXSk7XG5cbiAgICByZXR1cm4geyBzZXROYW1lLCBzZXREZXNjcmlwdGlvbiwgdG9nZ2xlU3RhdGUsIHRvZ2dsZVpvbmUsIHRvZ2dsZURldmljZSB9O1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZU1vZGlmeUV4Y2VwdGlvbnMgPSAoKSA9PiB7XG4gICAgY29uc3QgZGlzcGF0Y2ggPSB1c2VQbGFuRGlzcGF0Y2goKTtcbiAgICBjb25zdCBbaXNEaXJ0eSwgc2V0RGlydHldID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gICAgY29uc3Qgc2V0T3ZlcnJpZGUgPSB1c2VDYWxsYmFjaygobW9kZSwgdGVtcCkgPT4ge1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IFwic2V0T3ZlcnJpZGVcIiwgbW9kZSwgdGVtcGVyYXR1cmU6IHRlbXAgfSk7XG4gICAgICAgIHNldERpcnR5KHRydWUpO1xuICAgIH0sIFtkaXNwYXRjaF0pO1xuXG4gICAgY29uc3QgY2xlYXJPdmVycmlkZSA9IHVzZUNhbGxiYWNrKChtb2RlKSA9PiB7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogXCJjbGVhck92ZXJyaWRlXCIsIG1vZGUgfSk7XG4gICAgICAgIHNldERpcnR5KHRydWUpO1xuICAgIH0sIFtkaXNwYXRjaF0pO1xuXG4gICAgY29uc3QgdXBkYXRlT3ZlcnJpZGUgPSB1c2VDYWxsYmFjaygobW9kZTogT3ZlcnJpZGVNb2RlLCB0YXJnZXQ6IG51bWJlcikgPT4ge1xuICAgICAgICBpZiAodGFyZ2V0ID09PSAwKSB7IGNsZWFyT3ZlcnJpZGUobW9kZSk7IH0gZWxzZSB7IHNldE92ZXJyaWRlKG1vZGUsIHRhcmdldCk7IH1cbiAgICB9LCBbZGlzcGF0Y2hdKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldERpcnR5KGZhbHNlKTtcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4geyBpc0RpcnR5LCBzZXRPdmVycmlkZSwgY2xlYXJPdmVycmlkZSwgdXBkYXRlT3ZlcnJpZGUgfTtcbn07XG5cbmV4cG9ydCBjb25zdCB1c2VNb2RpZnlTZXRQb2ludHMgPSAoKSA9PiB7XG4gICAgY29uc3QgW2lzRGlydHksIHNldERpcnR5XSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcblxuICAgIGNvbnN0IGRpc3BhdGNoID0gdXNlUGxhbkRpc3BhdGNoKCk7XG5cbiAgICBjb25zdCBzZWxlY3REYXkgPSB1c2VDYWxsYmFjaygoZGF5KSA9PiB7IGRpc3BhdGNoKHsgdHlwZTogXCJzZWxlY3REYXlcIiwgZGF5IH0pOyB9LCBbZGlzcGF0Y2hdKTtcbiAgICBjb25zdCBzZWxlY3RlZERheSA9IHVzZVBsYW5HbG9iYWxTdGF0ZShcInNlbGVjdGVkRGF5XCIpO1xuICAgIGNvbnN0IHNldFBvaW50ID0gdXNlUGxhbkdsb2JhbFN0YXRlKFwic2V0UG9pbnRcIik7XG5cbiAgICBjb25zdCBjb3B5RGF5cyA9IHVzZUNhbGxiYWNrKChzb3VyY2UsIGRheXMpID0+IHtcbiAgICAgICAgaWYgKGRheXMgIT0gbnVsbCAmJiBkYXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNldERpcnR5KHRydWUpO1xuICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBcImNvcHlEYXlzXCIsIHNvdXJjZSwgdGFyZ2V0czogZGF5cyB9KTtcbiAgICAgICAgfVxuICAgIH0sIFtkaXNwYXRjaF0pO1xuXG4gICAgY29uc3QgcmVtb3ZlU2V0UG9pbnQgPSB1c2VDYWxsYmFjaygoaWR4KSA9PiB7IHNldERpcnR5KHRydWUpOyBkaXNwYXRjaCh7IHR5cGU6IFwicmVtb3ZlU2V0UG9pbnRcIiwgaW5kZXg6IGlkeCB9KTsgfSwgW2Rpc3BhdGNoXSk7XG5cbiAgICBjb25zdCBsb2FkU2V0UG9pbnQgPSB1c2VDYWxsYmFjaygocG9pbnQpID0+IHsgZGlzcGF0Y2goeyB0eXBlOiBcImxvYWRTZXRQb2ludFwiLCBzZXRQb2ludDogcG9pbnQgfSk7IH0sIFtkaXNwYXRjaF0pO1xuICAgIGNvbnN0IG5ld1NldFBvaW50ID0gdXNlQ2FsbGJhY2soKGRheSkgPT4geyBkaXNwYXRjaCh7IHR5cGU6IFwibmV3U2V0UG9pbnRcIiwgZGF5IH0pOyB9LCBbZGlzcGF0Y2hdKTtcblxuICAgIGNvbnN0IHNhdmVTZXRQb2ludCA9IHVzZUNhbGxiYWNrKChzKSA9PiB7XG4gICAgICAgIGlmIChzLmluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBcImFkZFNldFBvaW50XCIsIHNldFBvaW50OiBzIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBcInVwZGF0ZVNldFBvaW50XCIsIHNldFBvaW50OiBzIH0pO1xuICAgICAgICB9XG4gICAgfSwgW2Rpc3BhdGNoXSk7XG5cbiAgICBjb25zdCBzZXRTdGFydCA9IHVzZUNhbGxiYWNrKChkYXRlOiBEYXRlIHwgc3RyaW5nKSA9PiBkaXNwYXRjaCh7IHR5cGU6IFwic2V0U3RhcnRcIiwgc3RhcnQ6IGRhdGUgfSksIFtkaXNwYXRjaF0pO1xuICAgIGNvbnN0IHNldFRhcmdldFRlbXBlcmF0dXJlID0gdXNlQ2FsbGJhY2soKGV2dCkgPT4gZGlzcGF0Y2goeyB0eXBlOiBcInNldFRhcmdldFRlbXBlcmF0dXJlXCIsIHRlbXBlcmF0dXJlOiBwYXJzZUZsb2F0KGV2dC50YXJnZXQudmFsdWUpIH0pLCBbZGlzcGF0Y2hdKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldERpcnR5KGZhbHNlKTtcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4geyBzZXREaXJ0eSwgaXNEaXJ0eSwgc2VsZWN0ZWREYXksIHNldFBvaW50LCBjb3B5RGF5cywgcmVtb3ZlU2V0UG9pbnQsIGxvYWRTZXRQb2ludCwgbmV3U2V0UG9pbnQsIHNlbGVjdERheSwgc2F2ZVNldFBvaW50LCBzZXRTdGFydCwgc2V0VGFyZ2V0VGVtcGVyYXR1cmUgfTtcbn07XG5cbmxldCBjYWNoZWRQbGFuID0gZmFsc2U7XG5leHBvcnQgY29uc3QgdXNlUGxhbiA9IChpZDogc3RyaW5nLCBrZWVwOiBib29sZWFuID0gdHJ1ZSkgPT4ge1xuICAgIGNvbnN0IGRpc3BhdGNoID0gdXNlUGxhbkRpc3BhdGNoKCk7XG5cbiAgICBjb25zdCBwbGFuID0gdXNlUGxhbkdsb2JhbFN0YXRlKFwicGxhblwiKTtcbiAgICBjb25zdCBsb2FkZWQgPSB1c2VQbGFuR2xvYmFsU3RhdGUoXCJsb2FkZWRcIik7XG4gICAgY29uc3QgaXNEaXJ0eSA9IHVzZVBsYW5HbG9iYWxTdGF0ZShcImRpcnR5XCIpO1xuXG4gICAgaWYgKCFsb2FkZWQgfHwgIWtlZXApIHtcbiAgICAgICAgaWYgKChpZCA9PSBudWxsIHx8IGlkID09PSBcIm5ld1wiKSAmJiAhY2FjaGVkUGxhbikge1xuICAgICAgICAgICAgY2FjaGVkUGxhbiA9IHRydWU7XG4gICAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJsb2FkUGxhblwiLCBwbGFuOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB1dWlkdjEoKSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIHpvbmVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlczogW10sXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGVzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFjYWNoZWRQbGFuKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgcGxhbkFQSS5mZXRjaFBsYW5CeUlkKGlkKS50aGVuKChwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlZFBsYW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IFwibG9hZFBsYW5cIiwgcGxhbjogcCB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjYWNoZWRQbGFuID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfSwgW2lkLCBrZWVwXSk7XG5cbiAgICByZXR1cm4geyBwbGFuLCBpc0RpcnR5LCBsb2FkZWQgfTtcbn07XG4iXSwibmFtZXMiOlsiQ2FwYWJpbGl0eVR5cGUiLCJDTEFTU19USEVSTU9TVEFUIiwiVEFSR0VUX1RFTVBFUkFUVVJFX01JTiIsIlRBUkdFVF9URU1QRVJBVFVSRV9NQVgiLCJjbGFzc2VzIiwib3RoZXJQcm9wcyIsImZ1bGxXaWR0aCIsIm1hcmdpbiIsInRoZW1lIiwiaW5wdXRDb250YWluZXIiLCJ3aWR0aCIsInBhZGRpbmdMZWZ0Iiwic3BhY2luZyIsInBhZGRpbmdSaWdodCIsInByb3BzIiwiY2xhc3NOYW1lIiwiY2hpbGRyZW4iLCJwbGFuT3ZlcnJpZGUiLCJtYXJnaW5Cb3R0b20iLCJGcmFnbWVudCIsInN0eWxlIiwibWFyZ2luTGVmdCIsImNvbnRyb2wiLCJjaGVja2VkIiwiZW5hYmxlZCIsIm9uQ2hhbmdlIiwiX2UiLCJzZXRPdmVycmlkZSIsIm1vZGUiLCJ0YXJnZXRUZW1wZXJhdHVyZSIsImxhYmVsIiwidGV4dCIsImxhYmVsUGxhY2VtZW50IiwicGxhY2Vob2xkZXIiLCJkaXNhYmxlZCIsImhpZGRlbiIsInR5cGUiLCJJbnB1dFByb3BzIiwiaW5wdXRQcm9wcyIsIm1pbiIsIm1heCIsInN0ZXAiLCJ2YWx1ZSIsImV2dCIsInBhcnNlRmxvYXQiLCJ0YXJnZXQiLCJ3aXRoUm91dGVyIiwiX3RoZW1lIiwicmVzZXRQYWRkaW5nIiwicGFkZGluZ0JvdHRvbSIsImhpc3RvcnkiLCJwbGFuIiwidXNlUGxhbiIsIm1hdGNoIiwicGFyYW1zIiwiaWQiLCJpc0RpcnR5IiwidXBkYXRlT3ZlcnJpZGUiLCJ1c2VNb2RpZnlFeGNlcHRpb25zIiwidW5kbyIsImNvbW1pdCIsInVzZUhpc3RvcnkiLCJnZXRPdmVycmlkZSIsIm92ZXJyaWRlIiwib3ZlcnJpZGVzIiwiT3ZlcnJpZGVNb2RlIiwiaGVhZGVyIiwidGl0bGUiLCJidXR0b24iLCJNZW51QnV0dG9uIiwiZmlyc3QiLCJvbkNsaWNrIiwicmVwbGFjZSIsInBhdGhuYW1lIiwic3RhdGUiLCJpY29uIiwiYWN0aW9ucyIsImNvbG9yIiwicGFkZGluZ1RvcCIsImJvZHkiLCJkaXNwYXRjaCIsInVzZVBsYW5EaXNwYXRjaCIsImxvYWRlZCIsInVzZVBsYW5HbG9iYWxTdGF0ZSIsInNhdmVQb2ludCIsInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlTW9kaWZ5UGxhbiIsInNldE5hbWUiLCJuYW1lIiwic2V0RGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsInRvZ2dsZVN0YXRlIiwidG9nZ2xlWm9uZSIsInpvbmUiLCJ0b2dnbGVEZXZpY2UiLCJkZXZpY2UiLCJzZXREaXJ0eSIsInVzZVN0YXRlIiwidGVtcCIsInRlbXBlcmF0dXJlIiwiY2xlYXJPdmVycmlkZSIsInVzZU1vZGlmeVNldFBvaW50cyIsInNlbGVjdERheSIsImRheSIsInNlbGVjdGVkRGF5Iiwic2V0UG9pbnQiLCJjb3B5RGF5cyIsInNvdXJjZSIsImRheXMiLCJsZW5ndGgiLCJ0YXJnZXRzIiwicmVtb3ZlU2V0UG9pbnQiLCJpZHgiLCJpbmRleCIsImxvYWRTZXRQb2ludCIsInBvaW50IiwibmV3U2V0UG9pbnQiLCJzYXZlU2V0UG9pbnQiLCJzIiwic2V0U3RhcnQiLCJkYXRlIiwic3RhcnQiLCJzZXRUYXJnZXRUZW1wZXJhdHVyZSIsImNhY2hlZFBsYW4iLCJrZWVwIiwicGxhbkFQSSIsInRoZW4iLCJwIiwiem9uZXMiLCJkZXZpY2VzIiwic2NoZWR1bGUiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9