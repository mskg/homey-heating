"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[577],{4746:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(5163);function l(e,t,n=null){return(0,o.mG)(this,void 0,void 0,(function*(){return yield new Promise(((o,l)=>{Homey.api(e,t,n,((e,t)=>{e?l(e):o(t)}))}))}))}},3834:(e,t,n)=>{n.d(t,{i:()=>c});var o=n(5163),l=n(6635),a=n(4746);const c={fetchHeatingDevices:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,a.Z)("GET","/devices"),t=(0,l.sortBy)(e,"name").reduce(((e,t,n)=>(e[n]=t,e[t.id]=t,e)),{});return t.length=e.length,t}))}},8681:(e,t,n)=>{n.d(t,{M:()=>s,X:()=>r});var o=n(5163),l=n(6635),a=n(4746);const c=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=Object.assign({},e);return t.zones&&0!==t.zones.length||(t.zones=void 0),t.devices&&0!==t.devices.length||(t.devices=void 0),yield(0,a.Z)("PUT",`/plans/${e.id}`,t)})),s={fetchPlans:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,a.Z)("GET","/plans");return(0,l.sortBy)((0,l.map)(e,(e=>(e.zones=e.zones||[],e.devices=e.devices||[],e))),(e=>e.name))})),fetchPlanById:e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=yield(0,a.Z)("GET",`/plans/${e}`);if(null==t)throw new Error(`Plan ${e} not found.`);return t.zones=t.zones||[],t.devices=t.devices||[],t})),fetchSchedule:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,a.Z)("GET","/schedule");return e.temperatures=(0,l.sortBy)(e.temperatures,[e=>e.device.name]),e})),updatePlan:c,removePlan:e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return yield(0,a.Z)("DELETE",`/plans/${e}`)})),togglePlanState:e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return e.enabled=!e.enabled,yield c(e),!0}))},r={fetchMode:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield(0,a.Z)("GET","/mode")).mode})),setMode:e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return yield(0,a.Z)("PUT","/mode",{mode:e})}))}},2094:(e,t,n)=>{n.d(t,{Ls:()=>g,yU:()=>p,xn:()=>m,Si:()=>v,rV:()=>Z,HT:()=>h});var o=n(3834),l=n(8681),a=n(2817),c=n(5163),s=n(2784);const r=new Map,i="Loading...";function d(e,t){return(n=!1,o=!1)=>{const l=r.get(e);let[a,d]=[null,null];n&&([a,d]=s.useState(l!==i?l:null));const[u,m]=s.useState(!1);function g(n=!1){if(null==r.get(e)||n)throw r.set(e,i),function(e,t){return(0,c.mG)(this,void 0,void 0,(function*(){try{t(yield e())}catch(e){t((()=>{throw e}))}}))}(t,(t=>{"function"==typeof t?r.set(e,t(r.get(e))):r.set(e,t)})).catch((e=>{m(!!o||(()=>{throw e}))}))}return g(),(0,s.useEffect)((()=>()=>{r.delete(e)}),[]),{[e]:n?a:l,[`set${e.charAt(0).toUpperCase()+e.slice(1)}`]:n?d:function(){},[`load${e.charAt(0).toUpperCase()+e.slice(1)}`]:g,[`load${e.charAt(0).toUpperCase()+e.slice(1)}Failed`]:u}}}var u=n(8516);const m=d("plans",l.M.fetchPlans),g=d("devices",o.i.fetchHeatingDevices),h=d("zones",u.v.fetchHeatingZones),v=d("scheduleInformation",l.M.fetchSchedule),Z=d("settings",a.w.fetchSettings),p=d("mode",l.X.fetchMode)},2817:(e,t,n)=>{n.d(t,{w:()=>a});var o=n(5163),l=n(4746);const a={fetchSettings:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return yield(0,l.Z)("GET","/settings")})),updateSettings:e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return yield(0,l.Z)("PUT","/settings",e)}))}},8516:(e,t,n)=>{n.d(t,{v:()=>c});var o=n(5163),l=n(6635),a=n(4746);const c={fetchHeatingZones:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const e=yield(0,a.Z)("GET","/zones"),t=(0,l.sortBy)(e,"name").reduce(((e,t,n)=>(e[n]=t,e[t.id]=t,e)),{});return t.length=e.length,t}))}},5030:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(331),l=n(2511),a=n(5223),c=n(436),s=n(2784);const r=(0,l.Z)((e=>({appBar:{},grow:{flexGrow:1},buttons:{display:"flex"},toolbar:{alignItems:"center",justifyContent:"space-between"}})))((e=>{const{classes:t}=e,{button:n,title:l,actions:r,subBar:i}=e.children||{button:null,title:null,actions:null,subBar:null};return s.createElement(s.Fragment,null,s.createElement(o.Z,{position:"absolute",color:"primary",className:t.appBar},s.createElement(a.Z,{className:t.toolbar},e.button||n,s.createElement(c.Z,{variant:"h6",color:"inherit",noWrap:!0},e.title||l),s.createElement("div",{className:t.grow}),null!=r&&s.createElement("div",{className:t.buttons},r)),null!=i&&i))}))},7606:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(5163),l=n(2511),a=n(436),c=n(2784);const s=(0,l.Z)((e=>({text:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}})))((e=>{const{classes:t,text:n}=e,l=(0,o._T)(e,["classes","text"]);return c.createElement(a.Z,Object.assign({className:t.text,color:"textSecondary"},l),n)}))},3547:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(5163),l=n(7869),a=n(2784),c=n(9503);const s=e=>{var{classes:t}=e,n=(0,o._T)(e,["classes"]);return a.createElement(c.Z,null,a.createElement(l.Z,Object.assign({fullWidth:!0,margin:"normal"},n)))}},9503:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(2511),l=n(2784);const a=(0,o.Z)((e=>({inputContainer:{width:"100%",paddingLeft:e.spacing(2),paddingRight:e.spacing(3)}})))((e=>l.createElement("div",{className:e.classes.inputContainer},e.children)))},7546:(e,t,n)=>{n.d(t,{T2:()=>y,j2:()=>x});var o=n(5163),l=n(436),a=n(5256),c=n(1776),s=n(9378),r=n(1837),i=n(2511),d=n(4190),u=n(4882),m=n(2784),g=n(7267),h=n(1810),v=n(8402),Z=n(7933);function p(e){var{innerRef:t}=e,n=(0,o._T)(e,["innerRef"]);return n.to.toString().match(/https/)?m.createElement("a",Object.assign({onClick:()=>Homey.openURL(n.to.toString())},n),n.children):m.createElement(Z.rU,Object.assign({},n))}const E=e=>m.createElement(v.Z,Object.assign({},e,{component:p}),e.children),f=e=>({text:{padding:e.spacing(2),paddingBottom:0},version:{padding:e.spacing(2),paddingTop:0},normal:{},selected:{color:e.palette.primary.main},otherButton:{},firstButton:{marginLeft:-12}}),y=e=>{const[t,n]=m.useState(!1);return m.createElement(m.Fragment,null,m.createElement(b,{open:t,onClose:()=>{n(!1)}}),m.createElement(x,{first:!0,onClick:()=>{n(!0)},icon:m.createElement(u.Z,null)}))},b=(0,g.EN)((0,i.Z)(f)((e=>{const{classes:t}=e,n=[{type:"entry",to:"/",text:(0,h.Z)("menu.plans")},{to:"/temperatures",text:(0,h.Z)("menu.temperatures")},{to:"/schedules",text:(0,h.Z)("menu.schedules")},{to:"/settings",text:(0,h.Z)("menu.settings")},{to:"https://homey-heating.mskg.app",text:(0,h.Z)("menu.help")}];return m.createElement(d.ZP,{open:e.open,onClose:e.onClose},m.createElement(l.Z,{className:t.text,variant:"h5",gutterBottom:!0},(0,h.Z)("menu.title")),m.createElement(l.Z,{className:t.version,variant:"body2",color:"textSecondary",gutterBottom:!0},"Version ","2.0.0-rc15"," (","v2.0.0-rc15",")"),m.createElement(a.Z,null),m.createElement(c.Z,null,n.map((n=>"Divider"===n.type?m.createElement(a.Z,null):m.createElement(E,{key:n.to,to:n.to,disabled:e.match.url===n.to,button:!0},m.createElement(s.Z,{primary:n.text,classes:{primary:e.match.url!==n.to?t.normal:t.selected}}))))))}))),x=(0,i.Z)(f)((e=>{const{classes:t,first:n,icon:l}=e,a=(0,o._T)(e,["classes","first","icon"]);return m.createElement(r.Z,Object.assign({className:n?t.firstButton:t.otherButton,color:"inherit"},a),l)}))},638:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(5163),l=n(2511),a=n(436),c=n(2784);const s=(0,l.Z)((e=>({headline:{marginTop:e.spacing(4),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}})))((e=>{const{classes:t,text:n}=e,l=(0,o._T)(e,["classes","text"]);return c.createElement(a.Z,Object.assign({className:t.headline,variant:"h5",color:"textSecondary",gutterBottom:!0},l),n)}))},3589:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(2511),l=n(2784);const a=(0,o.Z)((e=>({root:{webkitOverflowScrolling:"touch",display:"flex",flexFlow:"column",height:"100vh",width:"100vw",backgroundColor:"#fff"},body:{flex:"1 0 100%",margin:0,maxWidth:"100%",overflowY:"scroll"}})))((e=>{const{classes:t}=e,{header:n,body:o,paddingTop:a,paddingBottom:c}=e.children,s=c||"auto";return l.createElement(l.Fragment,null,l.createElement("div",{className:t.root},n,l.createElement("div",{className:t.body,style:{paddingTop:a,paddingBottom:s}},o)))}))},6577:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var o=n(5163),l=n(7277),a=n(5806),c=n(2511),s=n(2938),r=n(9166),i=n(3826),d=n(2784),u=n(7267),m=n(2094),g=n(2817),h=n(5030),v=n(7606),Z=n(3547),p=n(9503),E=n(7546),f=n(638),y=n(1810),b=n(3589);const x=(0,i.RM)((0,u.EN)((0,c.Z)((e=>({})))((e=>{const{settings:t,setSettings:n,loadSettings:c}=(0,m.rV)(!0),[i,u]=d.useState(!1);function x(e,n=null){const o=t[e];return null==o?n:o}const C=(e,t="value")=>o=>{const l=o.target[t];n((t=>Object.assign(Object.assign({},t),{[e]:l}))),u(!0)};return d.createElement(b.Z,null,{header:d.createElement(h.Z,null,{title:(0,y.Z)("settings.title"),button:d.createElement(d.Fragment,null,!i&&d.createElement(E.T2,null),i&&d.createElement(E.j2,{first:!0,onClick:()=>(0,o.mG)(void 0,void 0,void 0,(function*(){yield c(),u(!1)})),icon:d.createElement(r.Z,null)})),actions:d.createElement(d.Fragment,null,i&&d.createElement(l.Z,{color:"inherit",onClick:()=>{g.w.updateSettings(t).then((t=>{e.enqueueSnackbar((0,y.Z)("settings.saved")),u(!1)}))}},"save"))}),paddingTop:50,paddingBottom:50,body:d.createElement(d.Fragment,null,d.createElement(f.Z,{text:(0,y.Z)("settings.notifications.category")}),d.createElement(v.Z,{text:(0,y.Z)("settings.notifications.text")}),d.createElement(p.Z,null,d.createElement(a.Z,{control:d.createElement(s.Z,{checked:!0===x("NotifyModeChange",!0),onChange:C("NotifyModeChange","checked")}),label:(0,y.Z)("settings.notifications.NotifyModeChange"),labelPlacement:"end"})),d.createElement(p.Z,null,d.createElement(a.Z,{control:d.createElement(s.Z,{checked:!0===x("NotifySetError",!0),onChange:C("NotifySetError","checked")}),label:(0,y.Z)("settings.notifications.NotifySetError"),labelPlacement:"end"})),d.createElement(p.Z,null,d.createElement(a.Z,{control:d.createElement(s.Z,{checked:!0===x("NotifySetSuccess",!0),onChange:C("NotifySetSuccess","checked")}),label:(0,y.Z)("settings.notifications.NotifySetSuccess"),labelPlacement:"end"})),d.createElement(f.Z,{text:(0,y.Z)("settings.sentry.category")}),d.createElement(v.Z,{text:(0,y.Z)("settings.sentry.text")}),d.createElement(p.Z,null,d.createElement(a.Z,{control:d.createElement(s.Z,{checked:!0===x("SentryEnabled",!0),onChange:C("SentryEnabled","checked")}),label:(0,y.Z)("settings.enabled.label"),labelPlacement:"end"})),d.createElement(f.Z,{text:(0,y.Z)("settings.log.category")}),d.createElement(v.Z,{text:(0,y.Z)("settings.log.text")}),d.createElement(p.Z,null,d.createElement(a.Z,{control:d.createElement(s.Z,{checked:!0===x("ConsoleReLogEnabled"),onChange:C("ConsoleReLogEnabled","checked")}),label:(0,y.Z)("settings.enabled.label"),labelPlacement:"end"})),d.createElement(Z.Z,{label:(0,y.Z)("settings.category.label"),placeholder:(0,y.Z)("settings.category.placeholder"),required:!0===x("ConsoleReLogEnabled"),value:x("ConsoleReLogCategory",""),onChange:C("ConsoleReLogCategory")}),d.createElement(f.Z,{text:(0,y.Z)("settings.backup.title")}),d.createElement(v.Z,{text:(0,y.Z)("settings.backup.text")}),d.createElement(Z.Z,{label:(0,y.Z)("settings.backup.label"),placeholder:(0,y.Z)("settings.backup.placeholder"),multiline:!0,rowsMax:"10",value:x("Plans",""),onChange:C("Plans")}))})}))))}}]);
//# sourceMappingURL=https://raw.githubusercontent.com/mskg/homey-heating/release/v2.0.0-rc15/settings/577.js.map